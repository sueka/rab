{"version":3,"file":"assets/scripts/table.46dd71fe.js","mappings":"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","sources":["webpack://rap/./src/components/DataTable/classes.css?56c0","webpack://rap/./src/components/DataTable/index.tsx","webpack://rap/./src/hooks/useFetch.ts","webpack://rap/./src/validators/protocolBuffersWellKnownTypesValidators.ts","webpack://rap/./src/validators/googleSheetsApiResourceValidators.ts","webpack://rap/./src/components/FossLicenseComparisonTable/index.tsx","webpack://rap/./src/utils/parseSpreadsheetLocale.ts","webpack://rap/./src/components/App/TablePage/messages.ts","webpack://rap/./src/components/App/TablePage/index.tsx","webpack://rap/./src/components/DataTable/classes.css"],"sourcesContent":["\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!../../../node_modules/postcss-loader/dist/cjs.js!./classes.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!../../../node_modules/postcss-loader/dist/cjs.js!./classes.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { makeStyles, useTheme } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableContainer from '@material-ui/core/TableContainer'\nimport TableHead from '@material-ui/core/TableHead'\nimport TableRow from '@material-ui/core/TableRow'\nimport TableSortLabel from '@material-ui/core/TableSortLabel'\nimport Bowser from 'bowser'\nimport classnames from 'classnames'\nimport { List, OrderedMap } from 'immutable'\nimport React, { useCallback, useMemo, useState } from 'react'\n\nimport classes from './classes.css'\n\ninterface Props {\n  columns: Column[]\n  rows: Row[]\n  defaultSortOrder?: SortOrder\n  locale?: string // BCP 47 Language Tag\n}\n\nexport interface Column {\n  field: Field\n  label?: React.ReactNode\n  width?: number // in pixels\n}\n\nexport type Row = {\n  [key in Field]: React.ReactNode\n}\n\ntype Field = string | number\n\ninterface StyleProps {\n  direction: Direction | undefined\n}\n\n// TODO: remove\nfunction compareStrings(a: string, b: string): number {\n  if (a < b) return -1\n  else if (a > b) return 1\n  else return 0\n}\n\n// TODO: remove\nfunction isNumberLikeString(it: string) {\n  return !Number.isNaN(Number(it)) && !Number.isNaN(parseFloat(it))\n}\n\n// TODO: Remove\n// TODO: Detect UA changes?\nconst browser = Bowser.getParser(navigator.userAgent)\n\nconst isMobile = browser.is('Mobile')\n\nconst useStyles = makeStyles({\n  LocalizedCell: {\n    textAlign: ({ direction }: StyleProps) => {\n      if (direction === undefined) return undefined\n\n      switch (direction) {\n        case 'ltr': return 'left'\n        case 'rtl': return 'right'\n      }\n    },\n  },\n}, {\n  flip: false,\n})\n\nconst DataTable: React.FC<Props> = ({ columns, rows, defaultSortOrder = 'asc', locale }) => {\n  const [sorts, setSorts] = useState<Sort<Row>[]>([])\n\n  const primarySort = useMemo(() => sorts[0], [sorts])\n\n  const createSortLabelClickHandler = useCallback((field: Field) => () => {\n    if (field === primarySort?.by) {\n      // oldPrimarySort === primarySort なので primarySort が存在するならば oldPrimarySort も存在する。\n      setSorts(([oldPrimarySort, ...oldRestSorts]) => [\n        {\n          by: oldPrimarySort!.by,\n          in: oldPrimarySort!.in === 'asc' ? 'desc' : 'asc',\n        },\n        ...oldRestSorts,\n      ])\n    } else {\n      const fieldSortIndex = sorts.findIndex((sort) => sort.by === field)\n\n      if (fieldSortIndex === -1) {\n        setSorts((oldSorts) => [\n          {\n            by: field,\n            in: defaultSortOrder,\n          },\n          ...oldSorts,\n        ])\n      } else {\n        setSorts((oldSorts) => {\n          // const oldFieldSortIndex = oldSorts.findIndex((oldSort) => oldSort.by === field)\n\n          return [\n            oldSorts[fieldSortIndex]!, // oldSorts === sorts かつ fieldSortIndex !== -1 なので、存在する。\n            ...oldSorts.slice(0, fieldSortIndex),\n            ...oldSorts.slice(fieldSortIndex + 1),\n          ]\n        })\n      }\n    }\n  }, [defaultSortOrder, sorts, primarySort])\n\n  const sortedRows = useMemo(() => sorts.reduceRight((result, sort) => {\n    switch (sort.in) {\n      case 'asc': return result.sortBy((row) => String(row[sort.by]), compareStrings)\n      case 'desc': return result.sortBy((row) => String(row[sort.by]), (a, b) => -compareStrings(a, b))\n    }\n  }, List(rows)).toArray(), [sorts, rows])\n\n  const theme = useTheme()\n\n  const direction = useMemo(() => {\n    if (locale === undefined) return undefined\n\n    return /^(?:he|iw)\\b/.test(locale) ? 'rtl' : 'ltr' // TODO: RtL の判定方法を修正する\n  }, [locale])\n\n  const jssClasses = useStyles({ direction })\n  const numericCellClassName = useMemo(() => classnames(jssClasses.LocalizedCell, classes.NumericCell), [jssClasses.LocalizedCell])\n\n  return (\n    <TableContainer component={ Paper }>\n      <Table size={ isMobile ? 'small' : 'medium' } lang={ locale }>\n        <TableHead>\n          <TableRow>\n            { columns.map((column) => (\n              <TableCell\n                variant=\"head\"\n                sortDirection={ primarySort?.by === column.field ? primarySort.in : undefined }\n                className={ jssClasses.LocalizedCell }\n                style={ { minWidth: column.width !== undefined ? column.width + 2 * theme.spacing(2) : undefined } }\n                key={ column.field }\n              >\n                <bdi>\n                  <TableSortLabel\n                    active={ primarySort?.by === column.field }\n                    direction={ sorts.find((sort) => sort.by === column.field)?.in ?? defaultSortOrder }\n                    onClick={ createSortLabelClickHandler(column.field) }\n                  >\n                    { column.label ?? column.field }\n                  </TableSortLabel>\n                </bdi>\n              </TableCell>\n            )) }\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          { sortedRows.map((row, i) => (\n            <TableRow hover key={ i }>\n              { OrderedMap(Object.entries(row)).sortBy((_value, field) => columns.findIndex((column) => column.field === field), (a, b) => a - b).map((value, field) => (\n                <TableCell\n                  className={ isNumberLikeString(String(value)) ? numericCellClassName : jssClasses.LocalizedCell }\n                  key={ field }\n                >\n                  <bdi>\n                    { value }\n                  </bdi>\n                </TableCell>\n              )).valueSeq().toArray() }\n            </TableRow>\n          )) }\n        </TableBody>\n      </Table>\n    </TableContainer>\n  )\n}\n\nexport default DataTable\n","import { useEffect, useState } from 'react'\n\nimport { shouldBePresent } from '~/asserters/commonAsserters'\nimport fetch, { NoAnyResponse } from '~/fetch'\n\n// TODO: remove?\ntype PromiseState =\n  | 'pending'\n  | 'fulfilled'\n  | 'rejected'\n\n/**\n * A hook to suspend a fetch result.\n *\n * @throws `Promise<void>` while pending.\n * @throws `Error` if rejected.\n */\nexport default function useFetch(input: RequestInfo, init?: RequestInit) {\n  const [fetchPromise, setFetchPromise] = useState<Promise<NoAnyResponse> | null>(null)\n  const [response, setResponse] = useState<NoAnyResponse | null>(null)\n  const [error, setError] = useState<Error | null>(null)\n  const [state, setState] = useState<PromiseState | null>(null)\n\n  useEffect(() => {\n    setFetchPromise(fetch(input, init))\n    setState('pending')\n  }, [input, init])\n\n  switch (state) {\n    case 'pending':\n      shouldBePresent(fetchPromise)\n\n      throw fetchPromise.then((value) => {\n        setResponse(value)\n        setState('fulfilled')\n      }).catch((reason) => {\n        if (!(reason instanceof Error)) {\n          throw new TypeError('Non-error reason caught.')\n        }\n\n        setError(reason)\n        setState('rejected')\n      })\n    case null:\n    case 'fulfilled': return response\n    case 'rejected': throw error\n  }\n}\n","import { asJson, listOf } from './commonValidators'\n\nconst asValue = asJson\nexport const asListValue = listOf(asValue)\n","import { asNumber, asObject, asString, asUnionOf, listOf, optional } from './commonValidators'\nimport { asListValue } from './protocolBuffersWellKnownTypesValidators'\n\nconst asDimension = asUnionOf('DIMENSION_UNSPECIFIED', 'COLUMNS', 'ROWS')\n\nexport const asValueRange = asObject<GoogleSheetsApi.ValueRange>((input) => ({\n  range: optional(asString)(input.range),\n  majorDimension: optional(asDimension)(input.majorDimension),\n  values: optional(asListValue)(input.values),\n}))\n\nexport const asSpreadsheet = asObject<GoogleSheetsApi.Spreadsheet>((input) => ({\n  properties: optional(asSpreadsheetProperties)(input.properties),\n  sheets: optional(listOf(asSheet))(input.sheets),\n}))\n\nexport const asSpreadsheetProperties = asObject<GoogleSheetsApi.SpreadsheetProperties>((input) => ({\n  locale: optional(asString)(input.locale),\n}))\n\nexport const asSheet = asObject<GoogleSheetsApi.Sheet>((input) => ({\n  data: optional(listOf(asGridData))(input.data),\n}))\n\nexport const asGridData = asObject<GoogleSheetsApi.GridData>((input) => ({\n  columnMetadata: optional(listOf(asDimensionProperties))(input.columnMetadata),\n}))\n\nexport const asDimensionProperties = asObject<GoogleSheetsApi.DimensionProperties>((input) => ({\n  pixelSize: optional(asNumber)(input.pixelSize),\n}))\n","import { stringify } from 'bcp-47'\nimport { List } from 'immutable'\nimport { useInjection } from 'inversify-react'\nimport React, { useEffect, useState } from 'react'\nimport { generatePath } from 'react-router'\n\nimport DataTable, { Column, Row } from '~/components/DataTable'\nimport ConfigRegistry from '~/config/ConfigRegistry'\nimport zipIterables from '~/extensions/Iterable/zipIterables'\nimport useFetch from '~/hooks/useFetch'\nimport typed from '~/typed'\nimport parseSpreadsheetLocale from '~/utils/parseSpreadsheetLocale'\nimport { asSpreadsheet, asValueRange } from '~/validators/googleSheetsApiResourceValidators'\n\n// TODO: remove\ntype CellValue = string | number\n\n// TODO: remove\nfunction isCellValue(input: unknown): input is CellValue {\n  switch (typeof input) {\n    case 'string':\n    case 'number': return true\n    default: return false\n  }\n}\n\nconst FossLicenseComparisonTable: React.FC = () => {\n  const config = useInjection<ConfigRegistry>('EnvVarConfig')\n\n  const getSpreadsheetResponse = useFetch(generatePath(typed<[string]>`${ config.get('SHEETS_API_URL') }/spreadsheets/:spreadsheetId\\\\?ranges=:sheetName&includeGridData=:includeGridData&fields=:fields&key=:apiKey`, {\n    spreadsheetId: config.get('GOOGLE_SHEETS_FOSS_COMPARISON_TABLE_SHEET_ID'),\n    sheetName: config.get('GOOGLE_SHEETS_FOSS_COMPARISON_TABLE_SHEET_SHEET_NAME'),\n    includeGridData: true,\n    fields: 'properties.locale,sheets.data.columnMetadata',\n    apiKey: config.get('GOOGLE_CLOUD_APIS_GOOGLE_SHEETS_API_KEY'),\n  }))\n\n  const getSpreadsheetValuesResponse = useFetch(generatePath(typed<[string]>`${ config.get('SHEETS_API_URL') }/spreadsheets/:spreadsheetId/values/:sheetName\\\\?key=:apiKey`, {\n    spreadsheetId: config.get('GOOGLE_SHEETS_FOSS_COMPARISON_TABLE_SHEET_ID'),\n    sheetName: config.get('GOOGLE_SHEETS_FOSS_COMPARISON_TABLE_SHEET_SHEET_NAME'),\n    apiKey: config.get('GOOGLE_CLOUD_APIS_GOOGLE_SHEETS_API_KEY'),\n  }))\n\n  const [columns, setColumns] = useState<Column[] | null>(null)\n  const [rows, setRows] = useState<Row[] | null>(null)\n  const [locale, setLocale] = useState<string | null>(null)\n\n  useEffect(() => {\n    // tslint:disable-next-line:semicolon\n    ;(async () => {\n      if (getSpreadsheetResponse === null || getSpreadsheetValuesResponse === null) {\n        return\n      }\n\n      const spreadsheet = asSpreadsheet(await getSpreadsheetResponse.json())\n      const spreadsheetLocale = spreadsheet.properties?.locale\n      const columnMetadata = spreadsheet.sheets?.[0]?.data?.[0]?.columnMetadata\n      const valueRange = asValueRange(await getSpreadsheetValuesResponse.json())\n\n      if (spreadsheetLocale === undefined || columnMetadata === undefined) {\n        throw new Error('No both locale and columnMetadata found.')\n      }\n\n      if (valueRange?.majorDimension !== 'ROWS') {\n        throw new Error('Dimension unsupported.')\n      }\n\n      if (valueRange.values === undefined || !valueRange.values.every<JsonArray>(Array.isArray)) {\n        throw new Error('Less than 2 dimensions found.')\n      }\n\n      if (!valueRange.values.every((row): row is CellValue[] => row.every(isCellValue))) {\n        throw new Error('Neither string nor number value found.')\n      }\n\n      setLocale(stringify(parseSpreadsheetLocale(spreadsheetLocale)))\n\n      const [firstRowValues, ...restRowsValues] = valueRange.values\n\n      if (firstRowValues === undefined) {\n        throw new Error('No rows found.')\n      }\n\n      const fields = firstRowValues.map((cellValue, i) => typed<[CellValue, number]>`${ cellValue }_${ i }`)\n\n      setColumns(Array.from(zipIterables(fields, zipIterables(firstRowValues, columnMetadata))).map(([field, [cellValue, { pixelSize }]]) => ({\n        field,\n        label: cellValue,\n        width: pixelSize,\n      })))\n\n      setRows(restRowsValues.map((rowValues) => Object.fromEntries(zipIterables(fields, rowValues))))\n    })()\n  }, [getSpreadsheetResponse, getSpreadsheetValuesResponse])\n\n  if (columns === null || rows === null) {\n    return null\n  }\n\n  return (\n    <DataTable\n      columns={ List(columns).sortBy((column) => column.field, (a, b) => {\n        if (a < b) return -1\n        else if (a > b) return 1\n        else return 0\n      }).toArray() }\n      rows={ rows }\n      locale={ locale ?? undefined }\n    />\n  )\n}\n\nexport default FossLicenseComparisonTable\n","import { Schema } from 'bcp-47/lib/parse'\n\nimport { shouldBePresent } from '~/asserters/commonAsserters'\n\n// declare global {\n//   interface RegExpExecArray {\n//     groups?: {\n//         [key: string]: string | undefined\n//     }\n//   }\n// }\n\n/**\n * Parse {locale} as a [Spreadsheet locale](https://developers.google.com/sheets/api/reference/rest/v4/spreadsheets#SpreadsheetProperties).\n */\nexport default function parseSpreadsheetLocale(localeString: string): Schema {\n  const groups = /(?<language>[a-z]{2,3})(?:_(?<region>[A-Z]{2}))?/i.exec(localeString)?.groups as {\n    language: string\n    region: string | undefined\n  } | undefined\n\n  shouldBePresent(groups)\n\n  const { language, region } = groups\n\n  return {\n    language,\n    extendedLanguageSubtags: [],\n    script: null,\n    region: region ?? null,\n    variants: [],\n    extensions: [],\n    privateuse: [],\n    irregular: null,\n    regular: null,\n  }\n}\n","import { defineMessages } from 'react-intl'\n\nexport default defineMessages({\n  table: 'Table',\n})\n","import CircularProgress from '@material-ui/core/CircularProgress'\nimport React, { Suspense } from 'react'\nimport { Helmet } from 'react-helmet'\nimport { useIntl } from 'react-intl'\n\nimport FossLicenseComparisonTable from '~/components/FossLicenseComparisonTable'\nimport { createPage } from '~/components/PageTemplate'\nimport messages from './messages'\n\nconst TablePage: React.FC = () => {\n  const { formatMessage } = useIntl()\n\n  return (\n    <>\n      <Helmet title={ formatMessage(messages.table) } />\n      <Suspense fallback={ <CircularProgress /> }>\n        <FossLicenseComparisonTable />\n      </Suspense>\n    </>\n  )\n}\n\nexport default createPage(TablePage)\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".src-components-DataTable-classes__NumericCell--Da_0l {\\n  text-align: right; /* NOTE: アラビア数字は RtL 言語でも右寄せする。 <q cite=\\\"https://material.io/components/data-tables#behavior\\\">Align numbers to the right for improved scannability.</q> */\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/DataTable/classes.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,iBAAiB,EAAE,yJAAyJ;AAC9K\",\"sourcesContent\":[\".NumericCell {\\n  text-align: right; /* NOTE: アラビア数字は RtL 言語でも右寄せする。 <q cite=\\\"https://material.io/components/data-tables#behavior\\\">Align numbers to the right for improved scannability.</q> */\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"NumericCell\": \"src-components-DataTable-classes__NumericCell--Da_0l\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","compareStrings","a","b","isMobile","Bowser","navigator","userAgent","is","useStyles","makeStyles","LocalizedCell","textAlign","direction","flip","columns","rows","defaultSortOrder","locale","sorts","setSorts","useState","primarySort","useMemo","createSortLabelClickHandler","useCallback","field","by","oldPrimarySort","oldRestSorts","in","fieldSortIndex","findIndex","sort","oldSorts","slice","sortedRows","reduceRight","result","sortBy","row","String","List","toArray","theme","useTheme","test","jssClasses","numericCellClassName","classnames","classes","TableContainer","component","Paper","Table","size","lang","TableHead","TableRow","map","column","TableCell","variant","sortDirection","className","style","minWidth","width","spacing","key","TableSortLabel","active","find","onClick","label","TableBody","i","hover","OrderedMap","Object","entries","_value","value","it","Number","isNaN","parseFloat","valueSeq","useFetch","input","init","fetchPromise","setFetchPromise","response","setResponse","error","setError","state","setState","useEffect","fetch","shouldBePresent","then","catch","reason","Error","TypeError","asValue","asJson","asListValue","listOf","asDimension","asUnionOf","asValueRange","asObject","range","optional","asString","majorDimension","values","asSpreadsheet","properties","asSpreadsheetProperties","sheets","asSheet","data","asGridData","columnMetadata","asDimensionProperties","pixelSize","asNumber","isCellValue","config","useInjection","getSpreadsheetResponse","generatePath","typed","get","spreadsheetId","sheetName","includeGridData","fields","apiKey","getSpreadsheetValuesResponse","setColumns","setRows","setLocale","spreadsheet","json","spreadsheetLocale","valueRange","every","Array","isArray","stringify","localeString","groups","exec","language","region","extendedLanguageSubtags","script","variants","extensions","privateuse","irregular","regular","parseSpreadsheetLocale","firstRowValues","restRowsValues","cellValue","from","zipIterables","rowValues","fromEntries","defineMessages","table","createPage","formatMessage","useIntl","Helmet","title","messages","Suspense","fallback","CircularProgress","___CSS_LOADER_EXPORT___","push","module","id","locals"],"sourceRoot":""}