{"version":3,"sources":["webpack://react-app-prototype/webpack/runtime/create fake namespace object","webpack://react-app-prototype/webpack/runtime/load script","webpack://react-app-prototype/./src/atoms/darkState.ts","webpack://react-app-prototype/./src/contexts/DefaultDarkContext.ts","webpack://react-app-prototype/./src/domain/entity/Entity.ts","webpack://react-app-prototype/./src/domain/entity/Task.ts","webpack://react-app-prototype/./src/lib/extensions/Unknown/yieldThis.ts","webpack://react-app-prototype/./src/domain/vo/Coordinates.ts","webpack://react-app-prototype/./src/domain/vo/TaskId.ts","webpack://react-app-prototype/./src/domain/vo/Id.ts","webpack://react-app-prototype/./src/domain/vo/ValueObject.ts","webpack://react-app-prototype/./src/classes.css?b10b","webpack://react-app-prototype/./src/lib/components/Route/index.tsx","webpack://react-app-prototype/./src/components/App/index.tsx","webpack://react-app-prototype/./src/components/IntlProvider/index.tsx","webpack://react-app-prototype/./src/configureTheme.ts","webpack://react-app-prototype/./src/components/ThemeProvider/index.tsx","webpack://react-app-prototype/./src/lib/middleware/invariantMiddleware/createInvariantMiddleware.ts","webpack://react-app-prototype/./src/configureStore.ts","webpack://react-app-prototype/./src/createProvider.tsx","webpack://react-app-prototype/./src/lib/components/SnackbarProvider/index.tsx","webpack://react-app-prototype/./src/lib/extensions/Boolean/Boolean.prototype.hashCode.ts","webpack://react-app-prototype/./src/lib/extensions/Boolean/hashCode.ts","webpack://react-app-prototype/./src/lib/extensions/Number/hashCode.ts","webpack://react-app-prototype/./src/lib/extensions/Number/Number.prototype.hashCode.ts","webpack://react-app-prototype/./src/lib/extensions/String/String.prototype.hashCode.ts","webpack://react-app-prototype/./src/lib/extensions/String/hashCode.ts","webpack://react-app-prototype/./src/index.tsx","webpack://react-app-prototype/./src/lib/asserters/commonAsserters.ts","webpack://react-app-prototype/./src/lib/boni/redux-saga/effects/takeEvery.ts","webpack://react-app-prototype/./src/lib/contexts/IntlProviderContext.ts","webpack://react-app-prototype/./src/lib/delay.ts","webpack://react-app-prototype/./src/lib/errors/AbstractError.ts","webpack://react-app-prototype/./src/lib/errors/UnreachableError.ts","webpack://react-app-prototype/./src/lib/extensions/Eq/equalsChessmen.ts","webpack://react-app-prototype/./src/lib/extensions/Iterable/zipIterables.ts","webpack://react-app-prototype/./src/lib/extensions/Iterator/zipIterators.ts","webpack://react-app-prototype/./src/lib/createUrlOrPathAbempty.ts","webpack://react-app-prototype/./src/lib/polyfills/Object.fromEntries.ts","webpack://react-app-prototype/./src/lib/fetch.ts","webpack://react-app-prototype/./src/lib/extensions/Record/mapValues.ts","webpack://react-app-prototype/./src/lib/guards/stringGuards.ts","webpack://react-app-prototype/./src/lib/polyfills/SpeechRecognition.ts","webpack://react-app-prototype/./src/lib/trait/HashableEq.ts","webpack://react-app-prototype/./src/lib/trait/Eq.ts","webpack://react-app-prototype/./src/lib/typed.ts","webpack://react-app-prototype/./src/lib/validators/ValidationError.ts","webpack://react-app-prototype/./src/lib/extensions/Array/conj.ts","webpack://react-app-prototype/./src/lib/extensions/String/stripMargin.ts","webpack://react-app-prototype/./src/lib/extensions/String/trimEols.ts","webpack://react-app-prototype/./src/lib/validators/commonValidators.ts","webpack://react-app-prototype/./src/lib/validators/intlValidators.ts","webpack://react-app-prototype/./src/lib/middleware/invariantMiddleware/combineInvariants.ts","webpack://react-app-prototype/./src/redux/index.ts","webpack://react-app-prototype/./src/redux/modules/chess.ts","webpack://react-app-prototype/./src/utils/chess/getCoordinatesAttackedBy.ts","webpack://react-app-prototype/./src/redux/modules/counter.ts","webpack://react-app-prototype/./src/redux/modules/io.ts","webpack://react-app-prototype/./src/redux/modules/localeSelector.ts","webpack://react-app-prototype/./src/lib/errors/LogicError.ts","webpack://react-app-prototype/./src/redux/modules/reminder.ts","webpack://react-app-prototype/./src/redux/modules/userAuthn.ts","webpack://react-app-prototype/./src/classes.css","webpack://react-app-prototype/webpack/bootstrap","webpack://react-app-prototype/webpack/runtime/compat get default export","webpack://react-app-prototype/webpack/runtime/define property getters","webpack://react-app-prototype/webpack/runtime/ensure chunk","webpack://react-app-prototype/webpack/runtime/get javascript chunk filename","webpack://react-app-prototype/webpack/runtime/getFullHash","webpack://react-app-prototype/webpack/runtime/global","webpack://react-app-prototype/webpack/runtime/harmony module decorator","webpack://react-app-prototype/webpack/runtime/hasOwnProperty shorthand","webpack://react-app-prototype/webpack/runtime/make namespace object","webpack://react-app-prototype/webpack/runtime/node module decorator","webpack://react-app-prototype/webpack/runtime/publicPath","webpack://react-app-prototype/webpack/runtime/jsonp chunk loading","webpack://react-app-prototype/webpack/startup"],"names":["leafPrototypes","getProto","inProgress","dataWebpackPrefix","darkState","atom","key","v4","default","createContext","defaultDark","Entity","id","that","this","equals","HashableEq","asDomainObjectSerializedTask","asObject","input","asString","content","done","asBoolean","Task","_content","_done","JSON","stringify","serialize","result","hashCode","value","serialized","parse","TaskId","decorate","Coordinates","file","rank","s","test","Id","checkInvariant","Error","options","Component","component","restProps","undefined","$$typeof","Symbol","for","isLazyExoticComponent","props","fallback","CircularProgress","HomePage","React","ChessPage","ClockPage","CounterPage","FormControlsPage","InfoPage","PaintPage","ReminderPage","SettingsPage","NoMatch","hot","location","useLocation","pathname","hash","exec","to","exact","strict","sensitive","path","connect","localeSelector","locale","formats","messages","availableLocales","dir","useMemo","Helmet","htmlAttributes","IntlProviderContext","textComponent","direction","dark","createMuiTheme","typography","fontFamily","button","textTransform","MuiLink","variant","MuiButton","MuiFormControl","MuiTextField","palette","primary","teal","secondary","indigo","type","children","useContext","useRecoilState","theme","configureTheme","DefaultDarkContext","reducer","invariant","store","next","action","oldState","getState","newState","composeEnhancers","createLogger","diff","collapsed","compose","createProvider","history","saga","recursionDepth","state","hasError","handleError","error","cause","setState","sagaMiddlewareOptions","sagaMiddleware","createSagaMiddleware","invariantMiddleware","createInvariantMiddleware","storeEnhancers","applyMiddleware","routerMiddleware","createStore","configureStore","UnreachableError","onError","run","toPromise","catch","renderError","getDerivedStateFromError","RightSlide","Slide","LeftSlide","transition","shouldBePresent","TransitionComponent","Object","defineProperty","Boolean","prototype","x","ab","doubleContainer","uintContainer","v","ArrayBuffer","Float64Array","Uint32Array","JSBI","Number","String","i","length","charCodeAt","containerImport","initialState","chess","board","chessmen","Map","counter","count","io","now","Date","asFormats","errors","List","reminder","tasks","userAuthn","jss","create","plugins","jssPreset","rtl","Main","container","createReducer","rootSaga","useCallback","service","resolve","Service","call","Provider","typed","TypeError","useMediaQuery","titleTemplate","defaultTitle","DndProvider","backend","HTML5Backend","StylesProvider","CssBaseline","maxSnack","hideIconVariant","then","createBrowserHistory","basename","process","ReactDOM","document","getElementById","it","shouldBeNullable","takeEvery","pattern","ctx","worker","originalTakeEvery","ms","Promise","res","setTimeout","AbstractError","message","name","setPrototypeOf","equalsChessmen","y","symbol","zipIterables","xs","ys","iterator","genIt","values","zipIterators","DUMMY_ORIGIN","dropDummyOrigin","RegExp","PathAbempty","pathAbempty","restArgs","_url","URL","href","origin","search","searchParams","toJSON","fromEntries","entries","isEmpty","object","keys","toJson","Array","isArray","map","json","f","mapValues","toQueryMap","query","goWithArray","index","head","goWithObject","member","go","q","tail","buildRequestInfo","method","parameterizedEndpoint","params","url","args","urlOrPathAbempty","isUrl","createUrlOrPathAbempty","pathToRegexp","urlSearchParams","URLSearchParams","forEach","append","toString","buildRequestInit","headers","formData","FormData","body","fetch","request","requestInfo","requestInit","window","response","globalThis","SpeechRecognition","webkitSpeechRecognition","canEqual","template","substitutions","slice","substitution","segment","ValidationError","conj","separator","lastSeparator","lastX","pop","join","generateLineWithEolIterator","eols","eolPattern","eolCharPattern","eol","stripMargin","marginChar","stripMargin2","stripMargin1","line","matches","source","groups","marginCharCandidate","stripped","cs","lineBuffer","eolBuffer","c","some","startsWith","includes","trimEols","replace","trimTrailingEols","trimLeadingEols","failSafe","asT","right","left","leftOnly","t","isLeft","named","optional","asRequired","unionOf","asU","u","isRight","recordOf","reduce","output","asUnionOf","className","console","number","asIntlNumberFormatOptions","date","asIntlDateTimeFormatOptions","time","localeMatcher","style","currency","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","invariants","every","moduleName","moduleState","injectable","chessService","counterService","ioService","localeSelectorService","reminderService","userAuthnService","inject","UserAuthnService","ReminderService","LocaleSelectorService","IoService","CounterService","ChessService","fork","combineReducers","router","connectRouter","createChessReducer","createCounterReducer","createIoReducer","createLocaleSelectorReducer","createReminderReducer","createUserAuthnReducer","combineInvariants","chessInvariant","counterInvariant","picking","targets","has","expected","coord","actual","get","existsCoordinatedChessman","chessman","RESET_BOARD","HALF_MOVE","PICK_CHESSMAN","PUT_CHESSMAN","RELEASE_CHESSMAN","REMOVE_CHESSMAN","SET_TARGETS","chessActionTypes","isChessAction","resetBoard","halfMove","target","payload","pickChessman","putChessman","releaseChessman","setTargets","hasAdvancedTwoSquares","set","delete","put","select","halfMoveSaga","pickChessmanSaga","RESET","INCREMENT_IF_ODD","INCREMENT_ASYNC","INCREMENT","DECREMENT","counterActionTypes","isCounterAction","reset","incrementIfOdd","incrementAsync","increment","decrement","selectCount","delay","incrementIfOddSaga","incrementAsyncSaga","UPDATE_NOW","START_CLOCK","STOP_CLOCK","SET_NOW","ioActionTypes","isIoAction","updateNow","startClock","stopClock","startClockTask","getMilliseconds","cancel","startClockSaga","updateNowSaga","stopClockSaga","SELECT_LOCALE","SET_LOCALE","SET_FORMATS","SET_MESSAGES","PUSH_ERROR","localeSelectorActionTypes","isLocaleSelectorAction","selectLocale","setLocale","setFormats","setMessages","push","config","selectLocaleSaga","LogicError","GET_TASKS_ASYNC","SET_TASKS","ADD_TASK_ASYNC","CHANGE_TASK_CONTENT_ASYNC","MARK_TASK_AS_DONE_ASYNC","MARK_TASK_AS_UNDONE_ASYNC","DELETE_TASK_ASYNC","MOVE_TASK","PUSH_TASK","MARK_TASK_AS_DONE","MARK_TASK_AS_UNDONE","REMOVE_TASK","CHECK_TASK","REMOVE_ERROR","reminderActionTypes","isReminderAction","getTasksAsync","setTasks","addTaskAsync","changeTaskContentAsync","taskId","markTaskAsDoneAsync","markTaskAsUndoneAsync","deleteTaskAsync","moveTask","sourceIndex","targetIndex","pushTask","task","markTaskAsDone","markTaskAsUndone","removeTask","checkTask","pushError","errorId","findIndex","update","with","remove","insert","taskRepository","list","findById","stateTasks","stateTask","find","getTasksAsyncSaga","addTaskAsyncSaga","changeTaskContentAsyncSaga","markTaskAsDoneAsyncSaga","markTaskAsUndoneAsyncSaga","deleteTaskAsyncSaga","checkTaskSaga","REDIRECT_TO_GITHUB","userAuthnActionTypes","isUserAuthnAction","assign","redirectToGitHub","___CSS_LOADER_EXPORT___","module","__webpack_module_cache__","__webpack_require__","moduleId","exports","loaded","__webpack_modules__","m","n","getter","__esModule","d","a","getPrototypeOf","obj","__proto__","mode","ns","r","def","current","indexOf","getOwnPropertyNames","definition","o","enumerable","e","chunkId","all","promises","h","g","Function","hmd","prop","hasOwnProperty","l","script","needAttach","scripts","getElementsByTagName","getAttribute","createElement","charset","timeout","nc","setAttribute","src","onScriptComplete","prev","event","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","fn","bind","appendChild","toStringTag","nmd","paths","scriptUrl","importScripts","currentScript","p","installedChunks","179","deferredModules","j","installedChunkData","promise","reject","errorType","realSrc","checkDeferredModules","webpackJsonpCallback","parentChunkLoadingFunction","data","chunkIds","moreModules","runtime","executeModules","resolves","shift","apply","chunkLoadingGlobal","self","checkDeferredModulesImpl","deferredModule","fulfilled","depId","splice","startup"],"mappings":"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","file":"assets/scripts/main.dfe0a7fd.js","sourcesContent":["var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"react-app-prototype:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","import { atom } from 'recoil'\nimport { v4 } from 'uuid'\n\nconst darkState = atom<boolean | null>({\n  key: v4(),\n  default: null,\n})\n\nexport default darkState\n","import { createContext } from 'react'\n\ninterface DefaultDarkContext {\n  defaultDark: boolean | null | undefined\n}\n\nexport default createContext<DefaultDarkContext>({\n  defaultDark: null,\n})\n","import Id from '~/domain/vo/Id'\nimport Eq from '~/lib/trait/Eq'\nimport HashableEq from '~/lib/trait/HashableEq'\n\n// TODO: Move?\ninterface Identifiable {\n  id: Id\n}\n\nexport default abstract class Entity extends HashableEq implements Identifiable, Eq {\n  constructor(\n    public readonly id: Id\n  ) {\n    super()\n  }\n\n  public isIdenticalTo(that: this): boolean {\n    return this.id.equals(that.id)\n  }\n}\n","import TaskId from '~/domain/vo/TaskId'\nimport yieldThis from '~/lib/extensions/Unknown/yieldThis'\nimport { asBoolean, asObject, asString } from '~/lib/validators/commonValidators'\nimport Entity from './Entity'\n\nexport const asDomainObjectSerializedTask = asObject('an Id-serialized Task', (input) => ({\n  id: asString(input.id),\n  content: asString(input.content),\n  done: asBoolean(input.done),\n}))\n\nexport interface TaskParams {\n  id: TaskId\n  content: string\n  done: boolean\n}\n\nexport default class Task extends Entity {\n  private _content: string\n  private _done: boolean\n\n  constructor({\n    id,\n    content,\n    done,\n  }: TaskParams) {\n    super(id)\n\n    this._content = content\n    this._done = done\n  }\n\n  public static deserialize(serialized: string): Task {\n    const deserialized = yieldThis(asDomainObjectSerializedTask(JSON.parse(serialized)), (({ id, content, done }) => ({\n      id: TaskId.deserialize(id),\n      content,\n      done,\n    })))\n\n    return new Task(deserialized)\n  }\n\n  public serialize(): string {\n    return JSON.stringify({\n      id: this.id.serialize(),\n      content: this.content,\n      done: this.done,\n    })\n  }\n\n  public hashCode() {\n    // tslint:disable-next-line:no-let\n    let result = 17\n\n    result = 31 * result + this.id.hashCode()\n    result = 31 * result + this.content.hashCode()\n    result = 31 * result + this.done.hashCode()\n\n    return result\n  }\n\n  public with({\n    content = this.content,\n    done = this.done,\n  }: Partial<Alt.Omit<TaskParams, 'id'>>): Task {\n    return new Task({ id: this.id, content, done })\n  }\n\n  get content() {\n    return this._content\n  }\n\n  set content(value) {\n    this._content = value // tslint:disable-line:no-object-mutation\n  }\n\n  get done() {\n    return this._done\n  }\n\n  set done(value) {\n    this._done = value // tslint:disable-line:no-object-mutation\n  }\n}\n","export default function yieldThis<T extends unknown, U>(that: T, decorate: (that: T) => U): U {\n  return decorate(that)\n}\n","import HashableEq from '~/lib/trait/HashableEq'\n\nexport default interface Coordinates extends Chess.Coordinates {} // tslint:disable-line:no-empty-interface\n\nexport default class Coordinates extends HashableEq implements Class.ValueObject<Chess.Coordinates> {\n  constructor({ file, rank }: Chess.Coordinates) {\n    super()\n\n    this.file = file\n    this.rank = rank\n  }\n\n  public hashCode() {\n    // tslint:disable-next-line:no-let\n    let result = 0\n\n    result = 31 * result + this.file.hashCode()\n    result = 31 * result + this.rank.hashCode()\n\n    return result\n  }\n}\n","import Id from './Id'\n\nexport default class TaskId extends Id {}\n","import ValueObject from './ValueObject'\n\n// TODO: Remove\nfunction seemsLikeUuid(s: string) {\n  return /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/.test(s)\n}\n\nexport default class Id extends ValueObject<string> {\n  public static deserialize(serialized: string): Id {\n    return new Id(serialized)\n  }\n\n  public serialize(): string {\n    return this.value\n  }\n\n  protected checkInvariant() {\n    return seemsLikeUuid(this.value)\n  }\n\n  public hashCode() {\n    // tslint:disable-next-line:no-let\n    let result = 17\n\n    result = 31 * result + this.value.hashCode()\n\n    return result\n  }\n}\n","import HashableEq from '~/lib/trait/HashableEq'\n\n/**\n * A primitive ValueObject\n */\nexport default abstract class ValueObject<T> extends HashableEq implements Class.ValueObject<{ value: T }> {\n  constructor(\n    public readonly value: T\n  ) {\n    super()\n\n    if (!this.checkInvariant()) {\n      throw new Error('Invariant Violation: ValueObject#checkInvariant() must be a tautology.') // TODO\n    }\n  }\n\n  protected checkInvariant() {\n    return true\n  }\n}\n","import api from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!../node_modules/postcss-loader/dist/cjs.js!./classes.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import CircularProgress from '@material-ui/core/CircularProgress'\nimport React from 'react'\nimport { Route as OriginalRoute, RouteComponentProps, RouteProps } from 'react-router'\n\nconst withSuspense: (Component: React.LazyExoticComponent<React.ComponentType<RouteComponentProps>>) => React.ComponentType<RouteComponentProps> = (Component) => (props) => (\n  <React.Suspense fallback={ <CircularProgress /> }>\n    <Component { ...props } />\n  </React.Suspense>\n)\n\ninterface Props extends Alt.Omit<RouteProps, 'render' | 'component' | 'children'> {\n  // TODO: Ban mandatory props\n  component?: Required<RouteProps>['component'] | React.LazyExoticComponent<Required<RouteProps>['component']>\n}\n\n// FIXME: React の実装 (https://github.com/facebook/react/blob/v17.0.1/packages/react/src/ReactLazy.js, https://github.com/facebook/react/blob/v17.0.1/packages/shared/ReactSymbols.js) に依存しないようにする。\n// tslint:disable-next-line:no-any\nfunction isLazyExoticComponent<T extends React.ComponentType<any>>(component: T | React.LazyExoticComponent<T>): component is React.LazyExoticComponent<T> {\n  return '$$typeof' in component && component.$$typeof === Symbol.for('react.lazy')\n}\n\nconst Route: React.FC<Props> = ({ component, ...restProps }) => {\n  if (component === undefined) {\n    return <OriginalRoute { ...restProps } />\n  }\n\n  if (isLazyExoticComponent(component)) { // FIXME: if (component instanceof LazyExoticComponent) {\n    return <OriginalRoute component={ withSuspense(component) } { ...restProps } />\n  } else {\n    return <OriginalRoute component={ component } { ...restProps } />\n  }\n}\n\nexport default Route\n","import React from 'react'\nimport { hot } from 'react-hot-loader/root'\nimport { Redirect, Switch, useLocation } from 'react-router'\n\nimport Route from '~/lib/components/Route'\n\nexport const HomePage = React.lazy(() => import(/* webpackChunkName: \"home\" */ './HomePage'))\nexport const ChessPage = React.lazy(() => import(/* webpackChunkName: \"chess\" */ './ChessPage'))\nexport const ClockPage = React.lazy(() => import(/* webpackChunkName: \"clock\" */ './ClockPage'))\nexport const CounterPage = React.lazy(() => import(/* webpackChunkName: \"counter\" */ './CounterPage'))\nexport const FormControlsPage = React.lazy(() => import(/* webpackChunkName: \"formControls\" */ './FormControlsPage'))\nexport const InfoPage = React.lazy(() => import(/* webpackChunkName: \"info\" */ './InfoPage'))\nexport const PaintPage = React.lazy(() => import(/* webpackChunkName: \"paint\" */ './PaintPage'))\nexport const ReminderPage = React.lazy(() => import(/* webpackChunkName: \"reminder\" */ './ReminderPage'))\nexport const SettingsPage = React.lazy(() => import(/* webpackChunkName: \"settings\" */ './SettingsPage'))\nexport const NoMatch = React.lazy(() => import(/* webpackChunkName: \"noMatch\" */ './NoMatch'))\n\nconst App: React.FC = () => {\n  const location = useLocation()\n\n  if (location.pathname === '/' && location.hash !== '') {\n    const pathname = /^#(.*)$/.exec(location.hash)?.[1]\n\n    // TODO: Shape-check\n\n    return <Redirect to={ { pathname } } />\n  }\n\n  return (\n    <Switch>\n      <Route exact strict sensitive path=\"/\" component={ HomePage } />\n      <Route exact strict sensitive path=\"/chess\" component={ ChessPage } />\n      <Route exact strict sensitive path=\"/clock\" component={ ClockPage } />\n      <Route exact strict sensitive path=\"/counter\" component={ CounterPage } />\n      <Route exact strict sensitive path=\"/form-controls\" component={ FormControlsPage } />\n      <Route exact strict sensitive path=\"/info\" component={ InfoPage } />\n      <Route exact strict sensitive path=\"/paint\" component={ PaintPage } />\n      <Route exact strict sensitive path=\"/reminder\" component={ ReminderPage } />\n      <Route exact strict sensitive path=\"/settings\" component={ SettingsPage } />\n      <Route path=\"*\" component={ NoMatch } />\n    </Switch>\n  )\n}\n\nexport default hot(App)\n","import React, { useMemo } from 'react'\nimport Helmet from 'react-helmet'\nimport { IntlConfig, IntlProvider as OriginalIntlProvider } from 'react-intl'\nimport { connect } from 'react-redux'\n\nimport IntlProviderContext from '~/lib/contexts/IntlProviderContext'\nimport { Tag } from '~/lib/languageNameSolver'\nimport { State } from '~/redux'\n\ntype DefaultIntlConfig = Pick<IntlConfig, 'formats' | 'messages' | 'timeZone' | 'textComponent' | 'defaultLocale' | 'defaultFormats' | 'onError'>\n\ntype OriginalIntlProviderProps = Alt.Omit<IntlConfig, keyof DefaultIntlConfig> & Partial<DefaultIntlConfig>\n\ninterface OwnProps extends Alt.Omit<OriginalIntlProviderProps, 'locale' | 'formats' | 'messages'> {\n  availableLocales: Tag[]\n}\n\ntype StateProps = Pick<OriginalIntlProviderProps, 'locale' | 'formats' | 'messages'>\n\ntype Props =\n  & OwnProps\n  & StateProps\n\nexport /* for testing */ const IntlProvider: React.FC<Props> = ({ availableLocales, ...props }) => {\n  const dir = useMemo(() => props.locale === 'he' ? 'rtl' : 'ltr', [props.locale]) // TODO: RtL の判定方法を修正する\n\n  // NOTE: <bdi> は Internet Explorer で動作しないが、翻訳はフォールバックされることがあるので、翻訳の書字方向をロケールから計算することはできない。\n  return (\n    <>\n      <Helmet htmlAttributes={ { dir } } />\n      <IntlProviderContext.Provider value={ { availableLocales, dir } }>\n        <OriginalIntlProvider textComponent=\"bdi\" { ...props } />\n      </IntlProviderContext.Provider>\n    </>\n  )\n}\n\nconst mapStateToProps = ({ localeSelector: { locale, formats, messages } }: State, {}: React.PropsWithChildren<OwnProps>): StateProps => ({\n  locale,\n  formats,\n  messages,\n})\n\nexport default connect(mapStateToProps)(IntlProvider)\n","import indigo from '@material-ui/core/colors/indigo'\nimport teal from '@material-ui/core/colors/teal'\nimport createMuiTheme from '@material-ui/core/styles/createMuiTheme'\n\ninterface Props {\n  direction?: Direction\n  dark: boolean\n}\n\nconst configureTheme = ({ direction, dark }: Props) => createMuiTheme({\n  direction,\n  typography: {\n    fontFamily: 'sans-serif',\n    button: {\n      textTransform: 'none',\n    },\n  },\n  props: {\n    MuiLink: {\n      variant: 'body1',\n    },\n    MuiButton: {\n      variant: 'outlined',\n    },\n    MuiFormControl: {\n      variant: 'outlined',\n    },\n    MuiTextField: {\n      variant: 'outlined',\n    },\n  },\n  palette: {\n    primary: teal,\n    secondary: indigo,\n    type: dark ? 'dark' : 'light',\n  },\n})\n\nexport default configureTheme\n","import { ThemeProvider as OriginalThemeProvider } from '@material-ui/core/styles'\nimport React, { useContext, useMemo } from 'react'\nimport { useRecoilState } from 'recoil'\n\nimport darkState from '~/atoms/darkState'\nimport configureTheme from '~/configureTheme'\nimport DefaultDarkContext from '~/contexts/DefaultDarkContext'\nimport IntlProviderContext from '~/lib/contexts/IntlProviderContext'\n\ninterface ThemeProviderProps {\n  defaultDark: boolean\n}\n\nconst ThemeProvider: React.FC<ThemeProviderProps> = ({ children, defaultDark }) => {\n  const { dir } = useContext(IntlProviderContext)\n\n  const [dark] = useRecoilState(darkState)\n\n  const theme = useMemo(() => configureTheme({ direction: dir ?? undefined, dark: dark ?? defaultDark }), [dir, dark, defaultDark])\n\n  return (\n    <OriginalThemeProvider theme={ theme }>\n      <DefaultDarkContext.Provider value={ { defaultDark } }>\n        { children }\n      </DefaultDarkContext.Provider>\n    </OriginalThemeProvider>\n  )\n}\n\nexport default ThemeProvider\n","import { Action, Middleware, Reducer } from 'redux'\n\nexport type Invariant<S> = (state: S) => boolean\n\nconst createInvariantMiddleware: <S, A extends Action>(reducer: Reducer<S, A>, invariant: Invariant<S>) => Middleware = (reducer, invariant) => (store) => (next) => (action) => {\n  const oldState = store.getState()\n  const newState = reducer(oldState, action)\n\n  if (!invariant(newState)) {\n    throw new Error('Invariant Violation') // TODO\n  }\n\n  return next(action)\n}\n\nexport default createInvariantMiddleware\n","import { routerMiddleware } from 'connected-react-router'\nimport { History } from 'history'\nimport { Action, Reducer, Store, applyMiddleware, compose, createStore } from 'redux'\nimport { createLogger } from 'redux-logger'\nimport createSagaMiddleware, { SagaMiddleware, SagaMiddlewareOptions } from 'redux-saga'\n\nimport createInvariantMiddleware, { Invariant } from '~/lib/middleware/invariantMiddleware/createInvariantMiddleware'\n\nconst logger = createLogger({\n  diff: true,\n  collapsed: true,\n})\n\nconst composeEnhancers =\n  process.env.NODE_ENV === 'development'\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?? compose // TODO: Use globalThis\n    : compose\n\nexport default function configureStore<S, A extends Action>(history: History, reducer: Reducer<S, A>, invariant: Invariant<S>, sagaMiddlewareOptions: SagaMiddlewareOptions): {\n  store: Store<S, A>\n  sagaMiddleware: SagaMiddleware\n} {\n  const sagaMiddleware = createSagaMiddleware(sagaMiddlewareOptions)\n  const invariantMiddleware = createInvariantMiddleware(reducer, invariant)\n\n  const storeEnhancers = [\n    applyMiddleware(sagaMiddleware),\n    applyMiddleware(invariantMiddleware),\n    applyMiddleware(routerMiddleware(history)),\n  ]\n\n  if (process.env.NODE_ENV === 'development') {\n    storeEnhancers.push(applyMiddleware(logger)) // tslint:disable-line:no-array-mutation\n  }\n\n  const store = createStore(\n    reducer,\n    composeEnhancers(...storeEnhancers)\n  )\n\n  return {\n    store,\n    sagaMiddleware, // applied\n  }\n}\n","import { History } from 'history'\nimport React from 'react'\nimport { Provider as OriginalProvider } from 'react-redux'\nimport { Action, Reducer, Store } from 'redux'\nimport { Saga } from 'redux-saga'\n\nimport configureStore from './configureStore'\nimport UnreachableError from './lib/errors/UnreachableError'\nimport { Invariant } from './lib/middleware/invariantMiddleware/createInvariantMiddleware'\n\ntype ErrorCause = 'component' | 'reducer' | 'saga' | 'rootSaga'\n\nexport interface Props<S, A extends Action> {\n  /**\n   * @param children that throws `error`\n   * @param store when `error` is thrown\n   */\n  renderError(error: unknown, children: React.ReactNode, store: Store<S, A>, cause: ErrorCause): React.ReactNode\n}\n\ninterface State {\n  hasError: boolean\n  error?: unknown\n  cause?: ErrorCause\n}\n\nconst MAXIMUM_RECURSION_DEPTH = 100\n\nexport default function createProvider<S, A extends Action>(history: History, reducer: Reducer<S, A>, invariant: Invariant<S>, saga: Saga) {\n  let recursionDepth = 0 // tslint:disable-line:no-let\n\n  return class Provider extends React.Component<Props<S, A>, State> {\n    private store: Store<S, A>\n\n    // NOTE: https://github.com/DefinitelyTyped/DefinitelyTyped/blob/826ce0f1ce1d1887d199986283630d6f63075ad5/types/react/index.d.ts#L419 にも関わらず、初期化されていない state は null であるため、初期化を強制するためにプロパティ宣言を行う。\n    public state: Readonly<State> = {\n      hasError: false,\n    }\n\n    constructor(props: Props<S, A>) {\n      super(props)\n\n      const exceptionNeutralReducer: Reducer<S, A> = (state, action) => {\n        try {\n          return reducer(state, action)\n        } catch (error: unknown) {\n          this.handleError(error, 'reducer')\n\n          if (state === undefined) {\n            throw new UnreachableError()\n          }\n\n          return state\n        }\n      }\n\n      const { store, sagaMiddleware } = configureStore(history, exceptionNeutralReducer, invariant, {\n        onError: (error) => this.handleError(error, 'saga'),\n      })\n\n      this.store = store\n\n      sagaMiddleware.run(saga).toPromise().catch((error) => this.handleError(error, 'rootSaga'))\n    }\n\n    public static getDerivedStateFromError = (error: unknown) => ({\n      hasError: true,\n      error,\n      cause: 'component',\n    })\n\n    private handleError = (error: unknown, cause: ErrorCause) => {\n      this.setState({\n        hasError: true,\n        error,\n        cause,\n      })\n    }\n\n    public render() {\n      const { renderError, children } = this.props\n      const { hasError, error, cause } = this.state\n\n      if (hasError) {\n        ++recursionDepth\n\n        if (recursionDepth > MAXIMUM_RECURSION_DEPTH) {\n          throw new Error('Maximum recursion depth exceeded')\n        }\n\n        if (cause === undefined) {\n          throw new Error // TODO\n        }\n\n        return renderError(error, children, this.store, cause)\n      }\n\n      return (\n        <OriginalProvider store={ this.store }>\n          { children }\n        </OriginalProvider>\n      )\n    }\n  }\n}\n","import Slide, { SlideProps } from '@material-ui/core/Slide'\nimport { SnackbarProvider as OriginalSnackbarProvider, SnackbarProviderProps } from 'notistack'\nimport React, { useContext, useMemo } from 'react'\n\nimport { shouldBePresent } from '~/lib/asserters/commonAsserters'\nimport IntlProviderContext from '~/lib/contexts/IntlProviderContext'\n\ntype TransitionProps = Alt.Omit<SlideProps, 'direction'>\n\ntype Props =\n  & Alt.Omit<SnackbarProviderProps, 'TransitionComponent'>\n\nconst RightSlide: React.FC<TransitionProps> = (props) => <Slide { ...props } direction=\"right\" />\nconst LeftSlide: React.FC<TransitionProps> = (props) => <Slide { ...props } direction=\"left\" />\n\nconst SnackbarProvider: React.FC<Props> = (props) => {\n  const { dir } = useContext(IntlProviderContext)\n\n  const transition = useMemo(() => {\n    shouldBePresent(dir)\n\n    switch (dir) {\n      case 'ltr': return RightSlide\n      case 'rtl': return LeftSlide\n    }\n  }, [dir])\n\n  return (\n    // NOTE: notistack は `dir=\"rtl\"` を見付けると `anchorOrigin.horizontal` を反転させると思われる。また、 `Slide` の向きは `anchorOrigin` によって選択される。このため、 `anchorOrigin.horizontal` を `dir` から計算すると、水平位置は左に固定される。 `anchorOrigin.horizontal: 'left'` とすれば、水平位置は正しくなるが、 `Slide` は右向きになる。\n   <OriginalSnackbarProvider\n      TransitionComponent={ transition }\n      { ...props }\n    />\n  )\n}\n\nexport default SnackbarProvider\n","import hashCode from './hashCode'\n\nexport {}\n\ndeclare global {\n  interface Boolean {\n    hashCode(): number\n  }\n}\n\nObject.defineProperty(Boolean.prototype, 'hashCode', {\n  value(this: boolean) {\n    return hashCode(this)\n  },\n})\n","export default function hashCode(b: boolean) {\n  return b ? 1231 : 1237\n}\n","import JSBI from 'jsbi'\n\nexport default function hashCode(x: number) {\n  const v = doubleToLongBits(x)\n\n  return Number(JSBI.bitwiseAnd(v, JSBI.BigInt(0xFFFFFFFF))) ^ Number(JSBI.signedRightShift(v, JSBI.BigInt(32)))\n}\n\n// TODO: Remove\nfunction doubleToLongBits(value: number): JSBI {\n  const ab = new ArrayBuffer(8)\n  const doubleContainer = new Float64Array(ab, 0, 1)\n  const uintContainer = new Uint32Array(ab, 0, 2) // NOTE: IE does not support BigUint64Array\n\n  doubleContainer[0] = value // tslint:disable-line:no-object-mutation\n\n  return JSBI.add((JSBI.leftShift(JSBI.BigInt(uintContainer[1]), JSBI.BigInt(32))), JSBI.BigInt(uintContainer[0]))\n}\n","import hashCode from './hashCode'\n\nexport {}\n\ndeclare global {\n  interface Number {\n    hashCode(): number\n  }\n}\n\nObject.defineProperty(Number.prototype, 'hashCode', {\n  value(this: number) {\n    return hashCode(this)\n  },\n})\n","import hashCode from './hashCode'\n\nexport {}\n\ndeclare global {\n  interface String {\n    hashCode(): number\n  }\n}\n\nObject.defineProperty(String.prototype, 'hashCode', {\n  value(this: string) {\n    return hashCode(this)\n  },\n})\n","export default function hashCode(s: string) {\n  // tslint:disable-next-line:no-let\n  let result = 0\n\n  // tslint:disable-next-line:no-loop-statement no-let\n  for (let i = 0; i < s.length; ++i) {\n    result = 31 * result + s.charCodeAt(i)\n  }\n\n  return result\n}\n","/* tslint:disable:no-import-side-effect */\n\nimport 'element-qsa-scope'\nimport 'react-app-polyfill/ie11'\nimport 'react-app-polyfill/stable'\n\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport { StylesProvider, jssPreset } from '@material-ui/core/styles'\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\nimport { ConnectedRouter } from 'connected-react-router'\nimport { History, createBrowserHistory } from 'history'\nimport { List, Map } from 'immutable'\nimport { interfaces } from 'inversify'\nimport { Provider as ServiceProvider } from 'inversify-react'\nimport { create } from 'jss'\nimport rtl from 'jss-rtl'\nimport React, { useCallback, useMemo } from 'react'\nimport { DndProvider } from 'react-dnd'\nimport { HTML5Backend } from 'react-dnd-html5-backend'\nimport ReactDOM from 'react-dom'\nimport Helmet from 'react-helmet'\nimport { RecoilRoot } from 'recoil'\nimport { Saga } from 'redux-saga'\nimport 'reflect-metadata'\n\nimport './classes.css'\nimport App from './components/App'\nimport IntlProvider from './components/IntlProvider'\nimport ThemeProvider from './components/ThemeProvider'\nimport createProvider, { Props as ProviderProps } from './createProvider'\nimport SnackbarProvider from './lib/components/SnackbarProvider'\nimport './lib/extensions/Boolean/Boolean.prototype.hashCode'\nimport './lib/extensions/Number/Number.prototype.hashCode'\nimport './lib/extensions/String/String.prototype.hashCode'\nimport './lib/polyfills/SpeechRecognition'\nimport typed from './lib/typed'\nimport { asFormats } from './lib/validators/intlValidators'\nimport Service, { Action, State, createReducer, invariant } from './redux'\n\nimport formats from '../public/formats/en.json' // tslint:disable-line:no-relative-imports\nimport messages from '../public/messages/en.json' // tslint:disable-line:no-relative-imports\n\nconst containerImport = process.env.NODE_ENV === 'production' ? import('./container') : import('./container.dev')\n\nconst initialState: Alt.Omit<State, 'router'> = {\n  chess: {\n    board: {\n      chessmen: Map(),\n    },\n  },\n  counter: {\n    count: 0,\n  },\n  io: {\n    now: new Date,\n  },\n  localeSelector: {\n    locale: 'en',\n    formats: asFormats(formats),\n    messages,\n    errors: List(),\n  },\n  reminder: {\n    tasks: List(),\n    errors: Map(),\n  },\n  userAuthn: {},\n}\n\ninterface Props {\n  history: History\n  container: interfaces.Container\n}\n\nconst jss = create({ plugins: [...jssPreset().plugins, rtl()] })\n\n/**\n * The entry point component.\n */\nconst Main: React.FC<Props> = ({ history, container }) => {\n  const reducer = useMemo(() => createReducer(history, initialState), [history])\n\n  const rootSaga = useCallback<Saga>(() => {\n    const service = container.resolve(Service) // TODO: DI\n\n    return service.rootSaga.call(service)\n  }, [container])\n\n  const Provider = useMemo(() => createProvider(history, reducer, invariant, rootSaga), [history, reducer, rootSaga])\n\n  const renderError: ProviderProps<State, Action>['renderError'] = useCallback((error: unknown) => {\n    if (error instanceof Error) {\n      // NOTE: `rootSaga` や `rootSaga` に attach された saga から error が投げられた場合、 Maximum recursion depth exceeded が発生する。\n      return React.createElement(Provider, {\n        renderError,\n      }, (\n        <div>\n          { typed<[string]>`${ String(error) }` }\n        </div>\n      ))\n    }\n\n    throw new TypeError(typed<[string]>`${ String(error) } is not an error.`)\n  }, [Provider])\n\n  const dark = useMediaQuery('(prefers-color-scheme: dark)')\n\n  return (\n    <>\n      <Helmet\n        titleTemplate=\"%s - react-app-prototype\"\n        defaultTitle=\"react-app-prototype\"\n      />\n      <RecoilRoot>\n        <Provider renderError={ renderError }>\n          <IntlProvider availableLocales={ ['en', 'ja', 'he'] }>\n            <DndProvider backend={ HTML5Backend }>\n              <ConnectedRouter history={ history }>\n                <ServiceProvider container={ container }>\n                  <StylesProvider jss={ jss }>\n                    <ThemeProvider defaultDark={ dark }>\n                      <CssBaseline />\n                      <SnackbarProvider maxSnack={ 1 } hideIconVariant>\n                        <App />\n                      </SnackbarProvider>\n                    </ThemeProvider>\n                  </StylesProvider>\n                </ServiceProvider>\n              </ConnectedRouter>\n            </DndProvider>\n          </IntlProvider>\n        </Provider>\n      </RecoilRoot>\n    </>\n  )\n}\n\ncontainerImport.then(({ default: container }) => {\n  // TODO: DI BASE_NAME\n\n  if (process.env.BASE_NAME === undefined) {\n    throw new Error // TODO\n  }\n\n  const history = createBrowserHistory({\n    basename: process.env.BASE_NAME,\n  })\n\n  ReactDOM.render(<Main history={ history } container={ container } />, document.getElementById('root'))\n})\n","export function shouldBePresent<T>(it: T | null | undefined): asserts it is T {\n  if (it == null) {\n    throw new Error //\n  }\n}\n\nexport function shouldBeNullable<T>(it: T | null | undefined): asserts it is null | undefined {\n  if (it != null) {\n    throw new Error //\n  }\n}\n","import { Action } from 'redux'\nimport { ActionPattern, ForkEffect, takeEvery as originalTakeEvery } from 'redux-saga/effects'\n\n/**\n * Same as `takeEvery(pattern, worker)` but supports passing a `this` context to `worker`.\n * This is useful to invoke object methods.\n *\n * derived from https://github.com/redux-saga/redux-saga/blob/0668e9149c8aa847cbfad9f03883b6b5b2946042/packages/core/effects.d.ts#L630-L633\n */\nexport default function takeEvery<\n  A extends Action,\n  Ctx,\n>(\n  pattern: ActionPattern<A>,\n  [ctx, worker]: [Ctx, (this: Ctx, action: A) => unknown]\n): ForkEffect<never> {\n  return originalTakeEvery(pattern, (action: A) => worker.call(ctx, action))\n}\n","import { createContext } from 'react'\n\nimport { Tag } from '~/lib/languageNameSolver'\n\ninterface IntlProviderContext {\n  availableLocales: Tag[] | undefined | null\n  dir: Direction | undefined | null\n}\n\nexport default createContext<IntlProviderContext>({\n  availableLocales: null,\n  dir: null,\n})\n","const delay = (ms: number) => new Promise((res) => { setTimeout(res, ms) })\n\nexport default delay\n","export default abstract class AbstractError extends Error {\n  constructor(public message = '') {\n    super(message)\n\n    this.name = new.target.name\n\n    Object.setPrototypeOf(this, new.target.prototype)\n  }\n}\n","import AbstractError from './AbstractError'\n\nexport default class UnreachableError extends AbstractError {}\n","// TODO: remove?\nexport default function equalsChessmen(x: Chess.Chessman, y: Chess.Chessman): boolean {\n  return x.symbol === y.symbol\n}\n","import zipIterators from '~/lib/extensions/Iterator/zipIterators'\n\nexport default function zipIterables<A, B>(xs: Iterable<A>, ys: Iterable<B>): Iterable<[A, B]> {\n  return {\n    [Symbol.iterator]() {\n      return zipIterators(xs[Symbol.iterator](), ys[Symbol.iterator]())\n    },\n  }\n}\n","export default function zipIterators<A, B>(xs: Iterator<A>, ys: Iterator<B>): Iterator<[A, B]> {\n  function* genIt() {\n    // tslint:disable-next-line:no-loop-statement\n    while (true) {\n      const x = xs.next()\n      const y = ys.next()\n\n      if (x.done || y.done) { // tslint:disable-line:strict-boolean-expressions\n        break\n      }\n\n      const values: [A, B] = [x.value, y.value]\n\n      yield values\n    }\n  }\n\n  return genIt()\n}\n","import { isUrl } from '~/lib/guards/stringGuards'\nimport typed from '~/lib/typed'\n\nconst DUMMY_ORIGIN = 'http://example.com'\n\nfunction dropDummyOrigin(x: string): string {\n  const result = new RegExp(typed<[string]>`^${ DUMMY_ORIGIN }(.*)$`).exec(x)\n\n  if (result === null) {\n    throw new Error\n  }\n\n  return result[1]\n}\n\n/**\n * URL から origin を取り除いたものを表す。\n */\nclass PathAbempty {\n  private readonly _url: URL\n\n  constructor(...[pathAbempty, ...restArgs]: ConstructorParameters<typeof URL>) {\n    this._url = new URL(typed<[string, string]>`${ DUMMY_ORIGIN }${ pathAbempty }`, ...restArgs)\n  }\n\n  get hash(): string {\n    return this._url.hash\n  }\n\n  get href(): string {\n    return dropDummyOrigin(this._url.href)\n  }\n\n  get origin(): string {\n    return dropDummyOrigin(this._url.origin)\n  }\n\n  get pathname(): string {\n    return this._url.pathname\n  }\n\n  set pathname(value: string) {\n    // tslint:disable-next-line:no-object-mutation\n    this._url.pathname = value\n  }\n\n  get search(): string {\n    return this._url.search\n  }\n\n  set search(value: string) {\n    // tslint:disable-next-line:no-object-mutation\n    this._url.search = value\n  }\n\n  get searchParams(): URLSearchParams {\n    return this._url.searchParams\n  }\n\n  public toJSON() {\n    return dropDummyOrigin(this._url.toJSON())\n  }\n}\n\nexport default function createUrlOrPathAbempty(...args: ConstructorParameters<typeof URL>): URL | PathAbempty {\n  const [urlOrPathAbempty] = args\n\n  if (isUrl(urlOrPathAbempty)) {\n    return new URL(...args)\n  } else {\n    return new PathAbempty(...args)\n  }\n}\n","export default function fromEntries<K extends Index, V>(entries: Iterable<[K, V]>): Record<K, V> {\n  const result: Partial<Record<K, V>> = {}\n\n  // tslint:disable-next-line:no-loop-statement\n  for (const [key, value] of entries) {\n\n    // tslint:disable-next-line:no-object-mutation\n    result[key] = value\n  }\n\n  return result as Record<K, V>\n}\n","/**\n * src/lib/fetch.ts\n */\n\nimport * as pathToRegexp from 'path-to-regexp'\n\nimport createUrlOrPathAbempty from './createUrlOrPathAbempty'\nimport mapValues from './extensions/Record/mapValues'\nimport fromEntries from './polyfills/Object.fromEntries'\nimport typed from './typed'\n\ntype Method = 'GET' | 'POST'\n\ninterface RequestParams {\n  method: Method\n  parameterizedEndpoint: string\n  params?: Record<string, string>\n  headers?: Record<string, string>\n  query?: Query\n}\n\ntype Query = Record<string, QueryValue>\n\ntype QueryValue =\n  | string\n  | QueryValueArray\n  | QueryValueObject\n\ntype QueryValueArray = QueryValue[]\ntype QueryValueObject = { [member in string]: QueryValue }\n\ntype VQuery = Record<string, QueryValue>\n\ntype QueryMap = Record<string, string>\n\ninterface ResponseParams {\n  response: Response\n  body: Json\n}\n\nfunction isEmpty<T extends {}>(object: T): object is EmptyRecord<T> {\n  return Object.keys(object).length === 0\n}\n\n// NOTE: メンバー代入を使わない場合、メンバーアクセスは部分関数なので、オブジェクトのキーの型を縮小することができる。ただし、 TypeScript のメンバーアクセス演算は部分関数ではない (cf. https://github.com/microsoft/TypeScript/issues/13778)\nfunction asStringVObject<V>(input: Record<never, V>): Record<string, V> {\n  return input\n}\n\nfunction toJson(input: unknown): Json {\n  if (typeof input === 'boolean' || typeof input === 'number' || typeof input === 'string') {\n    return input\n  }\n\n  if (Array.isArray(input)) {\n    return input.map((json) => toJson(json))\n  }\n\n  if (typeof input === 'object') {\n    if (input === null) {\n      return input\n    }\n\n    const typeSafeInput: Record<never, unknown> = input // NOTE: object 型の仕様に問題がある。\n\n    return mapValues(asStringVObject(typeSafeInput), toJson)\n  }\n\n  throw new Error(typed<[string]>`${ String(input) } is not a Json.`)\n}\n\n/**\n * Query を QueryMap に変換する。\n */\nexport /* for testing */ function toQueryMap(query: Query): QueryMap {\n\n  /**\n   * QueryValueArray を展開し、より簡単な Query を返す。\n   *\n   * @implNote `goWithArray(key: string, value: Record<string, QueryValue>, result: VQuery): VQuery` とすれば、 `index` を排除し、 `goWithObject` と実装を統合することができるが、配列のキーにはインデックスを含めたくない場合がある。\n   */\n  function goWithArray(key: string, value: QueryValueArray, index: number, result: VQuery): VQuery {\n    if (value.length === 0) {\n      return result\n    }\n\n    const [head, ...tail] = value\n\n    return goWithArray(key, tail, index + 1, {\n      ...result,\n      [typed<[string, number]>`${ key }[${ index }]`]: head,\n    })\n  }\n\n  /**\n   * QueryValueObject を展開し、より簡単な Query を返す。\n   */\n  function goWithObject(key: string, value: QueryValueObject, result: VQuery): VQuery {\n    if (isEmpty(value)) {\n      return result\n    }\n\n    const [[member, head], ...tailEntries] = Object.entries(value)\n\n    return goWithObject(key, fromEntries(tailEntries), {\n      ...result,\n      [typed<[string, string]>`${ key }[${ member }]`]: head,\n    })\n  }\n\n  function go(q: Query, result: QueryMap): QueryMap {\n    if (isEmpty(q)) {\n      return result\n    }\n\n    const [[key, value], ...tail] = Object.entries(q)\n\n    if (typeof value === 'string') {\n      return go(fromEntries(tail), {\n        ...result,\n        [key]: value,\n      })\n    }\n\n    if (Array.isArray(value)) {\n      return go(goWithArray(key, value, 0, fromEntries(tail)), result)\n    }\n\n    return go(goWithObject(key, value, fromEntries(tail)), result)\n  }\n\n  return go(query, {})\n}\n\nfunction buildRequestInfo({ method, parameterizedEndpoint, params = {}, query = {} }: RequestParams): RequestInfo {\n  const url = createUrlOrPathAbempty(parameterizedEndpoint)\n\n  // tslint:disable-next-line:no-object-mutation\n  url.pathname = isEmpty(params) ? url.pathname : pathToRegexp.compile(url.pathname)(params)\n\n  if (method === 'GET') {\n    const urlSearchParams = new URLSearchParams(url.search)\n\n    Object.entries(toQueryMap(query)).forEach(([key, value]) => {\n      urlSearchParams.append(key, value)\n    })\n\n    // tslint:disable-next-line:no-object-mutation\n    url.search = urlSearchParams.toString()\n  }\n\n  return url.href\n}\n\nfunction buildRequestInit({ method, headers = {}, query = {} }: RequestParams): RequestInit {\n  switch (method) {\n    case 'GET':\n      return {\n        method,\n        headers,\n      }\n    case 'POST':\n      const formData = new FormData\n\n      Object.entries(toQueryMap(query)).forEach(([key, value]) => {\n        formData.append(key, value)\n      })\n\n      return {\n        method,\n        body: formData,\n        headers,\n      }\n  }\n}\n\nexport default async function fetch(request: RequestParams): Promise<ResponseParams> {\n  const requestInfo = buildRequestInfo(request)\n  const requestInit = buildRequestInit(request)\n  const response = await window.fetch(requestInfo, requestInit) // TODO: Use globalThis\n\n  const body = toJson(await response.json())\n\n  return { response, body }\n}\n","export default function mapValues<K extends Index, T, U>(object: Record<K, T>, f: (x: T) => U): Record<K, U> {\n  const result: Partial<Record<K, U>> = {}\n\n  // tslint:disable-next-line:no-loop-statement\n  for (const [i, x] of Object.entries(object)) {\n    // tslint:disable-next-line:no-object-mutation\n    result[i] = f(x)\n  }\n\n  return result as Record<K, U>\n}\n","export function isUrl(input: string): input is string.Url {\n  try {\n    // tslint:disable-next-line:no-unused-expression\n    new URL(input)\n\n    return true\n  } catch (error: unknown) {\n    return false\n  }\n}\n","type GlobalThisWithSpeechRecognition = typeof globalThis & {\n  webkitSpeechRecognition: typeof SpeechRecognition\n}\n\nif ('webkitSpeechRecognition' in window) {\n  // tslint:disable-next-line:no-object-mutation\n  globalThis.SpeechRecognition = (globalThis as GlobalThisWithSpeechRecognition).webkitSpeechRecognition\n}\n","import Eq from './Eq'\n\n/**\n * [[Eq]] であり、さらにハッシュ関数 [[hashCode]] を持つ。\n */\nexport default abstract class HashableEq extends Eq implements Class.Hashable {\n  protected canEqual(that: Eq): that is HashableEq {\n    return that instanceof HashableEq\n  }\n\n  /**\n   * `this` と `that` が同値かどうかを返す。\n   *\n   * @implNote このメソッドをオーバーライドする場合、 `this.hashCode() === that.hashCode()` でなければ FALSE を返すように実装しなければならない。\n   */\n  public equals(that: Eq): boolean {\n    return this.canEqual(that) && that.canEqual(this) && this.hashCode() === that.hashCode()\n  }\n\n  public abstract hashCode(): number // int\n}\n","// TODO: PartialEq, Congruence 等検討\n\n/**\n * 同値風関係 [[equals]] と、異なる [[Eq]] のサブクラス間の同値風関係を表現するための補助メソッド [[canEqual]] を持つ。\n *\n * @implNote [[equals]] をオーバーライドする場合、 [[canEqual]] もオーバーライドしなければならない。\n */\nexport default abstract class Eq implements Class.Eq {\n  /**\n   * `this` と `that` が同値でありうるかどうかを返す。\n   *\n   * @implNote このメソッドをサブクラスでオーバーライドする場合、 `that` がそのクラスのインスタンスであるかどうかを返すように実装しなければならない。\n   */\n  protected abstract canEqual(that: Eq): boolean\n\n  /**\n   * `this` と `that` が同値かどうかを返す。\n   *\n   * @implNote このメソッドをオーバーライドする場合、 `this.canEqual(that) && that.canEqual(this)` でなければ FALSE を返すように実装しなければならない。\n   */\n  public abstract equals(that: Eq): boolean\n\n  /**\n   * @final\n   */\n  public isNotEqualTo(that: Eq): boolean {\n    return !this.equals(that)\n  }\n}\n","import zipIterables from './extensions/Iterable/zipIterables'\n\n/**\n * Type substitutions of a template literal.  It is often used as a tag function.\n *\n * @returns a string of alternate elements of template and substitutions.\n */\nexport default function typed<T extends unknown[]>(template: TemplateStringsArray, ...substitutions: T): string {\n  // tslint:disable-next-line:no-let\n  let result = template[0]\n\n  // tslint:disable-next-line:no-loop-statement\n  for (const [substitution, segment] of zipIterables(substitutions, template.slice(1))) {\n    result += String(substitution)\n    result += segment\n  }\n\n  return result\n}\n","import { PrimitiveType } from 'intl-messageformat'\n\nimport AbstractError from '~/lib/errors/AbstractError'\n\n// TODO: remove\n// TODO: revise\n/**\n * @param key of results of defineMessages from react-intl\n * @param values for react-intl\n */\nexport default class ValidationError extends AbstractError {\n  /**\n   * @param message as an error message\n   */\n  constructor(message?: string)\n  constructor(message: string, key: string, values: Record<string, PrimitiveType>)\n  constructor(message?: string, public key?: string, public values?: Record<string, PrimitiveType>) {\n    super(message)\n  }\n}\n","import UnreachableError from '~/lib/errors/UnreachableError'\nimport typed from '~/lib/typed'\n\n/**\n * @throws [[TypeError]] if the size of `xs` is less than two.\n *\n * @example\n * ``` ts\n * conj(', ', ' or ', ['A', 'B', 'C']) // 'A, B or C'\n * ```\n */\nexport default function conj(xs: string[], separator: string, lastSeparator: string): string {\n  if (xs.length < 2) {\n    throw new TypeError(typed<[string]>`The size of ${ xs.toString() } is less than two.`)\n  }\n\n  const lastX = xs.pop() // tslint:disable-line:no-array-mutation\n\n  if (lastX === undefined) {\n    throw new UnreachableError\n  }\n\n  return typed<[string, string, string]>`${ xs.join(separator) }${ lastSeparator }${ lastX }`\n}\n","import typed from '~/lib/typed'\n\nconst eols = [\n  '\\n',\n  '\\r\\n',\n]\n\nconst eolPattern = new RegExp(typed<[string]>`(?:${ eols.join('|') })`)\nconst eolCharPattern = new RegExp(typed<[string]>`(?:${ eols.map((eol) => typed<[string]>`[${ eol }]`).join('|') })`)\n\nexport default function stripMargin(...args: Parameters<typeof stripMargin1>): ReturnType<typeof stripMargin1>\nexport default function stripMargin(...args: Parameters<typeof stripMargin2>): ReturnType<typeof stripMargin2>\n\nexport default function stripMargin(that: string, marginChar?: string): string {\n  if (marginChar === undefined) {\n    return stripMargin1(that)\n  }\n\n  return stripMargin2(that, marginChar)\n}\n\nfunction stripMargin1(that: string) {\n  return stripMargin2(that, '|')\n}\n\nfunction stripMargin2(that: string, marginChar: string) {\n  let result = '' // tslint:disable-line:no-let\n\n  // tslint:disable-next-line:no-loop-statement\n  for (const line of generateLineWithEolIterator(that)) {\n    const matches = new RegExp(typed<[string, string]>`^(?:[\\\\t ]*(?<marginChar>.))?(?<stripped>(?:.|${ eolCharPattern.source })*${ eolPattern.source }?)$`, 'u').exec(line)\n\n    const groups = matches?.groups // TODO\n\n    if (groups === undefined) {\n      throw new Error // TODO\n    }\n\n    const { marginChar: marginCharCandidate, stripped } = groups\n\n    if (marginCharCandidate === marginChar) {\n      result += stripped\n    } else {\n      result += line\n    }\n  }\n\n  return result\n}\n\nfunction* generateLineWithEolIterator(cs: string) {\n  let lineBuffer = '' // tslint:disable-line:no-let\n  let eolBuffer = '' // tslint:disable-line:no-let\n\n  // tslint:disable-next-line:no-loop-statement\n  for (const c of cs) {\n    lineBuffer += c\n\n    if (eols.some((eol) => eol.startsWith(eolBuffer + c))) {\n      eolBuffer += c\n    }\n\n    if (eols.includes(eolBuffer)) {\n      yield lineBuffer\n      lineBuffer = ''\n      eolBuffer = ''\n    }\n  }\n\n  if (lineBuffer !== '') {\n    yield lineBuffer\n  }\n}\n","import typed from '~/lib/typed'\n\nexport default function trimEols(s: string) {\n  return trimTrailingEols(trimLeadingEols(s))\n}\n\nconst eolPattern = /(?:\\r?\\n)/\n\nfunction trimLeadingEols(s: string) {\n  return s.replace(new RegExp(typed<[string]>`^${ eolPattern.source }*`), '')\n}\n\nfunction trimTrailingEols(s: string) {\n  return s.replace(new RegExp(typed<[string]>`${ eolPattern.source }*$`), '')\n}\n","import { Either, isLeft, isRight, left, right } from 'fp-ts/lib/Either'\n\nimport UnreachableError from '~/lib/errors/UnreachableError'\nimport conj from '~/lib/extensions/Array/conj'\nimport equalsJsons from '~/lib/extensions/Eq/equalsJsons'\nimport stripMargin from '~/lib/extensions/String/stripMargin'\nimport trimEols from '~/lib/extensions/String/trimEols'\nimport typed from '~/lib/typed'\nimport ValidationError from './ValidationError'\n\n/**\n * @callback Validator\n * @throws [[ValidationError]] if the validation fails.\n */\n\n/**\n * @param asT [[Validator]]\n * @nothrow\n */\nexport const failSafe = <A extends unknown, T extends A>(asT: (input: A) => T) => (input: A): Either<ValidationError, T> => {\n  try {\n    return right(asT(input))\n  } catch (error: unknown) {\n    if (error instanceof ValidationError) {\n      return left(error)\n    }\n\n    throw new UnreachableError\n  }\n}\n\nexport const leftOnly = <A extends unknown, T extends A>(asT: (input: A) => T) => (input: A): ValidationError | undefined => {\n  const t = failSafe(asT)(input)\n\n  if (isLeft(t)) {\n    return t.left\n  } else {\n    return undefined\n  }\n}\n\n// TODO: Refactor\nexport const named = <A extends unknown, T extends A>(name: string, asT: (input: A) => T) => (input: A): T => {\n  const t = failSafe(asT)(input)\n\n  if (isLeft(t)) {\n    if (t.left.values === undefined) {\n      throw t.left\n    }\n\n    if (t.left.key === undefined) {\n      throw new UnreachableError\n    }\n\n    throw new ValidationError(t.left.message, t.left.key, { name, ...t.left.values })\n  }\n\n  return t.right // TODO\n}\n\nexport const optional = <A extends unknown, T extends A>(asT: (input: A) => T) => (input: A | undefined): T | undefined => {\n  if (input === undefined) {\n    return\n  }\n\n  return asT(input)\n}\n\nexport const required = <A extends unknown, T extends A>(asT: (input: A | undefined) => T | undefined) => (input: A | undefined): T => {\n  const inputAsT = asT(input)\n\n  if (inputAsT === undefined) {\n    throw new ValidationError(typed<[string]>`${ JSON.stringify(inputAsT) } must exist.`)\n  }\n\n  return inputAsT\n}\n\nexport const asRequired = <A extends unknown>(input: A | undefined): A => {\n  if (input === undefined) {\n    throw new ValidationError(typed<[string]>`${ JSON.stringify(input) } must exist.`)\n  }\n\n  return input\n}\n\nexport const unionOf = <A extends unknown, T extends A, U extends A>(asT: (input: A) => T, asU: (input: A) => U) => (input: A): T | U => {\n  const t = failSafe(asT)(input)\n  const u = failSafe(asU)(input)\n\n  if (isLeft(t) && isLeft(u)) {\n    throw new ValidationError(typed<[string, string]>`${ t.left.message } AND ${ u.left.message }`)\n  }\n\n  if (isRight(t)) {\n    return t.right\n  }\n\n  if (isRight(u)) {\n    return u.right\n  }\n\n  throw new UnreachableError\n}\n\nexport const listOf = <A extends unknown, T extends A>(asT: (input: A) => T) => (input: readonly A[]): T[] => {\n  if (!Array.isArray(input)) {\n    throw new ValidationError(typed<[string]>`${ JSON.stringify(input) } is not an array.`)\n  }\n\n  return input.map(asT)\n}\n\nexport const recordOf = <A extends unknown, T extends A>(asT: (input: A) => T) => asObject<Record<string, T>>('a Record', (input) => Object.entries<string, A>(input).map<[string, T]>(([key, value]) => [key, asT(value)]).reduce<Record<string, T>>((output, [key, value]) => ({ ...output, [key]: value }), {}))\n\nexport function asUnionOf<T extends readonly Json[]>(...options: T): (input: unknown) => T[number]\nexport function asUnionOf<T extends readonly unknown[]>(...options: T): (input: unknown) => T[number]\nexport function asUnionOf<T extends readonly unknown[]>(...options: T) {\n  return (input: unknown): T[number] => {\n    if (!options.includes(input)) {\n      throw new ValidationError(typed<[string, string]>`${ JSON.stringify(input) } is neither ${ conj(options.map(String), ', ', ' nor ') }`)\n    }\n\n    return input\n  }\n}\n\n/**\n * Ascribe the given JSON object to a specific type.\n *\n * @callback ObjectTyper\n * @throws [[Error]] if `input` is invalid as `T`.\n */\n\n/**\n * @param className name of {T} with indefinite article\n * @param asT [[ObjectTyper]]\n */\nexport const asObject = <T>(className: string, asT: (input: any) => T) => (input: unknown): T => { // tslint:disable-line:no-any\n  if (input == null) {\n    throw new ValidationError(typed<[string]>`${ JSON.stringify(input) } is not an object.`)\n  }\n\n  try {\n    return asT(input)\n  } catch (error: unknown) {\n    if (error instanceof ValidationError) {\n      throw new ValidationError(trimEols(stripMargin(typed<[string, string, string]>`\n        |${ JSON.stringify(input) } is not ${ className }.\n        |${ error.message }\n        |`)))\n    }\n\n    if (error instanceof Error) {\n      console.error(error) // tslint:disable-line:no-console\n\n      throw new ValidationError(typed<[string, string]>`${ JSON.stringify(input) } is not ${ className }.`)\n    }\n\n    throw new TypeError(typed<[string]>`${ String(error) } is not an error.`)\n  }\n}\n\nexport const asInstanceOf = <T>(Class: new (...args: any[]) => T) => (input: unknown): T => { // tslint:disable-line:no-any\n  if (input instanceof Class) {\n    return input\n  } else {\n    throw new ValidationError(typed<[string, string]>`${ JSON.stringify(input) } is not a/an ${ Class.name }.`)\n  }\n}\n\n// TODO: undefined, symbol, bigint, bigdecimal 等に拡張する\nexport function asConstant<T extends null>(a: T): (input: unknown) => T\nexport function asConstant<T extends boolean>(a: T): (input: unknown) => T\nexport function asConstant<T extends number>(a: T): (input: unknown) => T\nexport function asConstant<T extends string>(a: T): (input: unknown) => T\nexport function asConstant<T extends JsonArray>(a: T): (input: unknown) => T\nexport function asConstant<T extends JsonObject>(a: T): (input: unknown) => T\nexport function asConstant<T extends Json>(a: T): (input: unknown) => T {\n  return (input) => {\n    const inputAsJson = asJson(input)\n\n    if (!equalsJsons(inputAsJson, a)) {\n      throw new ValidationError(typed<[string, string]>`${ JSON.stringify(inputAsJson) } is not ${ JSON.stringify(a) }.`)\n    }\n\n    return inputAsJson as T // NOTE: !equalsJsons(a, b) → a is not a typeof b ではないので、 equalsJsons で inputAsJson の型を狭めることはできない。\n  }\n}\n\nexport function asBoolean(input: unknown): boolean {\n  if (typeof input !== 'boolean') {\n    throw new ValidationError(typed<[string]>`${ JSON.stringify(input) } is not a boolean.`)\n  }\n\n  return input\n}\n\nexport function asNumber(input: unknown): number {\n  if (typeof input !== 'number') {\n    throw new ValidationError(typed<[string]>`${ JSON.stringify(input) } is not a number.`)\n  }\n\n  return input\n}\n\nexport function asString(input: unknown): string {\n  if (typeof input !== 'string') {\n    throw new ValidationError(typed<[string]>`${ JSON.stringify(input) } is not a string.`)\n  }\n\n  return input\n}\n\nexport function asJson(input: unknown): Json {\n  if (input === null || typeof input === 'boolean' || typeof input === 'number' || typeof input === 'string') {\n    return input\n  }\n\n  if (Array.isArray(input)) {\n    return listOf(asJson)(input)\n  }\n\n  try {\n    return recordOf(asJson)(input)\n  } catch (error: unknown) {\n    if (error instanceof ValidationError) {\n      throw new ValidationError(trimEols(stripMargin(typed<[string, string]>`\n        |${ JSON.stringify(input) } is not a Json.\n        |${ error.message }\n        |`)))\n    }\n\n    if (error instanceof Error) {\n      console.error(error) // tslint:disable-line:no-console\n\n      throw new ValidationError(typed<[string]>`${ JSON.stringify(input) } is not a Json.`)\n    }\n\n    throw new TypeError(typed<[string]>`${ String(error) } is not an error.`)\n  }\n}\n","import { Formats } from 'intl-messageformat'\n\nimport { asBoolean, asObject, asString, asUnionOf, optional, recordOf, unionOf } from './commonValidators'\n\nexport const asFormats = asObject<Partial<Formats>>('a Formats', (input) => ({ // TODO\n  number: optional(recordOf(asIntlNumberFormatOptions))(input.number),\n  date: optional(recordOf(asIntlDateTimeFormatOptions))(input.date),\n  time: optional(recordOf(asIntlDateTimeFormatOptions))(input.time),\n}))\n\nconst asIntlNumberFormatOptions = asObject<Intl.NumberFormatOptions>('an Intl.NumberFormatOptions', (input) => ({\n  localeMatcher: optional(asUnionOf('lookup', 'best fit'))(input.localeMatcher),\n  style: optional(asUnionOf('decimal', 'currency', 'percent'))(input.style),\n  currency: optional(asString)(input.currency), // ISO 4217 currency code\n  currencyDisplay: optional(asUnionOf('symbol', 'code', 'name'))(input.currencyDisplay),\n  useGrouping: optional(asBoolean)(input.useGrouping),\n  minimumIntegerDigits: optional(asUnionOf(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21))(input.minimumIntegerDigits),\n  minimumFractionDigits: optional(asUnionOf(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20))(input.minimumFractionDigits),\n  maximumFractionDigits: optional(asUnionOf(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20))(input.maximumFractionDigits),\n  minimumSignificantDigits: optional(asUnionOf(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21))(input.minimumSignificantDigits),\n  maximumSignificantDigits: optional(asUnionOf(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21))(input.maximumSignificantDigits),\n}))\n\nconst asIntlDateTimeFormatOptions = asObject<Intl.DateTimeFormatOptions>('an Intl.DateTimeFormatOptions', (input) => ({\n  localeMatcher: optional(asUnionOf('lookup', 'best fit'))(input.localeMatcher),\n  weekday: optional(asUnionOf('narrow', 'short', 'long'))(input.weekday),\n  era: optional(asUnionOf('narrow', 'short', 'long'))(input.era),\n  year: optional(asUnionOf('numeric', '2-digit'))(input.year),\n  month: optional(asUnionOf('numeric', '2-digit', 'narrow', 'short', 'long'))(input.month),\n  day: optional(asUnionOf('numeric', '2-digit'))(input.day),\n  hour: optional(asUnionOf('numeric', '2-digit'))(input.hour),\n  minute: optional(asUnionOf('numeric', '2-digit'))(input.minute),\n  second: optional(asUnionOf('numeric', '2-digit'))(input.second),\n  timeZoneName: optional(asUnionOf('short', 'long'))(input.timeZoneName),\n  formatMatcher: optional(asUnionOf('basic', 'best fit'))(input.formatMatcher),\n  hour12: optional(asBoolean)(input.hour12),\n  timeZone: optional(unionOf(asUnionOf('UTC'), asString))(input.localeMatcher), // tz timezone\n}))\n","import { Invariant } from './createInvariantMiddleware'\n\nconst combineInvariants: <S extends Record<K, V>, K extends keyof S = keyof S, V extends S[K] = S[K]>(invariants: {\n  [P in keyof S]?: Invariant<S[P]>\n}) => Invariant<S> = (invariants) => (state) => {\n  return Object.entries(state).every(([moduleName, moduleState]) => {\n    return invariants[moduleName]?.(moduleState) ?? true\n  })\n}\n\nexport default combineInvariants\n","import { LocationChangeAction, RouterState, connectRouter } from 'connected-react-router'\nimport { History } from 'history'\nimport { inject, injectable } from 'inversify'\nimport { Action as AnyAction, Reducer, combineReducers } from 'redux'\nimport { SagaIterator } from 'redux-saga'\nimport { fork } from 'redux-saga/effects'\n\nimport combineInvariants from '~/lib/middleware/invariantMiddleware/combineInvariants'\nimport { ChessAction, ChessService, ChessState, chessInvariant, createChessReducer } from './modules/chess'\nimport { CounterAction, CounterService, CounterState, counterInvariant, createCounterReducer } from './modules/counter'\nimport { IoAction, IoService, IoState, createIoReducer } from './modules/io'\nimport LocaleSelectorService, { LocaleSelectorAction, LocaleSelectorState, createLocaleSelectorReducer } from './modules/localeSelector'\nimport ReminderService, { ReminderAction, ReminderState, createReminderReducer } from './modules/reminder'\nimport UserAuthnService, { UserAuthnAction, UserAuthnState, createUserAuthnReducer } from './modules/userAuthn'\n\nexport interface State {\n  router: RouterState\n  chess: ChessState\n  counter: CounterState\n  io: IoState\n  localeSelector: LocaleSelectorState\n  reminder: ReminderState\n  userAuthn: UserAuthnState\n}\n\nexport type Action =\n  | LocationChangeAction\n  | ChessAction\n  | CounterAction\n  | IoAction\n  | LocaleSelectorAction\n  | ReminderAction\n  | UserAuthnAction\n\n@injectable()\nexport default class Service {\n  private chessService: ChessService\n  private counterService: CounterService\n  private ioService: IoService\n  private localeSelectorService: LocaleSelectorService\n  private reminderService: ReminderService\n  private userAuthnService: UserAuthnService\n\n  // NOTE: `@inject(Service) private service: Service` は、 `toSelf` された実装をコンストラクター引数の中で最後に `@inject` しているか、 `Service` が参照されているかのいずれでもなければ、 Service is not defined を投げる。おそらく inversify か babel-plugin-parameter-decorator がおかしい。\n  constructor(\n    @inject(ChessService) chessService: ChessService,\n    @inject(CounterService) counterService: CounterService,\n    @inject(IoService) ioService: IoService,\n    @inject(LocaleSelectorService) localeSelectorService: LocaleSelectorService,\n    @inject(ReminderService) reminderService: ReminderService,\n    @inject(UserAuthnService) userAuthnService: UserAuthnService\n  ) {\n    this.chessService = chessService\n    this.counterService = counterService\n    this.ioService = ioService\n    this.localeSelectorService = localeSelectorService\n    this.reminderService = reminderService\n    this.userAuthnService = userAuthnService\n  }\n\n  public *rootSaga(): SagaIterator {\n    yield fork([this.chessService, this.chessService.rootSaga])\n    yield fork([this.counterService, this.counterService.rootSaga])\n    yield fork([this.ioService, this.ioService.rootSaga])\n    yield fork([this.localeSelectorService, this.localeSelectorService.rootSaga])\n    yield fork([this.reminderService, this.reminderService.rootSaga])\n    yield fork([this.userAuthnService, this.userAuthnService.rootSaga])\n  }\n}\n\nexport const createReducer = (history: History, initialState: Alt.Omit<State, 'router'>) => combineReducers<State, Action>({\n  router: connectRouter(history) as Reducer<RouterState, AnyAction>, // TODO\n  chess: createChessReducer(initialState.chess),\n  counter: createCounterReducer(initialState.counter),\n  io: createIoReducer(initialState.io),\n  localeSelector: createLocaleSelectorReducer(initialState.localeSelector),\n  reminder: createReminderReducer(initialState.reminder),\n  userAuthn: createUserAuthnReducer(initialState.userAuthn),\n})\n\nexport const invariant = combineInvariants<State>({\n  chess: chessInvariant,\n  counter: counterInvariant,\n})\n","import { Map } from 'immutable'\nimport { injectable } from 'inversify'\nimport { Action, Reducer } from 'redux'\nimport { SagaIterator } from 'redux-saga'\nimport { put, select } from 'redux-saga/effects'\n\nimport Coordinates from '~/domain/vo/Coordinates'\nimport { takeEvery } from '~/lib/boni/redux-saga/effects'\nimport equalsChessmen from '~/lib/extensions/Eq/equalsChessmen'\nimport { State } from '~/redux'\nimport getCoordinatesAttackedBy from '~/utils/chess/getCoordinatesAttackedBy'\n\n//\n//             _|                  _|\n//   _|_|_|  _|_|_|_|    _|_|_|  _|_|_|_|    _|_|\n// _|_|        _|      _|    _|    _|      _|_|_|_|\n//     _|_|    _|      _|    _|    _|      _|\n// _|_|_|        _|_|    _|_|_|      _|_|    _|_|_|\n//\n//\n\nexport interface ChessState {\n  board: Chess.Chessboard\n  picking?: {\n    chessman: Chess.Chessman\n    source: Chess.Coordinates\n  } | null\n  targets?: Chess.Coordinates[] | null\n}\n\n// NOTE: 下記「 `picking` が存在し、かつ `board` 上の `picking.source` に駒が存在しない」について、 HALF_MOVE では、まず `board` 上の `picking.source` に存在する駒を取り除き、その後、取り除いた駒を `targets` に割り当てるため、一時的にこの状態になる。\n/**\n * [[ChessState]] の不変条件を表す。\n *\n * 次の条件を満たせば TRUE を返し、そうでなければ FALSE を返す。\n *\n * - `picking` が存在するならば、 `board` 上の `picking.source` に何らかの駒が存在するならば、その駒は `picking.chessman` であり、かつ\n * - `picking` が存在しないならば、 `targets` も存在しない\n *\n * 言い換えると、\n *\n * - `picking` が存在せず、かつ `targets` も存在しないか、\n * - `picking` が存在し、かつ `board` 上の `picking.source` に駒が存在しないか、または\n * - `picking` が存在し、 `board` 上の `picking.source` に何らかの駒が存在し、かつその駒は `picking.chessman` である\n */\nexport function chessInvariant({ board, picking, targets }: ChessState) {\n  return (\n    (picking == null || (!board.chessmen.has(new Coordinates(picking.source)) || existsCoordinatedChessman(picking.chessman, picking.source, board))) && // any picking → (any chessman at picking.source on board → chessman at picking.source on board = picking.chessman)\n    (picking != null || targets == null) // no picking → no targets\n  )\n}\n\n/**\n * `board` 上の `coord` にある駒が `expected` ならば TRUE を返し、そうでなければ FALSE を返す。\n */\nfunction existsCoordinatedChessman(expected: Chess.Chessman, coord: Chess.Coordinates, board: Chess.Chessboard): boolean {\n  const actual = board.chessmen.get(new Coordinates(coord))\n\n  return actual !== undefined && equalsChessmen(actual, expected)\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//   _|\n// _|_|_|_|  _|    _|  _|_|_|      _|_|      _|_|_|\n//   _|      _|    _|  _|    _|  _|_|_|_|  _|_|\n//   _|      _|    _|  _|    _|  _|            _|_|\n//     _|_|    _|_|_|  _|_|_|      _|_|_|  _|_|_|\n//                 _|  _|\n//             _|_|    _|\n\nconst RESET_BOARD = '@@react-app-base/chess/RESET_BOARD'\nconst HALF_MOVE = '@@react-app-base/chess/HALF_MOVE' // neither castle nor capture pawn en passant\nconst PICK_CHESSMAN = '@@react-app-base/chess/PICK_CHESSMAN'\nconst PUT_CHESSMAN = '@@react-app-base/chess/PUT_CHESSMAN'\nconst RELEASE_CHESSMAN = '@@react-app-base/chess/RELEASE_CHESSMAN'\nconst REMOVE_CHESSMAN = '@@react-app-base/chess/REMOVE_CHESSMAN'\nconst SET_TARGETS = '@@react-app-base/chess/SET_TARGETS'\n\nconst chessActionTypes = [\n  RESET_BOARD,\n  HALF_MOVE,\n  PICK_CHESSMAN,\n  PUT_CHESSMAN,\n  RELEASE_CHESSMAN,\n  REMOVE_CHESSMAN,\n  SET_TARGETS,\n]\n\ntype ResetBoardAction = ReturnType<typeof resetBoard> // TODO: chess 960\ntype HalfMoveAction = ReturnType<typeof halfMove>\ntype PickChessmanAction = ReturnType<typeof pickChessman>\ntype PutChessmanAction = ReturnType<typeof putChessman>\ntype ReleaseChessmanAction = ReturnType<typeof releaseChessman>\ntype RemoveChessmanAction = ReturnType<typeof removeChessman>\ntype SetTargets = ReturnType<typeof setTargets>\n\nexport type ChessAction =\n  | ResetBoardAction\n  | HalfMoveAction\n  | PickChessmanAction\n  | PutChessmanAction\n  | ReleaseChessmanAction\n  | RemoveChessmanAction\n  | SetTargets\n\nfunction isChessAction(action: Action): action is ChessAction {\n  return chessActionTypes.includes(action.type)\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//                                           _|\n//   _|_|_|  _|  _|_|    _|_|      _|_|_|  _|_|_|_|    _|_|    _|  _|_|    _|_|_|\n// _|        _|_|      _|_|_|_|  _|    _|    _|      _|    _|  _|_|      _|_|\n// _|        _|        _|        _|    _|    _|      _|    _|  _|            _|_|\n//   _|_|_|  _|          _|_|_|    _|_|_|      _|_|    _|_|    _|        _|_|_|\n//\n//\n\nexport const resetBoard = () => <const> ({\n  type: RESET_BOARD,\n})\n\nexport const halfMove = (chessman: Chess.Chessman, source: Chess.Coordinates, target: Chess.Coordinates) => <const> ({\n  type: HALF_MOVE,\n  payload: {\n    chessman,\n    source,\n    target,\n  },\n})\n\nexport const pickChessman = (chessman: Chess.Chessman, source: Chess.Coordinates) => <const> ({\n  type: PICK_CHESSMAN,\n  payload: {\n    chessman,\n    source,\n  },\n})\n\nexport const putChessman = (chessman: Chess.Chessman, target: Chess.Coordinates) => <const> ({\n  type: PUT_CHESSMAN,\n  payload: {\n    chessman,\n    target,\n  },\n})\n\nexport const releaseChessman = () => <const> ({\n  type: RELEASE_CHESSMAN,\n})\n\nexport const removeChessman = (coord: Chess.Coordinates) => <const> ({\n  type: REMOVE_CHESSMAN,\n  payload: {\n    coord,\n  },\n})\n\nexport const setTargets = (targets: Chess.Coordinates[]) => <const> ({\n  type: SET_TARGETS,\n  payload: {\n    targets,\n  },\n})\n\n//\n//                           _|\n// _|  _|_|    _|_|      _|_|_|  _|    _|    _|_|_|    _|_|    _|  _|_|\n// _|_|      _|_|_|_|  _|    _|  _|    _|  _|        _|_|_|_|  _|_|\n// _|        _|        _|    _|  _|    _|  _|        _|        _|\n// _|          _|_|_|    _|_|_|    _|_|_|    _|_|_|    _|_|_|  _|\n//\n//\n\nexport const createChessReducer: (initialState: ChessState) => Reducer<ChessState, Action> = (initialState) => (state = initialState, action) => {\n  if (!isChessAction(action)) {\n    return state\n  }\n\n  switch (action.type) {\n    case RESET_BOARD: return {\n      ...state,\n      board: {\n        chessmen: Map([\n          [new Coordinates({ rank: 1, file: 1 }), { symbol: '♖' }],\n          [new Coordinates({ rank: 1, file: 2 }), { symbol: '♘' }],\n          [new Coordinates({ rank: 1, file: 3 }), { symbol: '♗' }],\n          [new Coordinates({ rank: 1, file: 4 }), { symbol: '♕' }],\n          [new Coordinates({ rank: 1, file: 5 }), { symbol: '♔' }],\n          [new Coordinates({ rank: 1, file: 6 }), { symbol: '♗' }],\n          [new Coordinates({ rank: 1, file: 7 }), { symbol: '♘' }],\n          [new Coordinates({ rank: 1, file: 8 }), { symbol: '♖' }],\n          [new Coordinates({ rank: 2, file: 1 }), { symbol: '♙', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 2, file: 2 }), { symbol: '♙', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 2, file: 3 }), { symbol: '♙', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 2, file: 4 }), { symbol: '♙', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 2, file: 5 }), { symbol: '♙', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 2, file: 6 }), { symbol: '♙', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 2, file: 7 }), { symbol: '♙', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 2, file: 8 }), { symbol: '♙', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 7, file: 1 }), { symbol: '♟', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 7, file: 2 }), { symbol: '♟', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 7, file: 3 }), { symbol: '♟', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 7, file: 4 }), { symbol: '♟', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 7, file: 5 }), { symbol: '♟', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 7, file: 6 }), { symbol: '♟', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 7, file: 7 }), { symbol: '♟', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 7, file: 8 }), { symbol: '♟', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 8, file: 1 }), { symbol: '♜' }],\n          [new Coordinates({ rank: 8, file: 2 }), { symbol: '♞' }],\n          [new Coordinates({ rank: 8, file: 3 }), { symbol: '♝' }],\n          [new Coordinates({ rank: 8, file: 4 }), { symbol: '♛' }],\n          [new Coordinates({ rank: 8, file: 5 }), { symbol: '♚' }],\n          [new Coordinates({ rank: 8, file: 6 }), { symbol: '♝' }],\n          [new Coordinates({ rank: 8, file: 7 }), { symbol: '♞' }],\n          [new Coordinates({ rank: 8, file: 8 }), { symbol: '♜' }],\n        ]),\n      },\n    }\n    case HALF_MOVE: return state\n    case PICK_CHESSMAN: return {\n      ...state,\n      picking: {\n        chessman: action.payload.chessman,\n        source: action.payload.source,\n      },\n    }\n    case PUT_CHESSMAN: return {\n      ...state,\n      board: {\n        ...state.board,\n        chessmen: state.board.chessmen.set(new Coordinates(action.payload.target), action.payload.chessman), // TODO\n      },\n      picking: null,\n      targets: null,\n    }\n    case RELEASE_CHESSMAN: return {\n      ...state,\n      picking: null,\n      targets: null,\n    }\n    case REMOVE_CHESSMAN: return {\n      ...state,\n      board: {\n        ...state.board,\n        chessmen: state.board.chessmen.delete(new Coordinates(action.payload.coord)), // TODO\n      },\n    }\n    case SET_TARGETS: return {\n      ...state,\n      targets: action.payload.targets,\n    }\n  }\n}\n\n//\n//                                           _|\n//   _|_|_|    _|_|    _|  _|_|  _|      _|        _|_|_|    _|_|\n// _|_|      _|_|_|_|  _|_|      _|      _|  _|  _|        _|_|_|_|\n//     _|_|  _|        _|          _|  _|    _|  _|        _|\n// _|_|_|      _|_|_|  _|            _|      _|    _|_|_|    _|_|_|\n//\n//\n\n@injectable()\nexport class ChessService {\n  private *halfMoveSaga({ payload: { chessman, source, target } }: HalfMoveAction): SagaIterator {\n    // TODO: Check move\n\n    // TODO: Castle\n\n    // TODO: Remove en passant\n\n    yield put(removeChessman(source))\n    yield put(putChessman(chessman, target))\n\n    // TODO: Turn\n  }\n\n  private *pickChessmanSaga({ payload: { chessman, source } }: PickChessmanAction): SagaIterator {\n    const { chess: { board } }: State = yield select()\n\n    const targets = getCoordinatesAttackedBy(chessman, source, board)\n\n    yield put(setTargets(targets))\n  }\n\n  public *rootSaga(): SagaIterator {\n    yield takeEvery(HALF_MOVE, [this, this.halfMoveSaga])\n    yield takeEvery(PICK_CHESSMAN, [this, this.pickChessmanSaga])\n  }\n}\n","export default function getCoordinatesAttackedBy(_chessman: Chess.Chessman, _coord: Chess.Coordinates, _board: Chess.Chessboard): Chess.Coordinates[] {\n  return [{ file: 1, rank: 1 }] // TODO\n}\n","import { injectable } from 'inversify'\nimport { Action, Reducer } from 'redux'\nimport { SagaIterator } from 'redux-saga'\nimport { call, put, select } from 'redux-saga/effects'\n\nimport { takeEvery } from '~/lib/boni/redux-saga/effects'\nimport delay from '~/lib/delay'\nimport { State } from '~/redux'\n\n//\n//             _|                  _|\n//   _|_|_|  _|_|_|_|    _|_|_|  _|_|_|_|    _|_|\n// _|_|        _|      _|    _|    _|      _|_|_|_|\n//     _|_|    _|      _|    _|    _|      _|\n// _|_|_|        _|_|    _|_|_|      _|_|    _|_|_|\n//\n//\n\nexport interface CounterState {\n  count: number\n}\n\nexport function counterInvariant(state: CounterState) {\n  return state.count >= 0\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//   _|\n// _|_|_|_|  _|    _|  _|_|_|      _|_|      _|_|_|\n//   _|      _|    _|  _|    _|  _|_|_|_|  _|_|\n//   _|      _|    _|  _|    _|  _|            _|_|\n//     _|_|    _|_|_|  _|_|_|      _|_|_|  _|_|_|\n//                 _|  _|\n//             _|_|    _|\n\nexport /* for testing */ const RESET = '@@react-app-prototype/counter/RESET'\nexport /* for testing */ const INCREMENT_IF_ODD = '@@react-app-prototype/counter/INCREMENT_IF_ODD'\nexport /* for testing */ const INCREMENT_ASYNC = '@@react-app-prototype/counter/INCREMENT_ASYNC'\nexport /* for testing */ const INCREMENT = '@@react-app-prototype/counter/INCREMENT'\nexport /* for testing */ const DECREMENT = '@@react-app-prototype/counter/DECREMENT'\n\nconst counterActionTypes = [\n  RESET,\n  INCREMENT_IF_ODD,\n  INCREMENT_ASYNC,\n  INCREMENT,\n  DECREMENT,\n]\n\ntype ResetAction = ReturnType<typeof reset>\ntype IncrementIfOddAction = ReturnType<typeof incrementIfOdd>\ntype IncrementAsyncAction = ReturnType<typeof incrementAsync>\ntype IncrementAction = ReturnType<typeof increment>\ntype DecrementAction = ReturnType<typeof decrement>\n\nexport type CounterAction =\n  | ResetAction\n  | IncrementIfOddAction\n  | IncrementAsyncAction\n  | IncrementAction\n  | DecrementAction\n\nfunction isCounterAction(action: Action): action is CounterAction {\n  return counterActionTypes.includes(action.type)\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//                                           _|\n//   _|_|_|  _|  _|_|    _|_|      _|_|_|  _|_|_|_|    _|_|    _|  _|_|    _|_|_|\n// _|        _|_|      _|_|_|_|  _|    _|    _|      _|    _|  _|_|      _|_|\n// _|        _|        _|        _|    _|    _|      _|    _|  _|            _|_|\n//   _|_|_|  _|          _|_|_|    _|_|_|      _|_|    _|_|    _|        _|_|_|\n//\n//\n\nexport const reset = () => <const> ({\n  type: RESET,\n})\n\nexport const incrementIfOdd = () => <const> ({\n  type: INCREMENT_IF_ODD,\n})\n\nexport const incrementAsync = (ms: number) => <const> ({\n  type: INCREMENT_ASYNC,\n  payload: {\n    ms,\n  },\n})\n\nexport const increment = () => <const> ({\n  type: INCREMENT,\n})\n\nexport const decrement = () => <const> ({\n  type: DECREMENT,\n})\n\n//\n//                     _|                        _|\n//   _|_|_|    _|_|    _|    _|_|      _|_|_|  _|_|_|_|    _|_|    _|  _|_|    _|_|_|\n// _|_|      _|_|_|_|  _|  _|_|_|_|  _|          _|      _|    _|  _|_|      _|_|\n//     _|_|  _|        _|  _|        _|          _|      _|    _|  _|            _|_|\n// _|_|_|      _|_|_|  _|    _|_|_|    _|_|_|      _|_|    _|_|    _|        _|_|_|\n//\n//\n\nexport const selectCount = (state: State) => state.counter.count\n\n//\n//                           _|\n// _|  _|_|    _|_|      _|_|_|  _|    _|    _|_|_|    _|_|    _|  _|_|\n// _|_|      _|_|_|_|  _|    _|  _|    _|  _|        _|_|_|_|  _|_|\n// _|        _|        _|    _|  _|    _|  _|        _|        _|\n// _|          _|_|_|    _|_|_|    _|_|_|    _|_|_|    _|_|_|  _|\n//\n//\n\nexport const createCounterReducer: (initialState: CounterState) => Reducer<CounterState, Action> = (initialState) => (state = initialState, action) => {\n  if (!isCounterAction(action)) {\n    return state\n  }\n\n  switch (action.type) {\n    case RESET: return initialState\n    case INCREMENT_IF_ODD:\n    case INCREMENT_ASYNC: return state\n    case INCREMENT: return {\n      ...state,\n      count: state.count + 1,\n    }\n    case DECREMENT: return {\n      ...state,\n      count: state.count - 1,\n    }\n  }\n}\n\n//\n//                                           _|\n//   _|_|_|    _|_|    _|  _|_|  _|      _|        _|_|_|    _|_|\n// _|_|      _|_|_|_|  _|_|      _|      _|  _|  _|        _|_|_|_|\n//     _|_|  _|        _|          _|  _|    _|  _|        _|\n// _|_|_|      _|_|_|  _|            _|      _|    _|_|_|    _|_|_|\n//\n//\n\n@injectable()\nexport class CounterService {\n  public /* for testing */ *incrementIfOddSaga(): SagaIterator {\n    const { counter: { count } }: State = yield select()\n\n    if (count % 2 !== 0) {\n      yield put(increment())\n    }\n  }\n\n  public /* for testing */ *incrementAsyncSaga({ payload: { ms } }: IncrementAsyncAction): SagaIterator {\n    yield call(delay, ms)\n    yield put(increment())\n  }\n\n  public *rootSaga(): SagaIterator {\n    yield takeEvery(INCREMENT_IF_ODD, [this, this.incrementIfOddSaga])\n    yield takeEvery(INCREMENT_ASYNC, [this, this.incrementAsyncSaga])\n  }\n}\n","import { injectable } from 'inversify'\nimport { Action, Reducer } from 'redux'\nimport { SagaIterator, Task } from 'redux-saga'\nimport { call, cancel, put } from 'redux-saga/effects'\n\nimport { takeEvery } from '~/lib/boni/redux-saga/effects'\nimport delay from '~/lib/delay'\n\n//\n//             _|                  _|\n//   _|_|_|  _|_|_|_|    _|_|_|  _|_|_|_|    _|_|\n// _|_|        _|      _|    _|    _|      _|_|_|_|\n//     _|_|    _|      _|    _|    _|      _|\n// _|_|_|        _|_|    _|_|_|      _|_|    _|_|_|\n//\n//\n\nexport interface IoState {\n  now: Date\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//   _|\n// _|_|_|_|  _|    _|  _|_|_|      _|_|      _|_|_|\n//   _|      _|    _|  _|    _|  _|_|_|_|  _|_|\n//   _|      _|    _|  _|    _|  _|            _|_|\n//     _|_|    _|_|_|  _|_|_|      _|_|_|  _|_|_|\n//                 _|  _|\n//             _|_|    _|\n\nexport /* for testing */ const UPDATE_NOW = '@@react-app-prototype/io/UPDATE_NOW' // TODO: Rename\nexport /* for testing */ const START_CLOCK = '@@react-app-prototype/io/START_CLOCK'\nconst STOP_CLOCK = '@@react-app-prototype/io/STOP_CLOCK'\nexport /* for testing */ const SET_NOW = '@@react-app-prototype/io/SET_NOW'\n\nconst ioActionTypes = [\n  UPDATE_NOW,\n  START_CLOCK,\n  STOP_CLOCK,\n  SET_NOW,\n]\n\ntype UpdateNowAction = ReturnType<typeof updateNow>\ntype StartClockAction = ReturnType<typeof startClock>\ntype StopClockAction = ReturnType<typeof stopClock>\nexport /* for testing */ type SetNowAction = ReturnType<typeof setNow>\n\nexport type IoAction =\n  | UpdateNowAction\n  | StartClockAction\n  | StopClockAction\n  | SetNowAction\n\nfunction isIoAction(action: Action): action is IoAction {\n  return ioActionTypes.includes(action.type)\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//                                           _|\n//   _|_|_|  _|  _|_|    _|_|      _|_|_|  _|_|_|_|    _|_|    _|  _|_|    _|_|_|\n// _|        _|_|      _|_|_|_|  _|    _|    _|      _|    _|  _|_|      _|_|\n// _|        _|        _|        _|    _|    _|      _|    _|  _|            _|_|\n//   _|_|_|  _|          _|_|_|    _|_|_|      _|_|    _|_|    _|        _|_|_|\n//\n//\n\nexport const updateNow = () => <const> ({\n  type: UPDATE_NOW,\n})\n\nexport const startClock = () => <const> ({\n  type: START_CLOCK,\n})\n\nexport const stopClock = () => <const> ({\n  type: STOP_CLOCK,\n})\n\nexport /* for testing */ const setNow = (now: Date) => <const> ({\n  type: SET_NOW,\n  payload: {\n    now,\n  },\n})\n\n//\n//                           _|\n// _|  _|_|    _|_|      _|_|_|  _|    _|    _|_|_|    _|_|    _|  _|_|\n// _|_|      _|_|_|_|  _|    _|  _|    _|  _|        _|_|_|_|  _|_|\n// _|        _|        _|    _|  _|    _|  _|        _|        _|\n// _|          _|_|_|    _|_|_|    _|_|_|    _|_|_|    _|_|_|  _|\n//\n//\n\nexport const createIoReducer: (initialState: IoState) => Reducer<IoState, Action> = (initialState) => (state = initialState, action) => {\n  if (!isIoAction(action)) {\n    return state\n  }\n\n  switch (action.type) {\n    case UPDATE_NOW: return state\n    case START_CLOCK: return state\n    case STOP_CLOCK: return state\n    case SET_NOW: return {\n      ...state,\n      now: action.payload.now,\n    }\n  }\n}\n\n//\n//                                           _|\n//   _|_|_|    _|_|    _|  _|_|  _|      _|        _|_|_|    _|_|\n// _|_|      _|_|_|_|  _|_|      _|      _|  _|  _|        _|_|_|_|\n//     _|_|  _|        _|          _|  _|    _|  _|        _|\n// _|_|_|      _|_|_|  _|            _|      _|    _|_|_|    _|_|_|\n//\n//\n\n@injectable()\nexport class IoService {\n  private startClockTask: Task | null = null\n\n  public /* for testing */ *updateNowSaga(): SagaIterator {\n    yield put(setNow(new Date))\n  }\n\n  public /* for testing */ *startClockSaga(): SagaIterator {\n    yield put(updateNow())\n\n    // tslint:disable-next-line:no-loop-statement\n    while (true) {\n      yield call(delay, 1000 - new Date().getMilliseconds())\n\n      yield put(updateNow())\n    }\n  }\n\n  public /* for testing */ *stopClockSaga(): SagaIterator {\n    if (this.startClockTask !== null) {\n      yield cancel(this.startClockTask)\n\n      // Resume the cancelled task\n      // tslint:disable-next-line:no-object-mutation\n      this.startClockTask = yield takeEvery(START_CLOCK, [this, this.startClockSaga])\n    }\n  }\n\n  public *rootSaga(): SagaIterator {\n    yield takeEvery(UPDATE_NOW, [this, this.updateNowSaga])\n    // tslint:disable-next-line:no-object-mutation\n    this.startClockTask = yield takeEvery(START_CLOCK, [this, this.startClockSaga])\n    yield takeEvery(STOP_CLOCK, [this, this.stopClockSaga])\n  }\n}\n","import { List } from 'immutable'\nimport { Formats } from 'intl-messageformat'\nimport { inject, injectable } from 'inversify'\nimport { Action, Reducer } from 'redux'\nimport { SagaIterator } from 'redux-saga'\nimport { call, put } from 'redux-saga/effects'\n\nimport ConfigRegistry from '~/config/ConfigRegistry'\nimport { takeEvery } from '~/lib/boni/redux-saga/effects'\nimport fetch from '~/lib/fetch'\nimport { Tag } from '~/lib/languageNameSolver'\nimport typed from '~/lib/typed'\nimport { asString, recordOf } from '~/lib/validators/commonValidators'\nimport { asFormats } from '~/lib/validators/intlValidators'\n\n//\n//             _|                  _|\n//   _|_|_|  _|_|_|_|    _|_|_|  _|_|_|_|    _|_|\n// _|_|        _|      _|    _|    _|      _|_|_|_|\n//     _|_|    _|      _|    _|    _|      _|\n// _|_|_|        _|_|    _|_|_|      _|_|    _|_|_|\n//\n//\n\nexport interface LocaleSelectorState {\n  locale: Tag\n  formats: Partial<Formats>\n  messages: Record<string, string>\n  errors: List<Error>\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//   _|\n// _|_|_|_|  _|    _|  _|_|_|      _|_|      _|_|_|\n//   _|      _|    _|  _|    _|  _|_|_|_|  _|_|\n//   _|      _|    _|  _|    _|  _|            _|_|\n//     _|_|    _|_|_|  _|_|_|      _|_|_|  _|_|_|\n//                 _|  _|\n//             _|_|    _|\n\nexport /* for testing */ const SELECT_LOCALE = '@@react-app-prototype/localeSelector/SELECT_LOCALE'\nexport /* for testing */ const SET_LOCALE = '@@react-app-prototype/localeSelector/SET_LOCALE'\nexport /* for testing */ const SET_FORMATS = '@@react-app-prototype/localeSelector/SET_FORMATS'\nexport /* for testing */ const SET_MESSAGES = '@@react-app-prototype/localeSelector/SET_MESSAGES'\nexport /* for testing */ const PUSH_ERROR = '@@react-app-prototype/localeSelector/PUSH_ERROR'\n\nconst localeSelectorActionTypes = [\n  SELECT_LOCALE,\n  SET_LOCALE,\n  SET_FORMATS,\n  SET_MESSAGES,\n  PUSH_ERROR,\n]\n\ntype SelectLocaleAction = ReturnType<typeof selectLocale>\ntype SetLocaleAction = ReturnType<typeof setLocale>\ntype SetFormatsAction = ReturnType<typeof setFormats>\ntype SetMessagesAction = ReturnType<typeof setMessages>\ntype PushErrorAction = ReturnType<typeof pushError>\n\nexport type LocaleSelectorAction =\n  | SelectLocaleAction\n  | SetLocaleAction\n  | SetFormatsAction\n  | SetMessagesAction\n  | PushErrorAction\n\nfunction isLocaleSelectorAction(action: Action): action is LocaleSelectorAction {\n  return localeSelectorActionTypes.includes(action.type)\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//                                           _|\n//   _|_|_|  _|  _|_|    _|_|      _|_|_|  _|_|_|_|    _|_|    _|  _|_|    _|_|_|\n// _|        _|_|      _|_|_|_|  _|    _|    _|      _|    _|  _|_|      _|_|\n// _|        _|        _|        _|    _|    _|      _|    _|  _|            _|_|\n//   _|_|_|  _|          _|_|_|    _|_|_|      _|_|    _|_|    _|        _|_|_|\n//\n//\n\nexport const selectLocale = (locale: Tag) => <const> ({\n  type: SELECT_LOCALE,\n  payload: {\n    locale,\n  },\n})\n\nexport /* for testing */ const setLocale = (locale: Tag) => <const> ({\n  type: SET_LOCALE,\n  payload: {\n    locale,\n  },\n})\n\nexport /* for testing */ const setFormats = (formats: Partial<Formats>) => <const> ({\n  type: SET_FORMATS,\n  payload: {\n    formats,\n  },\n})\n\nexport /* for testing */ const setMessages = (messages: Record<string, string>) => <const> ({\n  type: SET_MESSAGES,\n  payload: {\n    messages,\n  },\n})\n\nexport /* for testing */ const pushError = (error: Error) => <const> ({\n  type: PUSH_ERROR,\n  payload: {\n    error,\n  },\n})\n\n//\n//                           _|\n// _|  _|_|    _|_|      _|_|_|  _|    _|    _|_|_|    _|_|    _|  _|_|\n// _|_|      _|_|_|_|  _|    _|  _|    _|  _|        _|_|_|_|  _|_|\n// _|        _|        _|    _|  _|    _|  _|        _|        _|\n// _|          _|_|_|    _|_|_|    _|_|_|    _|_|_|    _|_|_|  _|\n//\n//\n\nexport const createLocaleSelectorReducer: (initialState: LocaleSelectorState) => Reducer<LocaleSelectorState, Action> = (initialState) => (state = initialState, action) => {\n  if (!isLocaleSelectorAction(action)) {\n    return state\n  }\n\n  switch (action.type) {\n    case SELECT_LOCALE: return state\n    case SET_LOCALE: return {\n      ...state,\n      locale: action.payload.locale,\n    }\n    case SET_FORMATS: return {\n      ...state,\n      formats: action.payload.formats,\n    }\n    case SET_MESSAGES: return {\n      ...state,\n      messages: action.payload.messages,\n    }\n    case PUSH_ERROR: return {\n      ...state,\n      errors: state.errors.push(action.payload.error),\n    }\n  }\n}\n\n//\n//                                           _|\n//   _|_|_|    _|_|    _|  _|_|  _|      _|        _|_|_|    _|_|\n// _|_|      _|_|_|_|  _|_|      _|      _|  _|  _|        _|_|_|_|\n//     _|_|  _|        _|          _|  _|    _|  _|        _|\n// _|_|_|      _|_|_|  _|            _|      _|    _|_|_|    _|_|_|\n//\n//\n\n@injectable()\nexport default class LocaleSelectorService {\n  constructor(\n    @inject('EnvVarConfig') private config: ConfigRegistry\n  ) {}\n\n  public /* for testing */ *selectLocaleSaga({ payload: { locale } }: SelectLocaleAction): SagaIterator {\n    try {\n      const { body: formats }: ResultType<ReturnType<typeof fetch>> = yield call(fetch, {\n        method: 'GET',\n        parameterizedEndpoint: typed<[string]>`${ this.config.get('BASE_NAME') }/formats/:locale.json`,\n        params: { locale },\n      })\n\n      const { body: messages }: ResultType<ReturnType<typeof fetch>> = yield call(fetch, {\n        method: 'GET',\n        parameterizedEndpoint: typed<[string]>`${ this.config.get('BASE_NAME') }/messages/:locale.json`,\n        params: { locale },\n      })\n\n      yield put(setFormats(asFormats(formats)))\n      yield put(setMessages(recordOf(asString)(messages)))\n      yield put(setLocale(locale))\n    } catch (error: unknown) {\n      if (error instanceof Error) {\n        yield put(pushError(error))\n\n        return\n      }\n\n      throw new TypeError(typed<[string]>`${ String(error) } is not an error.`)\n    }\n  }\n\n  public *rootSaga(): SagaIterator {\n    yield takeEvery(SELECT_LOCALE, [this, this.selectLocaleSaga])\n  }\n}\n","import AbstractError from './AbstractError'\n\nexport default class LogicError extends AbstractError {}\n","import assert from 'assert'\nimport { List, Map } from 'immutable'\nimport { inject, injectable } from 'inversify'\nimport { Action, Reducer } from 'redux'\nimport { SagaIterator } from 'redux-saga'\nimport { call, put, select } from 'redux-saga/effects'\nimport { v4 } from 'uuid'\n\nimport Task from '~/domain/entity/Task'\nimport TaskRepository from '~/domain/repository/TaskRepository'\nimport TaskId from '~/domain/vo/TaskId'\nimport { takeEvery } from '~/lib/boni/redux-saga/effects'\nimport LogicError from '~/lib/errors/LogicError'\nimport typed from '~/lib/typed'\nimport { State } from '~/redux'\n\n//\n//             _|                  _|\n//   _|_|_|  _|_|_|_|    _|_|_|  _|_|_|_|    _|_|\n// _|_|        _|      _|    _|    _|      _|_|_|_|\n//     _|_|    _|      _|    _|    _|      _|\n// _|_|_|        _|_|    _|_|_|      _|_|    _|_|_|\n//\n//\n\nexport interface ReminderState {\n  tasks: List<Task>\n  errors: Map<string, Error> // id -> error\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//   _|\n// _|_|_|_|  _|    _|  _|_|_|      _|_|      _|_|_|\n//   _|      _|    _|  _|    _|  _|_|_|_|  _|_|\n//   _|      _|    _|  _|    _|  _|            _|_|\n//     _|_|    _|_|_|  _|_|_|      _|_|_|  _|_|_|\n//                 _|  _|\n//             _|_|    _|\n\nconst GET_TASKS_ASYNC = '@@react-app-prototype/reminder/GET_TASKS_ASYNC'\nconst SET_TASKS = '@@react-app-prototype/reminder/SET_TASKS'\nexport /* for testing */ const ADD_TASK_ASYNC = '@@react-app-prototype/reminder/ADD_TASK_ASYNC'\nexport /* for testing */ const CHANGE_TASK_CONTENT_ASYNC = '@@react-app-prototype/reminder/CHANGE_TASK_CONTENT_ASYNC'\nexport /* for testing */ const MARK_TASK_AS_DONE_ASYNC = '@@react-app-prototype/reminder/MARK_TASK_AS_DONE_ASYNC'\nexport /* for testing */ const MARK_TASK_AS_UNDONE_ASYNC = '@@react-app-prototype/reminder/MARK_TASK_AS_UNDONE_ASYNC'\nexport /* for testing */ const DELETE_TASK_ASYNC = '@@react-app-prototype/reminder/DELETE_TASK_ASYNC'\nexport /* for testing */ const MOVE_TASK = '@@react-app-prototype/reminder/MOVE_TASK' // TODO: Rename?\nexport /* for testing */ const PUSH_TASK = '@@react-app-prototype/reminder/PUSH_TASK'\nexport const MARK_TASK_AS_DONE = '@@react-app-prototype/reminder/MARK_TASK_AS_DONE'\nexport const MARK_TASK_AS_UNDONE = '@@react-app-prototype/reminder/MARK_TASK_AS_UNDONE'\nexport /* for testing */ const REMOVE_TASK = '@@react-app-prototype/reminder/REMOVE_TASK'\nexport /* for testing */ const CHECK_TASK = '@@react-app-prototype/reminder/CHECK_TASK'\nexport /* for testing */ const PUSH_ERROR = '@@react-app-prototype/reminder/PUSH_ERROR'\nconst REMOVE_ERROR = '@@react-app-prototype/reminder/REMOVE_ERROR'\n\nconst reminderActionTypes = [\n  GET_TASKS_ASYNC,\n  SET_TASKS,\n  ADD_TASK_ASYNC,\n  CHANGE_TASK_CONTENT_ASYNC,\n  MARK_TASK_AS_DONE_ASYNC,\n  MARK_TASK_AS_UNDONE_ASYNC,\n  DELETE_TASK_ASYNC,\n  MOVE_TASK,\n  PUSH_TASK,\n  MARK_TASK_AS_DONE,\n  MARK_TASK_AS_UNDONE,\n  REMOVE_TASK,\n  CHECK_TASK,\n  PUSH_ERROR,\n  REMOVE_ERROR,\n]\n\ntype GetTasksAsyncAction = ReturnType<typeof getTasksAsync>\ntype SetTasksAction = ReturnType<typeof setTasks>\ntype AddTaskAsyncAction = ReturnType<typeof addTaskAsync>\ntype ChangeTaskContentAsyncAction = ReturnType<typeof changeTaskContentAsync>\ntype MarkTaskAsDoneAsyncAction = ReturnType<typeof markTaskAsDoneAsync>\ntype MarkTaskAsUndoneAsyncAction = ReturnType<typeof markTaskAsUndoneAsync>\ntype DeleteTaskAsyncAction = ReturnType<typeof deleteTaskAsync>\ntype MoveTaskAction = ReturnType<typeof moveTask>\ntype PushTaskAction = ReturnType<typeof pushTask>\ntype MarkTaskAsDoneAction = ReturnType<typeof markTaskAsDone>\ntype MarkTaskAsUndoneAction = ReturnType<typeof markTaskAsUndone>\ntype RemoveTaskAction = ReturnType<typeof removeTask>\ntype CheckTaskAction = ReturnType<typeof checkTask>\ntype PushErrorAction = ReturnType<typeof pushError>\ntype RemoveErrorAction = ReturnType<typeof removeError>\n\nexport type ReminderAction =\n  | GetTasksAsyncAction\n  | SetTasksAction\n  | AddTaskAsyncAction\n  | ChangeTaskContentAsyncAction\n  | MarkTaskAsDoneAsyncAction\n  | MarkTaskAsUndoneAsyncAction\n  | DeleteTaskAsyncAction\n  | MoveTaskAction\n  | PushTaskAction\n  | MarkTaskAsDoneAction\n  | MarkTaskAsUndoneAction\n  | RemoveTaskAction\n  | CheckTaskAction\n  | PushErrorAction\n  | RemoveErrorAction\n\nfunction isReminderAction(action: Action): action is ReminderAction {\n  return reminderActionTypes.includes(action.type)\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//                                           _|\n//   _|_|_|  _|  _|_|    _|_|      _|_|_|  _|_|_|_|    _|_|    _|  _|_|    _|_|_|\n// _|        _|_|      _|_|_|_|  _|    _|    _|      _|    _|  _|_|      _|_|\n// _|        _|        _|        _|    _|    _|      _|    _|  _|            _|_|\n//   _|_|_|  _|          _|_|_|    _|_|_|      _|_|    _|_|    _|        _|_|_|\n//\n//\n\nexport const getTasksAsync = () => <const> ({\n  type: GET_TASKS_ASYNC,\n})\n\nconst setTasks = (tasks: List<Task>) => <const> ({\n  type: SET_TASKS,\n  payload: {\n    tasks,\n  },\n})\n\nexport const addTaskAsync = () => <const> ({\n  type: ADD_TASK_ASYNC,\n})\n\nexport const changeTaskContentAsync = (taskId: TaskId, content: string) => <const> ({\n  type: CHANGE_TASK_CONTENT_ASYNC,\n  payload: {\n    taskId,\n    content,\n  },\n})\n\nexport const markTaskAsDoneAsync = (taskId: TaskId) => <const> ({\n  type: MARK_TASK_AS_DONE_ASYNC,\n  payload: {\n    taskId,\n  },\n})\n\nexport const markTaskAsUndoneAsync = (taskId: TaskId) => <const> ({\n  type: MARK_TASK_AS_UNDONE_ASYNC,\n  payload: {\n    taskId,\n  },\n})\n\nexport const deleteTaskAsync = (taskId: TaskId) => <const> ({\n  type: DELETE_TASK_ASYNC,\n  payload: {\n    taskId,\n  },\n})\n\nexport const moveTask = (sourceIndex: number, targetIndex: number) => <const> ({\n  type: MOVE_TASK,\n  payload: {\n    sourceIndex,\n    targetIndex,\n  },\n})\n\nexport const pushTask = (task: Task) => <const> ({\n  type: PUSH_TASK,\n  payload: {\n    task,\n  },\n})\n\nexport const markTaskAsDone = (taskId: TaskId) => <const> ({\n  type: MARK_TASK_AS_DONE,\n  payload: {\n    taskId,\n  },\n})\n\nexport const markTaskAsUndone = (taskId: TaskId) => <const> ({\n  type: MARK_TASK_AS_UNDONE,\n  payload: {\n    taskId,\n  },\n})\n\nexport const removeTask = (taskId: TaskId) => <const> ({\n  type: REMOVE_TASK,\n  payload: {\n    taskId,\n  },\n})\n\nexport const checkTask = (taskId: TaskId, task: Task) => <const> ({\n  type: CHECK_TASK,\n  payload: {\n    taskId,\n    task,\n  },\n})\n\nexport /* for testing */ const pushError = (errorId: string, error: Error) => <const> ({\n  type: PUSH_ERROR,\n  payload: {\n    errorId,\n    error,\n  },\n})\n\nexport const removeError = (errorId: string) => <const> ({\n  type: REMOVE_ERROR,\n  payload: {\n    errorId,\n  },\n})\n\n//\n//                           _|\n// _|  _|_|    _|_|      _|_|_|  _|    _|    _|_|_|    _|_|    _|  _|_|\n// _|_|      _|_|_|_|  _|    _|  _|    _|  _|        _|_|_|_|  _|_|\n// _|        _|        _|    _|  _|    _|  _|        _|        _|\n// _|          _|_|_|    _|_|_|    _|_|_|    _|_|_|    _|_|_|  _|\n//\n//\n\nexport const createReminderReducer: (initialState: ReminderState) => Reducer<ReminderState, Action> = (initialState) => (state = initialState, action) => {\n  if (!isReminderAction(action)) {\n    return state\n  }\n\n  switch (action.type) {\n    case GET_TASKS_ASYNC: return state\n    case SET_TASKS: return {\n      ...state,\n      tasks: action.payload.tasks,\n    }\n    case ADD_TASK_ASYNC: return state\n    case CHANGE_TASK_CONTENT_ASYNC: {\n      // NOTE: CHANGE_TASK_CONTENT_ASYNC から発生する状態遷移と非同期のデータ書き込みを分離させると、このモジュールを使用する <input> は、内容が変更されるたびに再レンダリングされ、 IME とうまく相互作用しなくなる。\n\n      const i = state.tasks.findIndex((task) => task.id.equals(action.payload.taskId))\n\n      if (i === -1) {\n        throw new Error // TODO:\n      }\n\n      return {\n        ...state,\n        tasks: state.tasks.update(i, (task) => task.with({ content: action.payload.content })),\n      }\n    }\n    case MARK_TASK_AS_DONE_ASYNC: return state\n    case MARK_TASK_AS_UNDONE_ASYNC: return state\n    case DELETE_TASK_ASYNC: return state\n    case MOVE_TASK: {\n      const object = state.tasks.get(action.payload.sourceIndex)\n\n      if (object === undefined) {\n        throw new Error // TODO\n      }\n\n      return {\n        ...state,\n        tasks: state.tasks.remove(action.payload.sourceIndex).insert(action.payload.targetIndex, object),\n      }\n    }\n    case PUSH_TASK: return {\n      ...state,\n      tasks: state.tasks.push(action.payload.task),\n    }\n    case MARK_TASK_AS_DONE: {\n      const i = state.tasks.findIndex((task) => task.id.equals(action.payload.taskId))\n\n      if (i === -1) {\n        throw new Error // TODO:\n      }\n\n      return {\n        ...state,\n        tasks: state.tasks.update(i, (task) => task.with({ done: true })),\n      }\n    }\n    case MARK_TASK_AS_UNDONE: {\n      const i = state.tasks.findIndex((task) => task.id.equals(action.payload.taskId))\n\n      if (i === -1) {\n        throw new Error // TODO:\n      }\n\n      return {\n        ...state,\n        tasks: state.tasks.update(i, (task) => task.with({ done: false })),\n      }\n    }\n    case REMOVE_TASK: {\n      const i = state.tasks.findIndex((task) => task.id.equals(action.payload.taskId))\n\n      if (i === -1) {\n        throw new Error // TODO:\n      }\n\n      return {\n        ...state,\n        tasks: state.tasks.remove(i),\n      }\n    }\n    case CHECK_TASK: {\n      assert(action.payload.taskId.equals(action.payload.task.id))\n\n      return state\n    }\n    case PUSH_ERROR: return {\n      ...state,\n      errors: state.errors.set(action.payload.errorId, action.payload.error),\n    }\n    case REMOVE_ERROR: {\n      if (!(action.payload.errorId in state.errors)) {\n        throw new Error // TODO:\n      }\n\n      return {\n        ...state,\n        errors: state.errors.remove(action.payload.errorId),\n      }\n    }\n  }\n}\n\n//\n//                                           _|\n//   _|_|_|    _|_|    _|  _|_|  _|      _|        _|_|_|    _|_|\n// _|_|      _|_|_|_|  _|_|      _|      _|  _|  _|        _|_|_|_|\n//     _|_|  _|        _|          _|  _|    _|  _|        _|\n// _|_|_|      _|_|_|  _|            _|      _|    _|_|_|    _|_|_|\n//\n//\n\n@injectable()\nexport default class ReminderService {\n  constructor(\n    @inject('TaskRepository') public taskRepository: TaskRepository\n  ) {}\n\n  private *getTasksAsyncSaga(): SagaIterator {\n    const tasks: ResultType<ReturnType<this['taskRepository']['list']>> = yield call(this.taskRepository.list)\n\n    yield put(setTasks(tasks))\n  }\n\n  private *addTaskAsyncSaga(): SagaIterator {\n    const task = new Task({\n      id: new TaskId(v4()),\n      content: '',\n      done: false,\n    })\n\n    yield call(this.taskRepository.store, task)\n    yield put(pushTask(task))\n  }\n\n  private *changeTaskContentAsyncSaga({ payload: { taskId, content } }: ChangeTaskContentAsyncAction): SagaIterator {\n    const task: ResultType<ReturnType<this['taskRepository']['findById']>> = yield call(this.taskRepository.findById, taskId)\n\n    try {\n      task.content = content // tslint:disable-line:no-object-mutation\n    } catch (error: unknown) {\n      if (error instanceof Error) {\n        yield put(pushError(v4(), error)) // TODO:\n\n        return\n      }\n\n      throw new TypeError(typed<[string]>`${ String(error) } is not an error.`)\n    }\n\n    yield call(this.taskRepository.store, task)\n    yield put(checkTask(taskId, task))\n  }\n\n  private *markTaskAsDoneAsyncSaga({ payload: { taskId } }: MarkTaskAsDoneAsyncAction): SagaIterator {\n    const task: ResultType<ReturnType<this['taskRepository']['findById']>> = yield call(this.taskRepository.findById, taskId)\n\n    task.done = true // tslint:disable-line:no-object-mutation\n\n    yield call(this.taskRepository.store, task)\n    yield put(markTaskAsDone(taskId))\n  }\n\n  private *markTaskAsUndoneAsyncSaga({ payload: { taskId } }: MarkTaskAsUndoneAsyncAction): SagaIterator {\n    const task: ResultType<ReturnType<this['taskRepository']['findById']>> = yield call(this.taskRepository.findById, taskId)\n\n    task.done = false // tslint:disable-line:no-object-mutation\n\n    yield call(this.taskRepository.store, task)\n    yield put(markTaskAsUndone(taskId))\n  }\n\n  private *deleteTaskAsyncSaga({ payload: { taskId } }: DeleteTaskAsyncAction): SagaIterator {\n    const task: ResultType<ReturnType<this['taskRepository']['findById']>> = yield call(this.taskRepository.findById, taskId)\n\n    yield call(this.taskRepository.remove, task)\n    yield put(removeTask(taskId))\n  }\n\n  private *checkTaskSaga({ payload: { taskId, task } }: CheckTaskAction): SagaIterator {\n    const { reminder: { tasks: stateTasks } }: State = yield select()\n\n    const stateTask = stateTasks.find(({ id }) => id.equals(taskId))\n\n    if (stateTask === undefined) {\n      throw new Error // TODO:\n    }\n\n    if (!stateTask.equals(task)) {\n      yield put(pushError(v4(), new LogicError)) // TODO:\n    }\n  }\n\n  public *rootSaga(): SagaIterator {\n    yield takeEvery(GET_TASKS_ASYNC, [this, this.getTasksAsyncSaga])\n    yield takeEvery(ADD_TASK_ASYNC, [this, this.addTaskAsyncSaga])\n    yield takeEvery(CHANGE_TASK_CONTENT_ASYNC, [this, this.changeTaskContentAsyncSaga])\n    yield takeEvery(MARK_TASK_AS_DONE_ASYNC, [this, this.markTaskAsDoneAsyncSaga])\n    yield takeEvery(MARK_TASK_AS_UNDONE_ASYNC, [this, this.markTaskAsUndoneAsyncSaga])\n    yield takeEvery(DELETE_TASK_ASYNC, [this, this.deleteTaskAsyncSaga])\n    yield takeEvery(CHECK_TASK, [this, this.checkTaskSaga])\n  }\n}\n","import { inject, injectable } from 'inversify'\nimport { Action, Reducer } from 'redux'\nimport { SagaIterator } from 'redux-saga'\nimport { call } from 'redux-saga/effects'\n\nimport ConfigRegistry from '~/config/ConfigRegistry'\nimport { takeEvery } from '~/lib/boni/redux-saga/effects'\nimport typed from '~/lib/typed'\n\n//\n//             _|                  _|\n//   _|_|_|  _|_|_|_|    _|_|_|  _|_|_|_|    _|_|\n// _|_|        _|      _|    _|    _|      _|_|_|_|\n//     _|_|    _|      _|    _|    _|      _|\n// _|_|_|        _|_|    _|_|_|      _|_|    _|_|_|\n//\n//\n\nexport type UserAuthnState = {}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//   _|\n// _|_|_|_|  _|    _|  _|_|_|      _|_|      _|_|_|\n//   _|      _|    _|  _|    _|  _|_|_|_|  _|_|\n//   _|      _|    _|  _|    _|  _|            _|_|\n//     _|_|    _|_|_|  _|_|_|      _|_|_|  _|_|_|\n//                 _|  _|\n//             _|_|    _|\n\nexport /* for testing */ const REDIRECT_TO_GITHUB = '@@react-app-prototype/userAuthn/REDIRECT_TO_GITHUB'\n\nconst userAuthnActionTypes = [\n  REDIRECT_TO_GITHUB,\n]\n\ntype RedirectToGitHubAction = ReturnType<typeof redirectToGitHub>\n\nexport type UserAuthnAction =\n  | RedirectToGitHubAction\n\nfunction isUserAuthnAction(action: Action): action is UserAuthnAction {\n  return userAuthnActionTypes.includes(action.type)\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//                                           _|\n//   _|_|_|  _|  _|_|    _|_|      _|_|_|  _|_|_|_|    _|_|    _|  _|_|    _|_|_|\n// _|        _|_|      _|_|_|_|  _|    _|    _|      _|    _|  _|_|      _|_|\n// _|        _|        _|        _|    _|    _|      _|    _|  _|            _|_|\n//   _|_|_|  _|          _|_|_|    _|_|_|      _|_|    _|_|    _|        _|_|_|\n//\n//\n\nexport const redirectToGitHub = () => <const> ({\n  type: REDIRECT_TO_GITHUB,\n})\n\n//\n//                           _|\n// _|  _|_|    _|_|      _|_|_|  _|    _|    _|_|_|    _|_|    _|  _|_|\n// _|_|      _|_|_|_|  _|    _|  _|    _|  _|        _|_|_|_|  _|_|\n// _|        _|        _|    _|  _|    _|  _|        _|        _|\n// _|          _|_|_|    _|_|_|    _|_|_|    _|_|_|    _|_|_|  _|\n//\n//\n\nexport const createUserAuthnReducer: (initialState: UserAuthnState) => Reducer<UserAuthnState, Action> = (initialState) => (state = initialState, action) => {\n  if (!isUserAuthnAction(action)) {\n    return state\n  }\n\n  switch (action.type) {\n    case REDIRECT_TO_GITHUB: return state\n  }\n}\n\n//\n//                                           _|\n//   _|_|_|    _|_|    _|  _|_|  _|      _|        _|_|_|    _|_|\n// _|_|      _|_|_|_|  _|_|      _|      _|  _|  _|        _|_|_|_|\n//     _|_|  _|        _|          _|  _|    _|  _|        _|\n// _|_|_|      _|_|_|  _|            _|      _|    _|_|_|    _|_|_|\n//\n//\n\n@injectable()\nexport default class UserAuthnService {\n  constructor(\n    @inject('EnvVarConfig') private config: ConfigRegistry\n  ) {}\n\n  public /* for testing */ *redirectToGitHub(): SagaIterator {\n    yield call( // NOTE: Supports IE 11. See also https://github.com/redux-saga/redux-saga/issues/2076\n      (...args: Parameters<typeof globalThis.location.assign>) => globalThis.location.assign(...args),\n      typed<[string]>`${ this.config.get('USER_SERVICE_URL') }/redirect-to-github`\n    )\n  }\n\n  public *rootSaga(): SagaIterator {\n    yield takeEvery(REDIRECT_TO_GITHUB, [this, this.redirectToGitHub])\n  }\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"html {\\n  -webkit-text-size-adjust: none;\\n          text-size-adjust: none;\\n}\\n\\nbody {\\n  transition: background-color 400ms linear;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/classes.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,8BAAsB;UAAtB,sBAAsB;AACxB;;AAEA;EACE,yCAAyC;AAC3C\",\"sourcesContent\":[\"html {\\n  text-size-adjust: none;\\n}\\n\\nbody {\\n  transition: background-color 400ms linear;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n// It's empty as some runtime module handles the default behavior\n__webpack_require__.x = function() {};\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"assets/scripts/\" + ({\"7\":\"formControls\",\"30\":\"chess\",\"120\":\"counter\",\"177\":\"home\",\"571\":\"settings\",\"864\":\"noMatch\",\"916\":\"clock\",\"954\":\"reminder\",\"962\":\"paint\",\"996\":\"info\"}[chunkId] || chunkId) + \".\" + __webpack_require__.h().slice(0, 8) + \".js\";\n};","__webpack_require__.h = function() { return \"dfe0a7fd5495d063f03f\"; }","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = function(module) {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: function() {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl + \"../../\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// Promise = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\nvar deferredModules = [\n\t[14769,614,97,499,371,753,611]\n];\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) {\n\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n\t\t\t\t\t});\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\nvar checkDeferredModules = function() {};\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tvar executeModules = data[3];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0, resolves = [];\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tresolves.push(installedChunks[chunkId][0]);\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\twhile(resolves.length) {\n\t\tresolves.shift()();\n\t}\n\n\t// add entry modules from loaded chunk to deferred list\n\tif(executeModules) deferredModules.push.apply(deferredModules, executeModules);\n\n\t// run deferred modules when all chunks ready\n\treturn checkDeferredModules();\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkreact_app_prototype\"] = self[\"webpackChunkreact_app_prototype\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));\n\nfunction checkDeferredModulesImpl() {\n\tvar result;\n\tfor(var i = 0; i < deferredModules.length; i++) {\n\t\tvar deferredModule = deferredModules[i];\n\t\tvar fulfilled = true;\n\t\tfor(var j = 1; j < deferredModule.length; j++) {\n\t\t\tvar depId = deferredModule[j];\n\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferredModules.splice(i--, 1);\n\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n\t\t}\n\t}\n\tif(deferredModules.length === 0) {\n\t\t__webpack_require__.x();\n\t\t__webpack_require__.x = function() {};\n\t}\n\treturn result;\n}\nvar startup = __webpack_require__.x;\n__webpack_require__.x = function() {\n\t// reset startup function so it can be called again when more startup code is added\n\t__webpack_require__.x = startup || (function() {});\n\treturn (checkDeferredModules = checkDeferredModulesImpl)();\n};","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"sourceRoot":""}