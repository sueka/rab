(self.webpackChunkreact_app_prototype=self.webpackChunkreact_app_prototype||[]).push([[962],{91091:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return K}});var a=t(67294),l=t(64593),r=t(31753),c=t(63038),u=t.n(c),o=t(64436),s=t(30553),i=t(96019),f=t(40074),h=t(67162),v=t(97127),p=t(67154),m=t.n(p),d=t(17109),E=t(34575),C=t.n(E),g=t(93913),b=t.n(g),k=t(2205),y=t.n(k),Z=t(78585),x=t.n(Z),A=t(29754),w=t.n(A);function R(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=w()(e);if(n){var l=w()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return x()(this,t)}}var P=function(e){y()(t,e);var n=R(t);function t(e){var a,l=e.red,r=e.green,c=e.blue,u=e.alpha;return C()(this,t),(a=n.call(this)).red=l,a.green=r,a.blue=c,a.alpha=u,a}return b()(t,[{key:"hashCode",value:function(){var e=0;return e=31*(e=31*(e=31*(e=31*e+this.red.hashCode())+this.green.hashCode())+this.blue.hashCode())+this.alpha.hashCode()}}]),t}(t(18982).Z);function _(e,n){var t=e.x,a=e.y,l=n.getImageData(t,a,1,1),r=u()(l.data,4),c=r[0],o=r[1],s=r[2],i=r[3];return new P({red:c,green:o,blue:s,alpha:i})}var S=t(93379),B=t.n(S),D=t(91596),O={insert:"head",singleton:!1},q=(B()(D.Z,O),D.Z.locals||{}),M=function(e){var n=e.width,t=e.height,l=e.lineWidth,r=e.innerRef,c=e.context,o=e.tool,s=(0,a.useState)(!1),i=u()(s,2),f=i[0],h=i[1],v=(0,a.useState)(null),p=u()(v,2),m=p[0],E=p[1],C=(0,a.useCallback)((function(e){"pen"===o&&((0,d.N)(m),h(!0),E({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY}))}),[o,m]),g=(0,a.useCallback)((function(e){f&&((0,d.s)(c),(0,d.s)(m),c.lineWidth=l*e.pressure,c.lineJoin="round",c.beginPath(),c.moveTo(m.x,m.y),c.lineTo(e.nativeEvent.offsetX,e.nativeEvent.offsetY),c.stroke(),E({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY}))}),[l,c,f,m]),b=(0,a.useCallback)((function(){h(!1),E(null)}),[]),k=(0,a.useCallback)((function(){h(!1),E(null)}),[]),y=(0,a.useCallback)((function(e){"bucket"===o&&((0,d.s)(c),function(e,n,t,a){(0,d.s)(a);var l=[],r=_(e,a);for(l.push(e);0!==l.length;){var c=l.shift();(0,d.s)(c);var u=_(c,a);r.equals(u)&&(a.fillRect(c.x,c.y,1,1),c.x>0&&l.push({x:c.x-1,y:c.y}),c.y>0&&l.push({x:c.x,y:c.y-1}),c.x<n-1&&l.push({x:c.x+1,y:c.y}),c.y<t-1&&l.push({x:c.x,y:c.y+1}))}}({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY},n,t,c))}),[n,t,c,o]);return a.createElement("canvas",{ref:r,className:q.Canvas,width:n,height:t,onPointerDown:C,onPointerMove:g,onPointerUp:b,onPointerLeave:k,onClick:y})},T=(0,a.forwardRef)((function(e,n){return a.createElement(M,m()({innerRef:n},e))})),X=t(282),Y=function(e){var n=e.children,t=e.width,l=e.height,r=e.context,c=(0,a.useCallback)((function(){null==r||r.clearRect(0,0,t,l)}),[r,t,l]);return a.createElement(X.Z,{onClick:c},n)},I=t(74540),U=t(20590),W=function(e){var n=e.value,t=e.onChange;return a.createElement(o.Z,null,a.createElement(h.Z,{name:"tool",value:n,onChange:t},a.createElement(f.Z,{icon:a.createElement(I.Z,null),checkedIcon:a.createElement(I.Z,null),value:"pen"}),a.createElement(f.Z,{icon:a.createElement(U.Z,null),checkedIcon:a.createElement(U.Z,null),value:"bucket"})))},F=t(9192),N=t(85315),J=(0,N.vU)({clear:{id:"src.components.Paint.clear",defaultMessage:"Clear"}}),L=(0,F.gB)("butt","round","square"),j=(0,F.gB)("pen","bucket"),z=function(){var e=(0,a.useState)(),n=u()(e,2),t=n[0],l=n[1],r=(0,a.useState)("round"),c=u()(r,2),p=c[0],m=c[1],d=(0,a.useState)("pen"),E=u()(d,2),C=E[0],g=E[1],b=(0,a.useCallback)((function(e){l(null==e?void 0:e.getContext("2d"))}),[]),k=(0,a.useCallback)((function(e,n){j(n)&&g(n)}),[]),y=(0,a.useCallback)((function(e){L(e.target.value)&&m(e.target.value)}),[]);return(0,a.useEffect)((function(){null!=t&&(t.lineCap=p)}),[t,p]),a.createElement(a.Fragment,null,a.createElement(T,{width:320,height:320,lineWidth:10,ref:b,context:t,tool:C}),a.createElement(Y,{width:320,height:320,context:t},a.createElement(v.Z,J.clear)),a.createElement(W,{value:C,onChange:k}),a.createElement(o.Z,{disabled:"pen"!==C},a.createElement(i.Z,null,"line cap"),a.createElement(h.Z,{name:"lineCap",value:p,onChange:y},a.createElement(s.Z,{value:"butt",label:"butt",control:a.createElement(f.Z,null)}),a.createElement(s.Z,{value:"round",label:"round",control:a.createElement(f.Z,null)}),a.createElement(s.Z,{value:"square",label:"square",control:a.createElement(f.Z,null)}))))},G=t(86631),H=(0,N.vU)({paint:{id:"src.components.App.PaintPage.paint",defaultMessage:"Paint"}}),K=(0,G.D)((function(){var e=(0,r.Z)().formatMessage;return a.createElement(a.Fragment,null,a.createElement(l.Z,{title:e(H.paint)}),a.createElement(z,null))}))},91596:function(e,n,t){"use strict";var a=t(94015),l=t.n(a),r=t(23645),c=t.n(r)()(l());c.push([e.id,".src-components-Canvas-classes__Canvas--3i4gg {\n  background-color: white; /* TODO */\n}\n","",{version:3,sources:["webpack://./src/components/Canvas/classes.css"],names:[],mappings:"AAAA;EACE,uBAAuB,EAAE,SAAS;AACpC",sourcesContent:[".Canvas {\n  background-color: white; /* TODO */\n}\n"],sourceRoot:""}]),c.locals={Canvas:"src-components-Canvas-classes__Canvas--3i4gg"},n.Z=c}}]);
//# sourceMappingURL=paint.0824c52a.js.map