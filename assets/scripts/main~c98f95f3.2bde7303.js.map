{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib/typed.ts","webpack:///./src/lib/trait/HashableEq.ts","webpack:///./src/lib/trait/Eq.ts","webpack:///./src/lib/errors/AbstractError.ts","webpack:///./src/lib/boni/redux-saga/effects/takeEvery.ts","webpack:///./src/domain/vo/Coordinates.ts","webpack:///./src/lib/extensions/Iterable/zipIterables.ts","webpack:///./src/lib/extensions/Iterator/zipIterators.ts","webpack:///./src/redux/modules/counter.ts","webpack:///./src/redux/modules/chess.ts","webpack:///./src/utils/chess/getCoordinatesAttackedBy.ts","webpack:///./src/lib/delay.ts","webpack:///./src/domain/vo/TaskId.ts","webpack:///./src/domain/vo/Id.ts","webpack:///./src/domain/vo/ValueObject.ts","webpack:///./src/lib/middleware/invariantMiddleware/combineInvariants.ts","webpack:///./src/redux/index.ts","webpack:///./src/lib/validators/intlValidators.ts","webpack:///./src/redux/modules/localeSelector.ts","webpack:///./src/redux/modules/io.ts","webpack:///./src/lib/errors/LogicError.ts","webpack:///./src/redux/modules/reminder.ts","webpack:///./src/lib/createUrlOrPathAbempty.ts","webpack:///./src/lib/polyfills/Object.fromEntries.ts","webpack:///./src/lib/fetch.ts","webpack:///./src/lib/extensions/Record/mapValues.ts","webpack:///./src/contexts/ThemeProviderContext.ts","webpack:///./src/lib/contexts/IntlProviderContext.ts","webpack:///./src/lib/guards/stringGuards.ts","webpack:///./src/lib/extensions/Array/conj.ts","webpack:///./src/lib/extensions/String/stripMargin.ts","webpack:///./src/lib/extensions/String/trimEols.ts","webpack:///./src/lib/validators/commonValidators.ts","webpack:///./src/lib/extensions/Eq/equalsChessmen.ts","webpack:///./src/lib/validators/ValidationError.ts","webpack:///./src/domain/entity/Entity.ts","webpack:///./src/domain/entity/Task.ts","webpack:///./src/lib/extensions/Unknown/yieldThis.ts","webpack:///./src/lib/extensions/Number/hashCode.ts","webpack:///./src/lib/errors/UnreachableError.ts","webpack:///./src/lib/components/Route/index.tsx","webpack:///./src/components/App/index.tsx","webpack:///./src/lib/components/IntlProvider/index.tsx","webpack:///./src/components/IntlProvider/index.tsx","webpack:///./src/configureTheme.ts","webpack:///./src/components/ThemeProvider/index.tsx","webpack:///./src/lib/middleware/invariantMiddleware/createInvariantMiddleware.ts","webpack:///./src/configureStore.ts","webpack:///./src/createProvider.tsx","webpack:///./src/lib/extensions/Boolean/Boolean.prototype.hashCode.ts","webpack:///./src/lib/extensions/Boolean/hashCode.ts","webpack:///./src/lib/extensions/Number/Number.prototype.hashCode.ts","webpack:///./src/lib/extensions/String/String.prototype.hashCode.ts","webpack:///./src/lib/extensions/String/hashCode.ts","webpack:///./src/index.tsx"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","5","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","typed","template","substitutions","zipIterables","substitution","segment","String","HashableEq","that","this","canEqual","hashCode","equals","AbstractError","setPrototypeOf","takeEvery","pattern","ctx","worker","originalTakeEvery","action","Coordinates","file","rank","xs","ys","iterator","genIt","x","next","y","done","values","zipIterators","counterInvariant","state","count","RESET","INCREMENT_IF_ODD","INCREMENT_ASYNC","INCREMENT","DECREMENT","counterActionTypes","isCounterAction","includes","reset","incrementIfOdd","incrementAsync","ms","payload","increment","decrement","createCounterReducer","initialState","CounterService","injectable","select","counter","put","delay","incrementIfOddSaga","incrementAsyncSaga","chessInvariant","board","picking","targets","chessmen","has","source","expected","coord","actual","equalsChessmen","existsCoordinatedChessman","chessman","RESET_BOARD","HALF_MOVE","PICK_CHESSMAN","PUT_CHESSMAN","RELEASE_CHESSMAN","REMOVE_CHESSMAN","SET_TARGETS","chessActionTypes","isChessAction","resetBoard","halfMove","pickChessman","putChessman","releaseChessman","setTargets","createChessReducer","Map","symbol","hasAdvancedTwoSquares","set","delete","ChessService","chess","halfMoveSaga","pickChessmanSaga","res","TaskId","test","serialized","Id","checkInvariant","combineInvariants","invariants","entries","every","moduleName","moduleState","Service","chessService","counterService","ioService","localeSelectorService","reminderService","inject","ReminderService","LocaleSelectorService","IoService","fork","rootSaga","createReducer","history","combineReducers","router","connectRouter","io","createIoReducer","localeSelector","createLocaleSelectorReducer","reminder","createReminderReducer","invariant","asFormats","asObject","input","number","optional","recordOf","asIntlNumberFormatOptions","date","asIntlDateTimeFormatOptions","time","localeMatcher","asUnionOf","style","currency","asString","currencyDisplay","useGrouping","asBoolean","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","unionOf","SELECT_LOCALE","SET_LOCALE","SET_FORMATS","SET_MESSAGES","PUSH_ERROR","localeSelectorActionTypes","isLocaleSelectorAction","selectLocale","locale","setLocale","setFormats","formats","setMessages","messages","errors","config","fetch","method","parameterizedEndpoint","params","body","TypeError","selectLocaleSaga","UPDATE_NOW","START_CLOCK","STOP_CLOCK","SET_NOW","ioActionTypes","isIoAction","updateNow","now","startClockTask","Date","getMilliseconds","cancel","startClockSaga","updateNowSaga","stopClockSaga","LogicError","GET_TASKS_ASYNC","SET_TASKS","ADD_TASK_ASYNC","CHANGE_TASK_CONTENT_ASYNC","MARK_TASK_AS_DONE_ASYNC","MARK_TASK_AS_UNDONE_ASYNC","DELETE_TASK_ASYNC","MOVE_TASK","PUSH_TASK","MARK_TASK_AS_DONE","MARK_TASK_AS_UNDONE","REMOVE_TASK","CHECK_TASK","REMOVE_ERROR","reminderActionTypes","isReminderAction","getTasksAsync","setTasks","tasks","addTaskAsync","changeTaskContentAsync","taskId","content","markTaskAsDoneAsync","markTaskAsUndoneAsync","deleteTaskAsync","moveTask","sourceIndex","targetIndex","pushTask","task","markTaskAsDone","markTaskAsUndone","removeTask","checkTask","pushError","errorId","findIndex","id","update","with","remove","insert","taskRepository","list","Task","v4","store","findById","stateTasks","stateTask","find","getTasksAsyncSaga","addTaskAsyncSaga","changeTaskContentAsyncSaga","markTaskAsDoneAsyncSaga","markTaskAsUndoneAsyncSaga","deleteTaskAsyncSaga","checkTaskSaga","dropDummyOrigin","RegExp","exec","PathAbempty","pathAbempty","restArgs","_url","URL","toJSON","hash","href","origin","pathname","search","searchParams","fromEntries","isEmpty","keys","toJson","Array","isArray","map","json","f","mapValues","reduce","toRecord","toQueryMap","query","go","q","tail","goWithArray","index","goWithObject","member","buildRequestInfo","url","args","urlOrPathAbempty","isUrl","createUrlOrPathAbempty","pathToRegexp","urlSearchParams","URLSearchParams","forEach","append","toString","buildRequestInit","headers","formData","FormData","a","requestInfo","requestInit","response","createContext","dark","setDark","availableLocales","_error","conj","separator","lastSeparator","lastX","pop","UnreachableError","join","generateLineWithEolIterator","eols","eolPattern","eolCharPattern","eol","stripMargin","marginChar","stripMargin2","stripMargin1","line","matches","groups","marginCharCandidate","stripped","cs","lineBuffer","eolBuffer","some","startsWith","trimEols","replace","trimTrailingEols","trimLeadingEols","failSafe","asT","right","ValidationError","left","leftOnly","isLeft","named","asU","u","isRight","output","options","JSON","stringify","className","Entity","asIdSerializedTask","_content","_done","serialize","parse","deserialize","decorate","buf","v","Buffer","allocUnsafe","writeDoubleBE","JSBI","add","leftShift","BigInt","readUInt32BE","Number","bitwiseAnd","signedRightShift","Route","Component","component","restProps","props","Suspense","fallback","HomePage","React","lazy","ChessPage","CounterPage","InfoPage","PaintPage","ReminderPage","NoMatch","hot","location","useLocation","to","exact","strict","sensitive","path","IntlProvider","IntlProviderContext","Provider","textComponent","Fragment","connect","configureTheme","createMuiTheme","typography","fontFamily","MuiLink","variant","MuiButton","MuiFormControl","MuiTextField","MuiCheckbox","color","palette","primary","teal","secondary","indigo","ThemeProvider","children","defaultDark","useState","theme","useMemo","ThemeProviderContext","createInvariantMiddleware","reducer","oldState","getState","newState","composeEnhancers","createLogger","diff","collapsed","compose","createProvider","saga","recursionDepth","hasError","handleError","cause","setState","sagaMiddlewareOptions","sagaMiddleware","createSagaMiddleware","invariantMiddleware","storeEnhancers","applyMiddleware","routerMiddleware","createStore","configureStore","onError","run","toPromise","catch","renderError","getDerivedStateFromError","Boolean","charCodeAt","containerImport","List","ThemedApp","useMediaQuery","Main","container","useCallback","service","titleTemplate","defaultTitle","backend","HTML5Backend","then","default","createBrowserHistory","basename","process","ReactDOM","render","getElementById"],"mappings":"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","file":"assets/scripts/main~c98f95f3.2bde7303.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t5: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"assets/scripts/\" + ({\"0\":\"vendors~chess~counter~home~info~noMatch~paint~reminder~253ae210\",\"1\":\"chess~21833f8f\",\"2\":\"counter~31ecd969\",\"3\":\"home~31ecd969\",\"4\":\"info~31ecd969\",\"6\":\"noMatch~21833f8f\",\"7\":\"paint~21833f8f\",\"8\":\"reminder~21833f8f\",\"12\":\"vendors~paint~9acc357d\",\"13\":\"vendors~reminder~253ae210\"}[chunkId]||chunkId) + \".\" + \"2bde7303\" + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([886,10,9,11]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import zipIterables from './extensions/Iterable/zipIterables'\n\n/**\n * Type substitutions of a template literal.  It is often used as a tag function.\n *\n * @returns a string of alternate elements of template and substitutions.\n */\nexport default function typed<T extends unknown[]>(template: TemplateStringsArray, ...substitutions: T): string {\n  // tslint:disable-next-line:no-let\n  let result = template[0]\n\n  // tslint:disable-next-line:no-loop-statement\n  for (const [substitution, segment] of zipIterables(substitutions, template.slice(1))) {\n    result += String(substitution)\n    result += segment\n  }\n\n  return result\n}\n","import Eq from './Eq'\n\n/**\n * [[Eq]] であり、さらにハッシュ関数 [[hashCode]] を持つ。\n */\nexport default abstract class HashableEq extends Eq implements Class.Hashable {\n  protected canEqual(that: Eq): that is HashableEq {\n    return that instanceof HashableEq\n  }\n\n  /**\n   * {this} と {that} が同値かどうかを返す。\n   *\n   * @implNote このメソッドをオーバーライドする場合、 `this.hashCode() === that.hashCode()` でなければ FALSE を返すように実装しなければならない。\n   */\n  public equals(that: Eq): boolean {\n    return this.canEqual(that) && that.canEqual(this) && this.hashCode() === that.hashCode()\n  }\n\n  public abstract hashCode(): number // int\n}\n","// TODO: PartialEq, Congruence 等検討\n\n/**\n * 同値風関係 [[equals]] と、異なる [[Eq]] のサブクラス間の同値風関係を表現するための補助メソッド [[canEqual]] を持つ。\n *\n * @implNote [[equals]] をオーバーライドする場合、 [[canEqual]] もオーバーライドしなければならない。\n */\nexport default abstract class Eq implements Class.Eq {\n  /**\n   * {this} と {that} が同値でありうるかどうかを返す。\n   *\n   * @implNote このメソッドをサブクラスでオーバーライドする場合、 {that} がそのクラスのインスタンスであるかどうかを返すように実装しなければならない。\n   */\n  protected abstract canEqual(that: Eq): boolean\n\n  /**\n   * {this} と {that} が同値かどうかを返す。\n   *\n   * @implNote このメソッドをオーバーライドする場合、 `this.canEqual(that) && that.canEqual(this)` でなければ FALSE を返すように実装しなければならない。\n   */\n  public abstract equals(that: Eq): boolean\n\n  /**\n   * @final\n   */\n  public isNotEqualTo(that: Eq): boolean {\n    return !this.equals(that)\n  }\n}\n","export default abstract class AbstractError extends Error {\n  constructor(public message = '') {\n    super(message)\n\n    this.name = new.target.name\n\n    Object.setPrototypeOf(this, new.target.prototype)\n  }\n}\n","import { Action } from 'redux'\nimport { ActionPattern, ForkEffect, takeEvery as originalTakeEvery } from 'redux-saga/effects'\n\n/**\n * Same as `takeEvery(pattern, worker)` but supports passing a `this` context to `worker`.\n * This is useful to invoke object methods.\n *\n * derived from https://github.com/redux-saga/redux-saga/blob/0668e9149c8aa847cbfad9f03883b6b5b2946042/packages/core/effects.d.ts#L630-L633\n */\nexport default function takeEvery<\n  A extends Action,\n  Ctx,\n>(\n  pattern: ActionPattern<A>,\n  [ctx, worker]: [Ctx, (this: Ctx, action: A) => unknown]\n): ForkEffect<never> {\n  return originalTakeEvery(pattern, (action: A) => worker.call(ctx, action))\n}\n","import HashableEq from '~/lib/trait/HashableEq'\n\nexport default interface Coordinates extends Chess.Coordinates {} // tslint:disable-line:no-empty-interface\n\nexport default class Coordinates extends HashableEq implements Class.ValueObject<Chess.Coordinates> {\n  constructor({ file, rank }: Chess.Coordinates) {\n    super()\n\n    this.file = file\n    this.rank = rank\n  }\n\n  public hashCode() {\n    // tslint:disable-next-line:no-let\n    let result = 0\n\n    result = 31 * result + this.file.hashCode()\n    result = 31 * result + this.rank.hashCode()\n\n    return result\n  }\n}\n","import zipIterators from '~/lib/extensions/Iterator/zipIterators'\n\nexport default function zipIterables<A, B>(xs: Iterable<A>, ys: Iterable<B>): Iterable<[A, B]> {\n  return {\n    [Symbol.iterator]() {\n      return zipIterators(xs[Symbol.iterator](), ys[Symbol.iterator]())\n    },\n  }\n}\n","export default function zipIterators<A, B>(xs: Iterator<A>, ys: Iterator<B>): Iterator<[A, B]> {\n  function* genIt() {\n    // tslint:disable-next-line:no-loop-statement\n    while (true) {\n      const x = xs.next()\n      const y = ys.next()\n\n      if (x.done || y.done) { // tslint:disable-line:strict-boolean-expressions\n        break\n      }\n\n      const values: [A, B] = [x.value, y.value]\n\n      yield values\n    }\n  }\n\n  return genIt()\n}\n","import { injectable } from 'inversify'\nimport { Action, Reducer } from 'redux'\nimport { SagaIterator } from 'redux-saga'\nimport { call, put, select } from 'redux-saga/effects'\n\nimport { takeEvery } from '~/lib/boni/redux-saga/effects'\nimport delay from '~/lib/delay'\nimport { State } from '~/redux'\n\n//\n//             _|                  _|\n//   _|_|_|  _|_|_|_|    _|_|_|  _|_|_|_|    _|_|\n// _|_|        _|      _|    _|    _|      _|_|_|_|\n//     _|_|    _|      _|    _|    _|      _|\n// _|_|_|        _|_|    _|_|_|      _|_|    _|_|_|\n//\n//\n\nexport interface CounterState {\n  count: number\n}\n\nexport function counterInvariant(state: CounterState) {\n  return state.count >= 0\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//   _|\n// _|_|_|_|  _|    _|  _|_|_|      _|_|      _|_|_|\n//   _|      _|    _|  _|    _|  _|_|_|_|  _|_|\n//   _|      _|    _|  _|    _|  _|            _|_|\n//     _|_|    _|_|_|  _|_|_|      _|_|_|  _|_|_|\n//                 _|  _|\n//             _|_|    _|\n\nexport /* for testing */ const RESET = '@@react-app-prototype/counter/RESET'\nexport /* for testing */ const INCREMENT_IF_ODD = '@@react-app-prototype/counter/INCREMENT_IF_ODD'\nexport /* for testing */ const INCREMENT_ASYNC = '@@react-app-prototype/counter/INCREMENT_ASYNC'\nexport /* for testing */ const INCREMENT = '@@react-app-prototype/counter/INCREMENT'\nexport /* for testing */ const DECREMENT = '@@react-app-prototype/counter/DECREMENT'\n\nconst counterActionTypes = [\n  RESET,\n  INCREMENT_IF_ODD,\n  INCREMENT_ASYNC,\n  INCREMENT,\n  DECREMENT,\n]\n\ntype ResetAction = ReturnType<typeof reset>\ntype IncrementIfOddAction = ReturnType<typeof incrementIfOdd>\ntype IncrementAsyncAction = ReturnType<typeof incrementAsync>\ntype IncrementAction = ReturnType<typeof increment>\ntype DecrementAction = ReturnType<typeof decrement>\n\nexport type CounterAction =\n  | ResetAction\n  | IncrementIfOddAction\n  | IncrementAsyncAction\n  | IncrementAction\n  | DecrementAction\n\nfunction isCounterAction(action: Action): action is CounterAction {\n  return counterActionTypes.includes(action.type)\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//                                           _|\n//   _|_|_|  _|  _|_|    _|_|      _|_|_|  _|_|_|_|    _|_|    _|  _|_|    _|_|_|\n// _|        _|_|      _|_|_|_|  _|    _|    _|      _|    _|  _|_|      _|_|\n// _|        _|        _|        _|    _|    _|      _|    _|  _|            _|_|\n//   _|_|_|  _|          _|_|_|    _|_|_|      _|_|    _|_|    _|        _|_|_|\n//\n//\n\nexport const reset = () => <const> ({\n  type: RESET,\n})\n\nexport const incrementIfOdd = () => <const> ({\n  type: INCREMENT_IF_ODD,\n})\n\nexport const incrementAsync = (ms: number) => <const> ({\n  type: INCREMENT_ASYNC,\n  payload: {\n    ms,\n  },\n})\n\nexport const increment = () => <const> ({\n  type: INCREMENT,\n})\n\nexport const decrement = () => <const> ({\n  type: DECREMENT,\n})\n\n//\n//                           _|\n// _|  _|_|    _|_|      _|_|_|  _|    _|    _|_|_|    _|_|    _|  _|_|\n// _|_|      _|_|_|_|  _|    _|  _|    _|  _|        _|_|_|_|  _|_|\n// _|        _|        _|    _|  _|    _|  _|        _|        _|\n// _|          _|_|_|    _|_|_|    _|_|_|    _|_|_|    _|_|_|  _|\n//\n//\n\nexport const createCounterReducer: (initialState: CounterState) => Reducer<CounterState, Action> = (initialState) => (state = initialState, action) => {\n  if (!isCounterAction(action)) {\n    return state\n  }\n\n  switch (action.type) {\n    case RESET: return initialState\n    case INCREMENT_IF_ODD:\n    case INCREMENT_ASYNC: return state\n    case INCREMENT: return {\n      ...state,\n      count: state.count + 1,\n    }\n    case DECREMENT: return {\n      ...state,\n      count: state.count - 1,\n    }\n  }\n}\n\n//\n//                                           _|\n//   _|_|_|    _|_|    _|  _|_|  _|      _|        _|_|_|    _|_|\n// _|_|      _|_|_|_|  _|_|      _|      _|  _|  _|        _|_|_|_|\n//     _|_|  _|        _|          _|  _|    _|  _|        _|\n// _|_|_|      _|_|_|  _|            _|      _|    _|_|_|    _|_|_|\n//\n//\n\n@injectable()\nexport class CounterService {\n  public /* for testing */ *incrementIfOddSaga(): SagaIterator {\n    const { counter: { count } }: State = yield select()\n\n    if (count % 2 !== 0) {\n      yield put(increment())\n    }\n  }\n\n  public /* for testing */ *incrementAsyncSaga({ payload: { ms } }: IncrementAsyncAction): SagaIterator {\n    yield call(delay, ms)\n    yield put(increment())\n  }\n\n  public *rootSaga(): SagaIterator {\n    yield takeEvery(INCREMENT_IF_ODD, [this, this.incrementIfOddSaga])\n    yield takeEvery(INCREMENT_ASYNC, [this, this.incrementAsyncSaga])\n  }\n}\n","import { Map } from 'immutable'\nimport { injectable } from 'inversify'\nimport { Action, Reducer } from 'redux'\nimport { SagaIterator } from 'redux-saga'\nimport { put, select } from 'redux-saga/effects'\n\nimport Coordinates from '~/domain/vo/Coordinates'\nimport { takeEvery } from '~/lib/boni/redux-saga/effects'\nimport equalsChessmen from '~/lib/extensions/Eq/equalsChessmen'\nimport { State } from '~/redux'\nimport getCoordinatesAttackedBy from '~/utils/chess/getCoordinatesAttackedBy'\n\n//\n//             _|                  _|\n//   _|_|_|  _|_|_|_|    _|_|_|  _|_|_|_|    _|_|\n// _|_|        _|      _|    _|    _|      _|_|_|_|\n//     _|_|    _|      _|    _|    _|      _|\n// _|_|_|        _|_|    _|_|_|      _|_|    _|_|_|\n//\n//\n\nexport interface ChessState {\n  board: Chess.Chessboard\n  picking?: {\n    chessman: Chess.Chessman\n    source: Chess.Coordinates\n  } | null\n  targets?: Chess.Coordinates[] | null\n}\n\n/**\n * 次の条件を満たすときに TRUE を返し、そうでないときに FALSE を返す。\n *\n * - {picking} が存在するならば、 {board} 上の {picking}.source に何らかの駒が存在するならば、その駒は {picking}.chessman であり、かつ\n * - {picking} が存在しないならば、 {targets} も存在しない\n *\n * 言い換えると、\n *\n * - {picking} が存在せず、かつ {targets} も存在しないか、\n * - {picking} が存在し、かつ {board} 上の {picking}.source に駒が存在しないか、または // NOTE: HALF_MOVE では、まず {board} 上の {picking}.source に存在する駒を取り除き、その後、取り除いた駒を {targets} に割り当てるため、一時的にこの状態になる。\n * - {picking} が存在し、 {board} 上の {picking}.source に何らかの駒が存在し、かつその駒は {picking}.chessman である\n */\nexport function chessInvariant({ board, picking, targets }: ChessState) {\n  return (\n    (picking == null || (!board.chessmen.has(new Coordinates(picking.source)) || existsCoordinatedChessman(picking.chessman, picking.source, board))) && // any picking → (any chessman at picking.source on board → chessman at picking.source on board = picking.chessman)\n    (picking != null || targets == null) // no picking → no targets\n  )\n}\n\n/**\n * {board} 上の {coord} にある駒が {expected} ならば TRUE を返し、そうでなければ FALSE を返す。\n */\nfunction existsCoordinatedChessman(expected: Chess.Chessman, coord: Chess.Coordinates, board: Chess.Chessboard): boolean {\n  const actual = board.chessmen.get(new Coordinates(coord))\n\n  return actual !== undefined && equalsChessmen(actual, expected)\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//   _|\n// _|_|_|_|  _|    _|  _|_|_|      _|_|      _|_|_|\n//   _|      _|    _|  _|    _|  _|_|_|_|  _|_|\n//   _|      _|    _|  _|    _|  _|            _|_|\n//     _|_|    _|_|_|  _|_|_|      _|_|_|  _|_|_|\n//                 _|  _|\n//             _|_|    _|\n\nconst RESET_BOARD = '@@react-app-base/chess/RESET_BOARD'\nconst HALF_MOVE = '@@react-app-base/chess/HALF_MOVE' // neither castle nor capture pawn en passant\nconst PICK_CHESSMAN = '@@react-app-base/chess/PICK_CHESSMAN'\nconst PUT_CHESSMAN = '@@react-app-base/chess/PUT_CHESSMAN'\nconst RELEASE_CHESSMAN = '@@react-app-base/chess/RELEASE_CHESSMAN'\nconst REMOVE_CHESSMAN = '@@react-app-base/chess/REMOVE_CHESSMAN'\nconst SET_TARGETS = '@@react-app-base/chess/SET_TARGETS'\n\nconst chessActionTypes = [\n  RESET_BOARD,\n  HALF_MOVE,\n  PICK_CHESSMAN,\n  PUT_CHESSMAN,\n  RELEASE_CHESSMAN,\n  REMOVE_CHESSMAN,\n  SET_TARGETS,\n]\n\ntype ResetBoardAction = ReturnType<typeof resetBoard> // TODO: chess 960\ntype HalfMoveAction = ReturnType<typeof halfMove>\ntype PickChessmanAction = ReturnType<typeof pickChessman>\ntype PutChessmanAction = ReturnType<typeof putChessman>\ntype ReleaseChessmanAction = ReturnType<typeof releaseChessman>\ntype RemoveChessmanAction = ReturnType<typeof removeChessman>\ntype SetTargets = ReturnType<typeof setTargets>\n\nexport type ChessAction =\n  | ResetBoardAction\n  | HalfMoveAction\n  | PickChessmanAction\n  | PutChessmanAction\n  | ReleaseChessmanAction\n  | RemoveChessmanAction\n  | SetTargets\n\nfunction isChessAction(action: Action): action is ChessAction {\n  return chessActionTypes.includes(action.type)\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//                                           _|\n//   _|_|_|  _|  _|_|    _|_|      _|_|_|  _|_|_|_|    _|_|    _|  _|_|    _|_|_|\n// _|        _|_|      _|_|_|_|  _|    _|    _|      _|    _|  _|_|      _|_|\n// _|        _|        _|        _|    _|    _|      _|    _|  _|            _|_|\n//   _|_|_|  _|          _|_|_|    _|_|_|      _|_|    _|_|    _|        _|_|_|\n//\n//\n\nexport const resetBoard = () => <const> ({\n  type: RESET_BOARD,\n})\n\nexport const halfMove = (chessman: Chess.Chessman, source: Chess.Coordinates, target: Chess.Coordinates) => <const> ({\n  type: HALF_MOVE,\n  payload: {\n    chessman,\n    source,\n    target,\n  },\n})\n\nexport const pickChessman = (chessman: Chess.Chessman, source: Chess.Coordinates) => <const> ({\n  type: PICK_CHESSMAN,\n  payload: {\n    chessman,\n    source,\n  },\n})\n\nexport const putChessman = (chessman: Chess.Chessman, target: Chess.Coordinates) => <const> ({\n  type: PUT_CHESSMAN,\n  payload: {\n    chessman,\n    target,\n  },\n})\n\nexport const releaseChessman = () => <const> ({\n  type: RELEASE_CHESSMAN,\n})\n\nexport const removeChessman = (coord: Chess.Coordinates) => <const> ({\n  type: REMOVE_CHESSMAN,\n  payload: {\n    coord,\n  },\n})\n\nexport const setTargets = (targets: Chess.Coordinates[]) => <const> ({\n  type: SET_TARGETS,\n  payload: {\n    targets,\n  },\n})\n\n//\n//                           _|\n// _|  _|_|    _|_|      _|_|_|  _|    _|    _|_|_|    _|_|    _|  _|_|\n// _|_|      _|_|_|_|  _|    _|  _|    _|  _|        _|_|_|_|  _|_|\n// _|        _|        _|    _|  _|    _|  _|        _|        _|\n// _|          _|_|_|    _|_|_|    _|_|_|    _|_|_|    _|_|_|  _|\n//\n//\n\nexport const createChessReducer: (initialState: ChessState) => Reducer<ChessState, Action> = (initialState) => (state = initialState, action) => {\n  if (!isChessAction(action)) {\n    return state\n  }\n\n  switch (action.type) {\n    case RESET_BOARD: return {\n      ...state,\n      board: {\n        chessmen: Map([\n          [new Coordinates({ rank: 1, file: 1 }), { symbol: '♖' }],\n          [new Coordinates({ rank: 1, file: 2 }), { symbol: '♘' }],\n          [new Coordinates({ rank: 1, file: 3 }), { symbol: '♗' }],\n          [new Coordinates({ rank: 1, file: 4 }), { symbol: '♕' }],\n          [new Coordinates({ rank: 1, file: 5 }), { symbol: '♔' }],\n          [new Coordinates({ rank: 1, file: 6 }), { symbol: '♗' }],\n          [new Coordinates({ rank: 1, file: 7 }), { symbol: '♘' }],\n          [new Coordinates({ rank: 1, file: 8 }), { symbol: '♖' }],\n          [new Coordinates({ rank: 2, file: 1 }), { symbol: '♙', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 2, file: 2 }), { symbol: '♙', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 2, file: 3 }), { symbol: '♙', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 2, file: 4 }), { symbol: '♙', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 2, file: 5 }), { symbol: '♙', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 2, file: 6 }), { symbol: '♙', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 2, file: 7 }), { symbol: '♙', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 2, file: 8 }), { symbol: '♙', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 7, file: 1 }), { symbol: '♟', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 7, file: 2 }), { symbol: '♟', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 7, file: 3 }), { symbol: '♟', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 7, file: 4 }), { symbol: '♟', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 7, file: 5 }), { symbol: '♟', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 7, file: 6 }), { symbol: '♟', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 7, file: 7 }), { symbol: '♟', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 7, file: 8 }), { symbol: '♟', hasAdvancedTwoSquares: false }],\n          [new Coordinates({ rank: 8, file: 1 }), { symbol: '♜' }],\n          [new Coordinates({ rank: 8, file: 2 }), { symbol: '♞' }],\n          [new Coordinates({ rank: 8, file: 3 }), { symbol: '♝' }],\n          [new Coordinates({ rank: 8, file: 4 }), { symbol: '♛' }],\n          [new Coordinates({ rank: 8, file: 5 }), { symbol: '♚' }],\n          [new Coordinates({ rank: 8, file: 6 }), { symbol: '♝' }],\n          [new Coordinates({ rank: 8, file: 7 }), { symbol: '♞' }],\n          [new Coordinates({ rank: 8, file: 8 }), { symbol: '♜' }],\n        ]),\n      },\n    }\n    case HALF_MOVE: return state\n    case PICK_CHESSMAN: return {\n      ...state,\n      picking: {\n        chessman: action.payload.chessman,\n        source: action.payload.source,\n      },\n    }\n    case PUT_CHESSMAN: return {\n      ...state,\n      board: {\n        ...state.board,\n        chessmen: state.board.chessmen.set(new Coordinates(action.payload.target), action.payload.chessman), // TODO\n      },\n      picking: null,\n      targets: null,\n    }\n    case RELEASE_CHESSMAN: return {\n      ...state,\n      picking: null,\n      targets: null,\n    }\n    case REMOVE_CHESSMAN: return {\n      ...state,\n      board: {\n        ...state.board,\n        chessmen: state.board.chessmen.delete(new Coordinates(action.payload.coord)), // TODO\n      },\n    }\n    case SET_TARGETS: return {\n      ...state,\n      targets: action.payload.targets,\n    }\n  }\n}\n\n//\n//                                           _|\n//   _|_|_|    _|_|    _|  _|_|  _|      _|        _|_|_|    _|_|\n// _|_|      _|_|_|_|  _|_|      _|      _|  _|  _|        _|_|_|_|\n//     _|_|  _|        _|          _|  _|    _|  _|        _|\n// _|_|_|      _|_|_|  _|            _|      _|    _|_|_|    _|_|_|\n//\n//\n\n@injectable()\nexport class ChessService {\n  private *halfMoveSaga({ payload: { chessman, source, target } }: HalfMoveAction): SagaIterator {\n    // TODO: check move\n\n    // TODO: castle\n\n    // TODO: remove en passant\n\n    yield put(removeChessman(source))\n    yield put(putChessman(chessman, target))\n\n    // TODO: turn\n  }\n\n  private *pickChessmanSaga({ payload: { chessman, source } }: PickChessmanAction): SagaIterator {\n    const { chess: { board } }: State = yield select()\n\n    const targets = getCoordinatesAttackedBy(chessman, source, board)\n\n    yield put(setTargets(targets))\n  }\n\n  public *rootSaga(): SagaIterator {\n    yield takeEvery(HALF_MOVE, [this, this.halfMoveSaga])\n    yield takeEvery(PICK_CHESSMAN, [this, this.pickChessmanSaga])\n  }\n}\n","export default function getCoordinatesAttackedBy(_chessman: Chess.Chessman, _coord: Chess.Coordinates, _board: Chess.Chessboard): Chess.Coordinates[] {\n  return [{ file: 1, rank: 1 }] // TODO\n}\n","const delay = (ms: number) => new Promise((res) => { setTimeout(res, ms) })\n\nexport default delay\n","import Id from './Id'\n\nexport default class TaskId extends Id {}\n","import ValueObject from './ValueObject'\n\n// TODO: remove\nfunction seemsLikeUuid(s: string) {\n  return /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/.test(s)\n}\n\nexport default class Id extends ValueObject<string> {\n  public static deserialize(serialized: string): Id {\n    return new Id(serialized)\n  }\n\n  public serialize(): string {\n    return this.value\n  }\n\n  protected checkInvariant() {\n    return seemsLikeUuid(this.value)\n  }\n\n  public hashCode() {\n    // tslint:disable-next-line:no-let\n    let result = 17\n\n    result = 31 * result + this.value.hashCode()\n\n    return result\n  }\n}\n","import HashableEq from '~/lib/trait/HashableEq'\n\n/**\n * A primitive ValueObject\n */\nexport default abstract class ValueObject<T> extends HashableEq implements Class.ValueObject<{ value: T }> {\n  constructor(\n    public readonly value: T\n  ) {\n    super()\n\n    if (!this.checkInvariant()) {\n      throw new Error('Invariant Violation: ValueObject#checkInvariant() must be a tautology.') // TODO\n    }\n  }\n\n  protected checkInvariant() {\n    return true\n  }\n}\n","import { Invariant } from './createInvariantMiddleware'\n\nconst combineInvariants: <S extends Record<K, V>, K extends keyof S = keyof S, V extends S[K] = S[K]>(invariants: {\n  [P in keyof S]?: Invariant<S[P]>\n}) => Invariant<S> = (invariants) => (state) => {\n  return Object.entries(state).every(([moduleName, moduleState]) => {\n    return invariants[moduleName]?.(moduleState) ?? true\n  })\n}\n\nexport default combineInvariants\n","import { LocationChangeAction, RouterState, connectRouter } from 'connected-react-router'\nimport { History } from 'history'\nimport { inject, injectable } from 'inversify'\nimport { Action as AnyAction, Reducer, combineReducers } from 'redux'\nimport { SagaIterator } from 'redux-saga'\nimport { fork } from 'redux-saga/effects'\n\nimport combineInvariants from '~/lib/middleware/invariantMiddleware/combineInvariants'\nimport { ChessAction, ChessService, ChessState, chessInvariant, createChessReducer } from './modules/chess'\nimport { CounterAction, CounterService, CounterState, counterInvariant, createCounterReducer } from './modules/counter'\nimport { IoAction, IoService, IoState, createIoReducer } from './modules/io'\nimport LocaleSelectorService, { LocaleSelectorAction, LocaleSelectorState, createLocaleSelectorReducer } from './modules/localeSelector'\nimport ReminderService, { ReminderAction, ReminderState, createReminderReducer } from './modules/reminder'\n\nexport interface State {\n  router: RouterState\n  chess: ChessState\n  counter: CounterState\n  io: IoState\n  localeSelector: LocaleSelectorState\n  reminder: ReminderState\n}\n\nexport type Action =\n  | LocationChangeAction\n  | ChessAction\n  | CounterAction\n  | IoAction\n  | LocaleSelectorAction\n  | ReminderAction\n\n@injectable()\nexport default class Service {\n  private chessService: ChessService\n  private counterService: CounterService\n  private ioService: IoService\n  private localeSelectorService: LocaleSelectorService\n  private reminderService: ReminderService\n\n  // NOTE: `@inject(Service) private service: Service` は、 `toSelf` された実装をコンストラクター引数の中で最後に `@inject` しているか、 `Service` が参照されているかのいずれでもなければ、 Service is not defined を投げる。おそらく inversify か babel-plugin-parameter-decorator がおかしい。\n  constructor(\n    @inject(ChessService) chessService: ChessService,\n    @inject(CounterService) counterService: CounterService,\n    @inject(IoService) ioService: IoService,\n    @inject(LocaleSelectorService) localeSelectorService: LocaleSelectorService,\n    @inject(ReminderService) reminderService: ReminderService\n  ) {\n    this.chessService = chessService\n    this.counterService = counterService\n    this.ioService = ioService\n    this.localeSelectorService = localeSelectorService\n    this.reminderService = reminderService\n  }\n\n  public *rootSaga(): SagaIterator {\n    yield fork([this.chessService, this.chessService.rootSaga])\n    yield fork([this.counterService, this.counterService.rootSaga])\n    yield fork([this.ioService, this.ioService.rootSaga])\n    yield fork([this.localeSelectorService, this.localeSelectorService.rootSaga])\n    yield fork([this.reminderService, this.reminderService.rootSaga])\n  }\n}\n\nexport const createReducer = (history: History, initialState: Alt.Omit<State, 'router'>) => combineReducers<State, Action>({\n  router: connectRouter(history) as Reducer<RouterState, AnyAction>, // TODO\n  chess: createChessReducer(initialState.chess),\n  counter: createCounterReducer(initialState.counter),\n  io: createIoReducer(initialState.io),\n  localeSelector: createLocaleSelectorReducer(initialState.localeSelector),\n  reminder: createReminderReducer(initialState.reminder),\n})\n\nexport const invariant = combineInvariants<State>({\n  chess: chessInvariant,\n  counter: counterInvariant,\n})\n","import { Formats } from 'intl-messageformat'\n\nimport { asBoolean, asObject, asString, asUnionOf, optional, recordOf, unionOf } from './commonValidators'\n\nexport const asFormats = asObject<Partial<Formats>>('a Formats', (input) => ({ // TODO\n  number: optional(recordOf(asIntlNumberFormatOptions))(input.number),\n  date: optional(recordOf(asIntlDateTimeFormatOptions))(input.date),\n  time: optional(recordOf(asIntlDateTimeFormatOptions))(input.time),\n}))\n\nconst asIntlNumberFormatOptions = asObject<Intl.NumberFormatOptions>('an Intl.NumberFormatOptions', (input) => ({\n  localeMatcher: optional(asUnionOf('lookup', 'best fit'))(input.localeMatcher),\n  style: optional(asUnionOf('decimal', 'currency', 'percent'))(input.style),\n  currency: optional(asString)(input.currency), // ISO 4217 currency code\n  currencyDisplay: optional(asUnionOf('symbol', 'code', 'name'))(input.currencyDisplay),\n  useGrouping: optional(asBoolean)(input.useGrouping),\n  minimumIntegerDigits: optional(asUnionOf(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21))(input.minimumIntegerDigits),\n  minimumFractionDigits: optional(asUnionOf(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20))(input.minimumFractionDigits),\n  maximumFractionDigits: optional(asUnionOf(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20))(input.maximumFractionDigits),\n  minimumSignificantDigits: optional(asUnionOf(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21))(input.minimumSignificantDigits),\n  maximumSignificantDigits: optional(asUnionOf(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21))(input.maximumSignificantDigits),\n}))\n\nconst asIntlDateTimeFormatOptions = asObject<Intl.DateTimeFormatOptions>('an Intl.DateTimeFormatOptions', (input) => ({\n  localeMatcher: optional(asUnionOf('lookup', 'best fit'))(input.localeMatcher),\n  weekday: optional(asUnionOf('narrow', 'short', 'long'))(input.weekday),\n  era: optional(asUnionOf('narrow', 'short', 'long'))(input.era),\n  year: optional(asUnionOf('numeric', '2-digit'))(input.year),\n  month: optional(asUnionOf('numeric', '2-digit', 'narrow', 'short', 'long'))(input.month),\n  day: optional(asUnionOf('numeric', '2-digit'))(input.day),\n  hour: optional(asUnionOf('numeric', '2-digit'))(input.hour),\n  minute: optional(asUnionOf('numeric', '2-digit'))(input.minute),\n  second: optional(asUnionOf('numeric', '2-digit'))(input.second),\n  timeZoneName: optional(asUnionOf('short', 'long'))(input.timeZoneName),\n  formatMatcher: optional(asUnionOf('basic', 'best fit'))(input.formatMatcher),\n  hour12: optional(asBoolean)(input.hour12),\n  timeZone: optional(unionOf(asUnionOf('UTC'), asString))(input.localeMatcher), // tz timezone\n}))\n","import { List } from 'immutable'\nimport { Formats } from 'intl-messageformat'\nimport { inject, injectable } from 'inversify'\nimport { Action, Reducer } from 'redux'\nimport { SagaIterator } from 'redux-saga'\nimport { call, put } from 'redux-saga/effects'\n\nimport ConfigRegistry from '~/config/ConfigRegistry'\nimport { takeEvery } from '~/lib/boni/redux-saga/effects'\nimport fetch from '~/lib/fetch'\nimport { Tag } from '~/lib/languageNameSolver'\nimport typed from '~/lib/typed'\nimport { asString, recordOf } from '~/lib/validators/commonValidators'\nimport { asFormats } from '~/lib/validators/intlValidators'\n\n//\n//             _|                  _|\n//   _|_|_|  _|_|_|_|    _|_|_|  _|_|_|_|    _|_|\n// _|_|        _|      _|    _|    _|      _|_|_|_|\n//     _|_|    _|      _|    _|    _|      _|\n// _|_|_|        _|_|    _|_|_|      _|_|    _|_|_|\n//\n//\n\nexport interface LocaleSelectorState {\n  locale: Tag\n  formats: Partial<Formats>\n  messages: Record<string, string>\n  errors: List<Error>\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//   _|\n// _|_|_|_|  _|    _|  _|_|_|      _|_|      _|_|_|\n//   _|      _|    _|  _|    _|  _|_|_|_|  _|_|\n//   _|      _|    _|  _|    _|  _|            _|_|\n//     _|_|    _|_|_|  _|_|_|      _|_|_|  _|_|_|\n//                 _|  _|\n//             _|_|    _|\n\nexport /* for testing */ const SELECT_LOCALE = '@@react-app-prototype/localeSelector/SELECT_LOCALE'\nexport /* for testing */ const SET_LOCALE = '@@react-app-prototype/localeSelector/SET_LOCALE'\nexport /* for testing */ const SET_FORMATS = '@@react-app-prototype/localeSelector/SET_FORMATS'\nexport /* for testing */ const SET_MESSAGES = '@@react-app-prototype/localeSelector/SET_MESSAGES'\nexport /* for testing */ const PUSH_ERROR = '@@react-app-prototype/localeSelector/PUSH_ERROR'\n\nconst localeSelectorActionTypes = [\n  SELECT_LOCALE,\n  SET_LOCALE,\n  SET_FORMATS,\n  SET_MESSAGES,\n  PUSH_ERROR,\n]\n\ntype SelectLocaleAction = ReturnType<typeof selectLocale>\ntype SetLocaleAction = ReturnType<typeof setLocale>\ntype SetFormatsAction = ReturnType<typeof setFormats>\ntype SetMessagesAction = ReturnType<typeof setMessages>\ntype PushErrorAction = ReturnType<typeof pushError>\n\nexport type LocaleSelectorAction =\n  | SelectLocaleAction\n  | SetLocaleAction\n  | SetFormatsAction\n  | SetMessagesAction\n  | PushErrorAction\n\nfunction isLocaleSelectorAction(action: Action): action is LocaleSelectorAction {\n  return localeSelectorActionTypes.includes(action.type)\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//                                           _|\n//   _|_|_|  _|  _|_|    _|_|      _|_|_|  _|_|_|_|    _|_|    _|  _|_|    _|_|_|\n// _|        _|_|      _|_|_|_|  _|    _|    _|      _|    _|  _|_|      _|_|\n// _|        _|        _|        _|    _|    _|      _|    _|  _|            _|_|\n//   _|_|_|  _|          _|_|_|    _|_|_|      _|_|    _|_|    _|        _|_|_|\n//\n//\n\nexport const selectLocale = (locale: Tag) => <const> ({\n  type: SELECT_LOCALE,\n  payload: {\n    locale,\n  },\n})\n\nexport /* for testing */ const setLocale = (locale: Tag) => <const> ({\n  type: SET_LOCALE,\n  payload: {\n    locale,\n  },\n})\n\nexport /* for testing */ const setFormats = (formats: Partial<Formats>) => <const> ({\n  type: SET_FORMATS,\n  payload: {\n    formats,\n  },\n})\n\nexport /* for testing */ const setMessages = (messages: Record<string, string>) => <const> ({\n  type: SET_MESSAGES,\n  payload: {\n    messages,\n  },\n})\n\nexport /* for testing */ const pushError = (error: Error) => <const> ({\n  type: PUSH_ERROR,\n  payload: {\n    error,\n  },\n})\n\n//\n//                           _|\n// _|  _|_|    _|_|      _|_|_|  _|    _|    _|_|_|    _|_|    _|  _|_|\n// _|_|      _|_|_|_|  _|    _|  _|    _|  _|        _|_|_|_|  _|_|\n// _|        _|        _|    _|  _|    _|  _|        _|        _|\n// _|          _|_|_|    _|_|_|    _|_|_|    _|_|_|    _|_|_|  _|\n//\n//\n\nexport const createLocaleSelectorReducer: (initialState: LocaleSelectorState) => Reducer<LocaleSelectorState, Action> = (initialState) => (state = initialState, action) => {\n  if (!isLocaleSelectorAction(action)) {\n    return state\n  }\n\n  switch (action.type) {\n    case SELECT_LOCALE: return state\n    case SET_LOCALE: return {\n      ...state,\n      locale: action.payload.locale,\n    }\n    case SET_FORMATS: return {\n      ...state,\n      formats: action.payload.formats,\n    }\n    case SET_MESSAGES: return {\n      ...state,\n      messages: action.payload.messages,\n    }\n    case PUSH_ERROR: return {\n      ...state,\n      errors: state.errors.push(action.payload.error),\n    }\n  }\n}\n\n//\n//                                           _|\n//   _|_|_|    _|_|    _|  _|_|  _|      _|        _|_|_|    _|_|\n// _|_|      _|_|_|_|  _|_|      _|      _|  _|  _|        _|_|_|_|\n//     _|_|  _|        _|          _|  _|    _|  _|        _|\n// _|_|_|      _|_|_|  _|            _|      _|    _|_|_|    _|_|_|\n//\n//\n\n@injectable()\nexport default class LocaleSelectorService {\n  constructor(\n    @inject('EnvVarConfig') private config: ConfigRegistry\n  ) {}\n\n  public /* for testing */ *selectLocaleSaga({ payload: { locale } }: SelectLocaleAction): SagaIterator {\n    try {\n      const { body: formats }: ResultType<ReturnType<typeof fetch>> = yield call(fetch, {\n        method: 'GET',\n        parameterizedEndpoint: typed<[string]>`${ this.config.get('BASE_NAME') }/formats/:locale.json`,\n        params: { locale },\n      })\n\n      const { body: messages }: ResultType<ReturnType<typeof fetch>> = yield call(fetch, {\n        method: 'GET',\n        parameterizedEndpoint: typed<[string]>`${ this.config.get('BASE_NAME') }/messages/:locale.json`,\n        params: { locale },\n      })\n\n      // TODO: cache\n\n      yield put(setFormats(asFormats(formats)))\n      yield put(setMessages(recordOf(asString)(messages)))\n      yield put(setLocale(locale))\n    } catch (error) {\n      if (error instanceof Error) {\n        yield put(pushError(error))\n\n        return\n      }\n\n      throw new TypeError(typed<[string]>`${ String(error) } is not an error.`)\n    }\n  }\n\n  public *rootSaga(): SagaIterator {\n    yield takeEvery(SELECT_LOCALE, [this, this.selectLocaleSaga])\n  }\n}\n","import { injectable } from 'inversify'\nimport { Action, Reducer } from 'redux'\nimport { SagaIterator, Task } from 'redux-saga'\nimport { call, cancel, put } from 'redux-saga/effects'\n\nimport { takeEvery } from '~/lib/boni/redux-saga/effects'\nimport delay from '~/lib/delay'\n\n//\n//             _|                  _|\n//   _|_|_|  _|_|_|_|    _|_|_|  _|_|_|_|    _|_|\n// _|_|        _|      _|    _|    _|      _|_|_|_|\n//     _|_|    _|      _|    _|    _|      _|\n// _|_|_|        _|_|    _|_|_|      _|_|    _|_|_|\n//\n//\n\nexport interface IoState {\n  now: Date\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//   _|\n// _|_|_|_|  _|    _|  _|_|_|      _|_|      _|_|_|\n//   _|      _|    _|  _|    _|  _|_|_|_|  _|_|\n//   _|      _|    _|  _|    _|  _|            _|_|\n//     _|_|    _|_|_|  _|_|_|      _|_|_|  _|_|_|\n//                 _|  _|\n//             _|_|    _|\n\nexport /* for testing */ const UPDATE_NOW = '@@react-app-prototype/io/UPDATE_NOW' // TODO: rename\nexport /* for testing */ const START_CLOCK = '@@react-app-prototype/io/START_CLOCK'\nconst STOP_CLOCK = '@@react-app-prototype/io/STOP_CLOCK'\nexport /* for testing */ const SET_NOW = '@@react-app-prototype/io/SET_NOW'\n\nconst ioActionTypes = [\n  UPDATE_NOW,\n  START_CLOCK,\n  STOP_CLOCK,\n  SET_NOW,\n]\n\ntype UpdateNowAction = ReturnType<typeof updateNow>\ntype StartClockAction = ReturnType<typeof startClock>\ntype StopClockAction = ReturnType<typeof stopClock>\nexport /* for testing */ type SetNowAction = ReturnType<typeof setNow>\n\nexport type IoAction =\n  | UpdateNowAction\n  | StartClockAction\n  | StopClockAction\n  | SetNowAction\n\nfunction isIoAction(action: Action): action is IoAction {\n  return ioActionTypes.includes(action.type)\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//                                           _|\n//   _|_|_|  _|  _|_|    _|_|      _|_|_|  _|_|_|_|    _|_|    _|  _|_|    _|_|_|\n// _|        _|_|      _|_|_|_|  _|    _|    _|      _|    _|  _|_|      _|_|\n// _|        _|        _|        _|    _|    _|      _|    _|  _|            _|_|\n//   _|_|_|  _|          _|_|_|    _|_|_|      _|_|    _|_|    _|        _|_|_|\n//\n//\n\nexport const updateNow = () => <const> ({\n  type: UPDATE_NOW,\n})\n\nexport const startClock = () => <const> ({\n  type: START_CLOCK,\n})\n\nexport const stopClock = () => <const> ({\n  type: STOP_CLOCK,\n})\n\nexport /* for testing */ const setNow = (now: Date) => <const> ({\n  type: SET_NOW,\n  payload: {\n    now,\n  },\n})\n\n//\n//                           _|\n// _|  _|_|    _|_|      _|_|_|  _|    _|    _|_|_|    _|_|    _|  _|_|\n// _|_|      _|_|_|_|  _|    _|  _|    _|  _|        _|_|_|_|  _|_|\n// _|        _|        _|    _|  _|    _|  _|        _|        _|\n// _|          _|_|_|    _|_|_|    _|_|_|    _|_|_|    _|_|_|  _|\n//\n//\n\nexport const createIoReducer: (initialState: IoState) => Reducer<IoState, Action> = (initialState) => (state = initialState, action) => {\n  if (!isIoAction(action)) {\n    return state\n  }\n\n  switch (action.type) {\n    case UPDATE_NOW: return state\n    case START_CLOCK: return state\n    case STOP_CLOCK: return state\n    case SET_NOW: return {\n      ...state,\n      now: action.payload.now,\n    }\n  }\n}\n\n//\n//                                           _|\n//   _|_|_|    _|_|    _|  _|_|  _|      _|        _|_|_|    _|_|\n// _|_|      _|_|_|_|  _|_|      _|      _|  _|  _|        _|_|_|_|\n//     _|_|  _|        _|          _|  _|    _|  _|        _|\n// _|_|_|      _|_|_|  _|            _|      _|    _|_|_|    _|_|_|\n//\n//\n\n@injectable()\nexport class IoService {\n  private startClockTask: Task | null = null\n\n  public /* for testing */ *updateNowSaga(): SagaIterator {\n    yield put(setNow(new Date))\n  }\n\n  public /* for testing */ *startClockSaga(): SagaIterator {\n    // tslint:disable-next-line:no-loop-statement\n    while (true) {\n      yield call(delay, 1000 - new Date().getMilliseconds())\n\n      yield put(updateNow())\n    }\n  }\n\n  public /* for testing */ *stopClockSaga(): SagaIterator {\n    if (this.startClockTask !== null) {\n      yield cancel(this.startClockTask)\n\n      // Resume the cancelled task\n      // tslint:disable-next-line:no-object-mutation\n      this.startClockTask = yield takeEvery(START_CLOCK, [this, this.startClockSaga])\n    }\n  }\n\n  public *rootSaga(): SagaIterator {\n    yield takeEvery(UPDATE_NOW, [this, this.updateNowSaga])\n    // tslint:disable-next-line:no-object-mutation\n    this.startClockTask = yield takeEvery(START_CLOCK, [this, this.startClockSaga])\n    yield takeEvery(STOP_CLOCK, [this, this.stopClockSaga])\n  }\n}\n","import AbstractError from './AbstractError'\n\nexport default class LogicError extends AbstractError {}\n","import assert from 'assert'\nimport { List, Map } from 'immutable'\nimport { inject, injectable } from 'inversify'\nimport { Action, Reducer } from 'redux'\nimport { SagaIterator } from 'redux-saga'\nimport { call, put, select } from 'redux-saga/effects'\nimport { v4 } from 'uuid'\n\nimport Task from '~/domain/entity/Task'\nimport TaskRepository from '~/domain/repository/TaskRepository'\nimport TaskId from '~/domain/vo/TaskId'\nimport { takeEvery } from '~/lib/boni/redux-saga/effects'\nimport LogicError from '~/lib/errors/LogicError'\nimport typed from '~/lib/typed'\nimport { State } from '~/redux'\n\n//\n//             _|                  _|\n//   _|_|_|  _|_|_|_|    _|_|_|  _|_|_|_|    _|_|\n// _|_|        _|      _|    _|    _|      _|_|_|_|\n//     _|_|    _|      _|    _|    _|      _|\n// _|_|_|        _|_|    _|_|_|      _|_|    _|_|_|\n//\n//\n\nexport interface ReminderState {\n  tasks: List<Task>\n  errors: Map<string, Error> // id -> error\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//   _|\n// _|_|_|_|  _|    _|  _|_|_|      _|_|      _|_|_|\n//   _|      _|    _|  _|    _|  _|_|_|_|  _|_|\n//   _|      _|    _|  _|    _|  _|            _|_|\n//     _|_|    _|_|_|  _|_|_|      _|_|_|  _|_|_|\n//                 _|  _|\n//             _|_|    _|\n\nconst GET_TASKS_ASYNC = '@@react-app-prototype/reminder/GET_TASKS_ASYNC'\nconst SET_TASKS = '@@react-app-prototype/reminder/SET_TASKS'\nexport /* for testing */ const ADD_TASK_ASYNC = '@@react-app-prototype/reminder/ADD_TASK_ASYNC'\nexport /* for testing */ const CHANGE_TASK_CONTENT_ASYNC = '@@react-app-prototype/reminder/CHANGE_TASK_CONTENT_ASYNC'\nexport /* for testing */ const MARK_TASK_AS_DONE_ASYNC = '@@react-app-prototype/reminder/MARK_TASK_AS_DONE_ASYNC'\nexport /* for testing */ const MARK_TASK_AS_UNDONE_ASYNC = '@@react-app-prototype/reminder/MARK_TASK_AS_UNDONE_ASYNC'\nexport /* for testing */ const DELETE_TASK_ASYNC = '@@react-app-prototype/reminder/DELETE_TASK_ASYNC'\nexport /* for testing */ const MOVE_TASK = '@@react-app-prototype/reminder/MOVE_TASK' // TODO: rename?\nexport /* for testing */ const PUSH_TASK = '@@react-app-prototype/reminder/PUSH_TASK'\nexport const MARK_TASK_AS_DONE = '@@react-app-prototype/reminder/MARK_TASK_AS_DONE'\nexport const MARK_TASK_AS_UNDONE = '@@react-app-prototype/reminder/MARK_TASK_AS_UNDONE'\nexport /* for testing */ const REMOVE_TASK = '@@react-app-prototype/reminder/REMOVE_TASK'\nexport /* for testing */ const CHECK_TASK = '@@react-app-prototype/reminder/CHECK_TASK'\nexport /* for testing */ const PUSH_ERROR = '@@react-app-prototype/reminder/PUSH_ERROR'\nconst REMOVE_ERROR = '@@react-app-prototype/reminder/REMOVE_ERROR'\n\nconst reminderActionTypes = [\n  GET_TASKS_ASYNC,\n  SET_TASKS,\n  ADD_TASK_ASYNC,\n  CHANGE_TASK_CONTENT_ASYNC,\n  MARK_TASK_AS_DONE_ASYNC,\n  MARK_TASK_AS_UNDONE_ASYNC,\n  DELETE_TASK_ASYNC,\n  MOVE_TASK,\n  PUSH_TASK,\n  MARK_TASK_AS_DONE,\n  MARK_TASK_AS_UNDONE,\n  REMOVE_TASK,\n  CHECK_TASK,\n  PUSH_ERROR,\n  REMOVE_ERROR,\n]\n\ntype GetTasksAsyncAction = ReturnType<typeof getTasksAsync>\ntype SetTasksAction = ReturnType<typeof setTasks>\ntype AddTaskAsyncAction = ReturnType<typeof addTaskAsync>\ntype ChangeTaskContentAsyncAction = ReturnType<typeof changeTaskContentAsync>\ntype MarkTaskAsDoneAsyncAction = ReturnType<typeof markTaskAsDoneAsync>\ntype MarkTaskAsUndoneAsyncAction = ReturnType<typeof markTaskAsUndoneAsync>\ntype DeleteTaskAsyncAction = ReturnType<typeof deleteTaskAsync>\ntype MoveTaskAction = ReturnType<typeof moveTask>\ntype PushTaskAction = ReturnType<typeof pushTask>\ntype MarkTaskAsDoneAction = ReturnType<typeof markTaskAsDone>\ntype MarkTaskAsUndoneAction = ReturnType<typeof markTaskAsUndone>\ntype RemoveTaskAction = ReturnType<typeof removeTask>\ntype CheckTaskAction = ReturnType<typeof checkTask>\ntype PushErrorAction = ReturnType<typeof pushError>\ntype RemoveErrorAction = ReturnType<typeof removeError>\n\nexport type ReminderAction =\n  | GetTasksAsyncAction\n  | SetTasksAction\n  | AddTaskAsyncAction\n  | ChangeTaskContentAsyncAction\n  | MarkTaskAsDoneAsyncAction\n  | MarkTaskAsUndoneAsyncAction\n  | DeleteTaskAsyncAction\n  | MoveTaskAction\n  | PushTaskAction\n  | MarkTaskAsDoneAction\n  | MarkTaskAsUndoneAction\n  | RemoveTaskAction\n  | CheckTaskAction\n  | PushErrorAction\n  | RemoveErrorAction\n\nfunction isReminderAction(action: Action): action is ReminderAction {\n  return reminderActionTypes.includes(action.type)\n}\n\n//\n//                       _|      _|\n//   _|_|_|    _|_|_|  _|_|_|_|        _|_|    _|_|_|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n// _|    _|  _|          _|      _|  _|    _|  _|    _|\n//   _|_|_|    _|_|_|      _|_|  _|    _|_|    _|    _|\n//\n//\n//\n//                                           _|\n//   _|_|_|  _|  _|_|    _|_|      _|_|_|  _|_|_|_|    _|_|    _|  _|_|    _|_|_|\n// _|        _|_|      _|_|_|_|  _|    _|    _|      _|    _|  _|_|      _|_|\n// _|        _|        _|        _|    _|    _|      _|    _|  _|            _|_|\n//   _|_|_|  _|          _|_|_|    _|_|_|      _|_|    _|_|    _|        _|_|_|\n//\n//\n\nexport const getTasksAsync = () => <const> ({\n  type: GET_TASKS_ASYNC,\n})\n\nconst setTasks = (tasks: List<Task>) => <const> ({\n  type: SET_TASKS,\n  payload: {\n    tasks,\n  },\n})\n\nexport const addTaskAsync = () => <const> ({\n  type: ADD_TASK_ASYNC,\n})\n\nexport const changeTaskContentAsync = (taskId: TaskId, content: string) => <const> ({\n  type: CHANGE_TASK_CONTENT_ASYNC,\n  payload: {\n    taskId,\n    content,\n  },\n})\n\nexport const markTaskAsDoneAsync = (taskId: TaskId) => <const> ({\n  type: MARK_TASK_AS_DONE_ASYNC,\n  payload: {\n    taskId,\n  },\n})\n\nexport const markTaskAsUndoneAsync = (taskId: TaskId) => <const> ({\n  type: MARK_TASK_AS_UNDONE_ASYNC,\n  payload: {\n    taskId,\n  },\n})\n\nexport const deleteTaskAsync = (taskId: TaskId) => <const> ({\n  type: DELETE_TASK_ASYNC,\n  payload: {\n    taskId,\n  },\n})\n\nexport const moveTask = (sourceIndex: number, targetIndex: number) => <const> ({\n  type: MOVE_TASK,\n  payload: {\n    sourceIndex,\n    targetIndex,\n  },\n})\n\nexport const pushTask = (task: Task) => <const> ({\n  type: PUSH_TASK,\n  payload: {\n    task,\n  },\n})\n\nexport const markTaskAsDone = (taskId: TaskId) => <const> ({\n  type: MARK_TASK_AS_DONE,\n  payload: {\n    taskId,\n  },\n})\n\nexport const markTaskAsUndone = (taskId: TaskId) => <const> ({\n  type: MARK_TASK_AS_UNDONE,\n  payload: {\n    taskId,\n  },\n})\n\nexport const removeTask = (taskId: TaskId) => <const> ({\n  type: REMOVE_TASK,\n  payload: {\n    taskId,\n  },\n})\n\nexport const checkTask = (taskId: TaskId, task: Task) => <const> ({\n  type: CHECK_TASK,\n  payload: {\n    taskId,\n    task,\n  },\n})\n\nexport /* for testing */ const pushError = (errorId: string, error: Error) => <const> ({\n  type: PUSH_ERROR,\n  payload: {\n    errorId,\n    error,\n  },\n})\n\nexport const removeError = (errorId: string) => <const> ({\n  type: REMOVE_ERROR,\n  payload: {\n    errorId,\n  },\n})\n\n//\n//                           _|\n// _|  _|_|    _|_|      _|_|_|  _|    _|    _|_|_|    _|_|    _|  _|_|\n// _|_|      _|_|_|_|  _|    _|  _|    _|  _|        _|_|_|_|  _|_|\n// _|        _|        _|    _|  _|    _|  _|        _|        _|\n// _|          _|_|_|    _|_|_|    _|_|_|    _|_|_|    _|_|_|  _|\n//\n//\n\nexport const createReminderReducer: (initialState: ReminderState) => Reducer<ReminderState, Action> = (initialState) => (state = initialState, action) => {\n  if (!isReminderAction(action)) {\n    return state\n  }\n\n  switch (action.type) {\n    case GET_TASKS_ASYNC: return state\n    case SET_TASKS: return {\n      ...state,\n      tasks: action.payload.tasks,\n    }\n    case ADD_TASK_ASYNC: return state\n    case CHANGE_TASK_CONTENT_ASYNC: {\n      // NOTE: CHANGE_TASK_CONTENT_ASYNC から発生する状態遷移と非同期のデータ書き込みを分離させると、このモジュールを使用する <input> は、内容が変更されるたびに再レンダリングされ、 IME とうまく相互作用しなくなる。\n\n      const i = state.tasks.findIndex((task) => task.id.equals(action.payload.taskId))\n\n      if (i === -1) {\n        throw new Error // TODO:\n      }\n\n      return {\n        ...state,\n        tasks: state.tasks.update(i, (task) => task.with({ content: action.payload.content })),\n      }\n    }\n    case MARK_TASK_AS_DONE_ASYNC: return state\n    case MARK_TASK_AS_UNDONE_ASYNC: return state\n    case DELETE_TASK_ASYNC: return state\n    case MOVE_TASK: {\n      const object = state.tasks.get(action.payload.sourceIndex)\n\n      if (object === undefined) {\n        throw new Error // TODO\n      }\n\n      return {\n        ...state,\n        tasks: state.tasks.remove(action.payload.sourceIndex).insert(action.payload.targetIndex, object),\n      }\n    }\n    case PUSH_TASK: return {\n      ...state,\n      tasks: state.tasks.push(action.payload.task),\n    }\n    case MARK_TASK_AS_DONE: {\n      const i = state.tasks.findIndex((task) => task.id.equals(action.payload.taskId))\n\n      if (i === -1) {\n        throw new Error // TODO:\n      }\n\n      return {\n        ...state,\n        tasks: state.tasks.update(i, (task) => task.with({ done: true })),\n      }\n    }\n    case MARK_TASK_AS_UNDONE: {\n      const i = state.tasks.findIndex((task) => task.id.equals(action.payload.taskId))\n\n      if (i === -1) {\n        throw new Error // TODO:\n      }\n\n      return {\n        ...state,\n        tasks: state.tasks.update(i, (task) => task.with({ done: false })),\n      }\n    }\n    case REMOVE_TASK: {\n      const i = state.tasks.findIndex((task) => task.id.equals(action.payload.taskId))\n\n      if (i === -1) {\n        throw new Error // TODO:\n      }\n\n      return {\n        ...state,\n        tasks: state.tasks.remove(i),\n      }\n    }\n    case CHECK_TASK: {\n      assert(action.payload.taskId.equals(action.payload.task.id))\n\n      return state\n    }\n    case PUSH_ERROR: return {\n      ...state,\n      errors: state.errors.set(action.payload.errorId, action.payload.error),\n    }\n    case REMOVE_ERROR: {\n      if (!(action.payload.errorId in state.errors)) {\n        throw new Error // TODO:\n      }\n\n      return {\n        ...state,\n        errors: state.errors.remove(action.payload.errorId),\n      }\n    }\n  }\n}\n\n//\n//                                           _|\n//   _|_|_|    _|_|    _|  _|_|  _|      _|        _|_|_|    _|_|\n// _|_|      _|_|_|_|  _|_|      _|      _|  _|  _|        _|_|_|_|\n//     _|_|  _|        _|          _|  _|    _|  _|        _|\n// _|_|_|      _|_|_|  _|            _|      _|    _|_|_|    _|_|_|\n//\n//\n\n@injectable()\nexport default class ReminderService {\n  constructor(\n    @inject('TaskRepository') public taskRepository: TaskRepository\n  ) {}\n\n  private *getTasksAsyncSaga(): SagaIterator {\n    const tasks: ResultType<ReturnType<this['taskRepository']['list']>> = yield call(this.taskRepository.list)\n\n    yield put(setTasks(tasks))\n  }\n\n  private *addTaskAsyncSaga(): SagaIterator {\n    const task = new Task({\n      id: new TaskId(v4()),\n      content: '',\n      done: false,\n    })\n\n    yield call(this.taskRepository.store, task)\n    yield put(pushTask(task))\n  }\n\n  private *changeTaskContentAsyncSaga({ payload: { taskId, content } }: ChangeTaskContentAsyncAction): SagaIterator {\n    const task: ResultType<ReturnType<this['taskRepository']['findById']>> = yield call(this.taskRepository.findById, taskId)\n\n    try {\n      task.content = content // tslint:disable-line:no-object-mutation\n    } catch (error) {\n      if (error instanceof Error) {\n        yield put(pushError(v4(), error)) // TODO:\n\n        return\n      }\n\n      throw new TypeError(typed<[string]>`${ String(error) } is not an error.`)\n    }\n\n    yield call(this.taskRepository.store, task)\n    yield put(checkTask(taskId, task))\n  }\n\n  private *markTaskAsDoneAsyncSaga({ payload: { taskId } }: MarkTaskAsDoneAsyncAction): SagaIterator {\n    const task: ResultType<ReturnType<this['taskRepository']['findById']>> = yield call(this.taskRepository.findById, taskId)\n\n    task.done = true // tslint:disable-line:no-object-mutation\n\n    yield call(this.taskRepository.store, task)\n    yield put(markTaskAsDone(taskId))\n  }\n\n  private *markTaskAsUndoneAsyncSaga({ payload: { taskId } }: MarkTaskAsUndoneAsyncAction): SagaIterator {\n    const task: ResultType<ReturnType<this['taskRepository']['findById']>> = yield call(this.taskRepository.findById, taskId)\n\n    task.done = false // tslint:disable-line:no-object-mutation\n\n    yield call(this.taskRepository.store, task)\n    yield put(markTaskAsUndone(taskId))\n  }\n\n  private *deleteTaskAsyncSaga({ payload: { taskId } }: DeleteTaskAsyncAction): SagaIterator {\n    const task: ResultType<ReturnType<this['taskRepository']['findById']>> = yield call(this.taskRepository.findById, taskId)\n\n    yield call(this.taskRepository.remove, task)\n    yield put(removeTask(taskId))\n  }\n\n  private *checkTaskSaga({ payload: { taskId, task } }: CheckTaskAction): SagaIterator {\n    const { reminder: { tasks: stateTasks } }: State = yield select()\n\n    const stateTask = stateTasks.find(({ id }) => id.equals(taskId))\n\n    if (stateTask === undefined) {\n      throw new Error // TODO:\n    }\n\n    if (!stateTask.equals(task)) {\n      yield put(pushError(v4(), new LogicError)) // TODO:\n    }\n  }\n\n  public *rootSaga(): SagaIterator {\n    yield takeEvery(GET_TASKS_ASYNC, [this, this.getTasksAsyncSaga])\n    yield takeEvery(ADD_TASK_ASYNC, [this, this.addTaskAsyncSaga])\n    yield takeEvery(CHANGE_TASK_CONTENT_ASYNC, [this, this.changeTaskContentAsyncSaga])\n    yield takeEvery(MARK_TASK_AS_DONE_ASYNC, [this, this.markTaskAsDoneAsyncSaga])\n    yield takeEvery(MARK_TASK_AS_UNDONE_ASYNC, [this, this.markTaskAsUndoneAsyncSaga])\n    yield takeEvery(DELETE_TASK_ASYNC, [this, this.deleteTaskAsyncSaga])\n    yield takeEvery(CHECK_TASK, [this, this.checkTaskSaga])\n  }\n}\n","import { isUrl } from '~/lib/guards/stringGuards'\nimport typed from '~/lib/typed'\n\nconst DUMMY_ORIGIN = 'http://example.com'\n\nfunction dropDummyOrigin(x: string): string {\n  const result = new RegExp(typed<[string]>`^${ DUMMY_ORIGIN }(.*)$`).exec(x)\n\n  if (result === null) {\n    throw new Error\n  }\n\n  return result[1]\n}\n\n/**\n * URL から origin を取り除いたものを表す。\n */\nclass PathAbempty {\n  private readonly _url: URL\n\n  constructor(...[pathAbempty, ...restArgs]: ConstructorParameters<typeof URL>) {\n    this._url = new URL(typed<[string, string]>`${ DUMMY_ORIGIN }${ pathAbempty }`, ...restArgs)\n  }\n\n  get hash(): string {\n    return this._url.hash\n  }\n\n  get href(): string {\n    return dropDummyOrigin(this._url.href)\n  }\n\n  get origin(): string {\n    return dropDummyOrigin(this._url.origin)\n  }\n\n  get pathname(): string {\n    return this._url.pathname\n  }\n\n  set pathname(value: string) {\n    // tslint:disable-next-line:no-object-mutation\n    this._url.pathname = value\n  }\n\n  get search(): string {\n    return this._url.search\n  }\n\n  set search(value: string) {\n    // tslint:disable-next-line:no-object-mutation\n    this._url.search = value\n  }\n\n  get searchParams(): URLSearchParams {\n    return this._url.searchParams\n  }\n\n  public toJSON() {\n    return dropDummyOrigin(this._url.toJSON())\n  }\n}\n\nexport default function createUrlOrPathAbempty(...args: ConstructorParameters<typeof URL>): URL | PathAbempty {\n  const [urlOrPathAbempty] = args\n\n  if (isUrl(urlOrPathAbempty)) {\n    return new URL(...args)\n  } else {\n    return new PathAbempty(...args)\n  }\n}\n","export default function fromEntries<K extends Index, V>(entries: Iterable<[K, V]>): Record<K, V> {\n  const result: Partial<Record<K, V>> = {}\n\n  // tslint:disable-next-line:no-loop-statement\n  for (const [key, value] of entries) {\n\n    // tslint:disable-next-line:no-object-mutation\n    result[key] = value\n  }\n\n  return result as Record<K, V>\n}\n","/**\n * src/lib/fetch.ts\n */\n\nimport * as pathToRegexp from 'path-to-regexp'\n\nimport createUrlOrPathAbempty from './createUrlOrPathAbempty'\nimport mapValues from './extensions/Record/mapValues'\nimport fromEntries from './polyfills/Object.fromEntries'\nimport typed from './typed'\n\ntype Method = 'GET' | 'POST'\n\ninterface RequestParams {\n  method: Method\n  parameterizedEndpoint: string\n  params?: Record<string, string>\n  headers?: Record<string, string>\n  query?: Query\n}\n\ntype Query = Record<string, QueryValue>\n\ntype QueryValue =\n  | string\n  | QueryValueArray\n  | QueryValueObject\n\ntype QueryValueArray = QueryValue[]\ntype QueryValueObject = { [member in string]: QueryValue }\n\ntype VQuery = Record<string, QueryValue>\n\ntype QueryMap = Record<string, string>\n\ninterface ResponseParams {\n  response: Response\n  body: Json\n}\n\nfunction isEmpty<T extends {}>(object: T): object is EmptyRecord<T> {\n  return Object.keys(object).length === 0\n}\n\nfunction toRecord(input: {}): Record<string, unknown> {\n  return Object.entries(input).reduce((result, [i, x]) => ({ ...result, [i]: x }), {})\n}\n\nfunction toJson(input: unknown): Json {\n  if (typeof input === 'boolean' || typeof input === 'number' || typeof input === 'string') {\n    return input\n  }\n\n  if (Array.isArray(input)) {\n    return input.map((json) => toJson(json))\n  }\n\n  if (typeof input === 'object') {\n    if (input === null) {\n      return input\n    }\n\n    return mapValues(toRecord(input), (json) => toJson(json))\n  }\n\n  throw new Error(typed<[string]>`${ String(input) } is not a Json.`)\n}\n\n/**\n * Query を QueryMap に変換する。\n */\nexport /* for testing */ function toQueryMap(query: Query): QueryMap {\n\n  /**\n   * QueryValueArray を展開し、より簡単な Query を返す。\n   *\n   * @implNote `goWithArray(key: string, value: Record<string, QueryValue>, result: VQuery): VQuery` とすれば、 `index` を排除し、 `goWithObject` と実装を統合することができるが、配列のキーにはインデックスを含めたくない場合がある。\n   */\n  function goWithArray(key: string, value: QueryValueArray, index: number, result: VQuery): VQuery {\n    if (value.length === 0) {\n      return result\n    }\n\n    const [head, ...tail] = value\n\n    return goWithArray(key, tail, index + 1, {\n      ...result,\n      [typed<[string, number]>`${ key }[${ index }]`]: head,\n    })\n  }\n\n  /**\n   * QueryValueObject を展開し、より簡単な Query を返す。\n   */\n  function goWithObject(key: string, value: QueryValueObject, result: VQuery): VQuery {\n    if (isEmpty(value)) {\n      return result\n    }\n\n    const [[member, head], ...tailEntries] = Object.entries(value)\n\n    return goWithObject(key, fromEntries(tailEntries), {\n      ...result,\n      [typed<[string, string]>`${ key }[${ member }]`]: head,\n    })\n  }\n\n  function go(q: Query, result: QueryMap): QueryMap {\n    if (isEmpty(q)) {\n      return result\n    }\n\n    const [[key, value], ...tail] = Object.entries(q)\n\n    if (typeof value === 'string') {\n      return go(fromEntries(tail), {\n        ...result,\n        [key]: value,\n      })\n    }\n\n    if (Array.isArray(value)) {\n      return go(goWithArray(key, value, 0, fromEntries(tail)), result)\n    }\n\n    return go(goWithObject(key, value, fromEntries(tail)), result)\n  }\n\n  return go(query, {})\n}\n\nfunction buildRequestInfo({ method, parameterizedEndpoint, params = {}, query = {} }: RequestParams): RequestInfo {\n  const url = createUrlOrPathAbempty(parameterizedEndpoint)\n\n  // tslint:disable-next-line:no-object-mutation\n  url.pathname = isEmpty(params) ? url.pathname : pathToRegexp.compile(url.pathname)(params)\n\n  if (method === 'GET') {\n    const urlSearchParams = new URLSearchParams(url.search)\n\n    Object.entries(toQueryMap(query)).forEach(([key, value]) => {\n      urlSearchParams.append(key, value)\n    })\n\n    // tslint:disable-next-line:no-object-mutation\n    url.search = urlSearchParams.toString()\n  }\n\n  return url.href\n}\n\nfunction buildRequestInit({ method, headers = {}, query = {} }: RequestParams): RequestInit {\n  switch (method) {\n    case 'GET':\n      return {\n        method,\n        headers,\n      }\n    case 'POST':\n      const formData = new FormData\n\n      Object.entries(toQueryMap(query)).forEach(([key, value]) => {\n        formData.append(key, value)\n      })\n\n      return {\n        method,\n        body: formData,\n        headers,\n      }\n  }\n}\n\nexport default async function fetch(request: RequestParams): Promise<ResponseParams> {\n  const requestInfo = buildRequestInfo(request)\n  const requestInit = buildRequestInit(request)\n  const response = await window.fetch(requestInfo, requestInit) // TODO: use globalThis\n\n  const body = toJson(await response.json())\n\n  return { response, body }\n}\n","export default function mapValues<K extends Index, T, U>(object: Record<K, T>, f: (x: T) => U): Record<K, U> {\n  const result: Partial<Record<K, U>> = {}\n\n  // tslint:disable-next-line:no-loop-statement\n  for (const [i, x] of Object.entries(object)) {\n    // tslint:disable-next-line:no-object-mutation\n    result[i] = f(x)\n  }\n\n  return result as Record<K, U>\n}\n","import { Dispatch, SetStateAction, createContext } from 'react'\n\ninterface ThemeProviderContext {\n  dark: boolean | undefined | null\n  setDark: Dispatch<SetStateAction<boolean | null>> | undefined | null\n}\n\nexport default createContext<ThemeProviderContext>({\n  dark: null,\n  setDark: null,\n})\n","import { createContext } from 'react'\n\nimport { Tag } from '~/lib/languageNameSolver'\n\ninterface IntlProviderContext {\n  availableLocales: Tag[] | undefined | null\n}\n\nexport default createContext<IntlProviderContext>({\n  availableLocales: null,\n})\n","export function isUrl(input: string): input is string.Url {\n  try {\n    // tslint:disable-next-line:no-unused-expression\n    new URL(input)\n\n    return true\n  } catch (_error) {\n    return false\n  }\n}\n","import UnreachableError from '~/lib/errors/UnreachableError'\nimport typed from '~/lib/typed'\n\n/**\n * @throw {TypeError} if the size of {xs} is less than two.\n *\n * @example\n * conj(', ', ' or ', ['A', 'B', 'C']) // 'A, B or C'\n */\nexport default function conj(xs: string[], separator: string, lastSeparator: string): string {\n  if (xs.length < 2) {\n    throw new TypeError(typed<[string]>`The size of ${ xs.toString() } is less than two.`)\n  }\n\n  const lastX = xs.pop() // tslint:disable-line:no-array-mutation\n\n  if (lastX === undefined) {\n    throw new UnreachableError\n  }\n\n  return typed<[string, string, string]>`${ xs.join(separator) }${ lastSeparator }${ lastX }`\n}\n","import typed from '~/lib/typed'\n\nconst eols = [\n  '\\n',\n  '\\r\\n',\n]\n\nconst eolPattern = new RegExp(typed<[string]>`(?:${ eols.join('|') })`)\nconst eolCharPattern = new RegExp(typed<[string]>`(?:${ eols.map((eol) => typed<[string]>`[${ eol }]`).join('|') })`)\n\nexport default function stripMargin(...args: Parameters<typeof stripMargin1>): ReturnType<typeof stripMargin1>\nexport default function stripMargin(...args: Parameters<typeof stripMargin2>): ReturnType<typeof stripMargin2>\n\nexport default function stripMargin(that: string, marginChar?: string): string {\n  if (marginChar === undefined) {\n    return stripMargin1(that)\n  }\n\n  return stripMargin2(that, marginChar)\n}\n\nfunction stripMargin1(that: string) {\n  return stripMargin2(that, '|')\n}\n\nfunction stripMargin2(that: string, marginChar: string) {\n  let result = '' // tslint:disable-line:no-let\n\n  // tslint:disable-next-line:no-loop-statement\n  for (const line of generateLineWithEolIterator(that)) {\n    const matches = new RegExp(typed<[string, string]>`^(?:[\\\\t ]*(?<marginChar>.))?(?<stripped>(?:.|${ eolCharPattern.source })*${ eolPattern.source }?)$`, 'u').exec(line)\n\n    const groups = matches?.groups // TODO\n\n    if (groups === undefined) {\n      throw new Error // TODO\n    }\n\n    const { marginChar: marginCharCandidate, stripped } = groups\n\n    if (marginCharCandidate === marginChar) {\n      result += stripped\n    } else {\n      result += line\n    }\n  }\n\n  return result\n}\n\nfunction* generateLineWithEolIterator(cs: string) {\n  let lineBuffer = '' // tslint:disable-line:no-let\n  let eolBuffer = '' // tslint:disable-line:no-let\n\n  // tslint:disable-next-line:no-loop-statement\n  for (const c of cs) {\n    lineBuffer += c\n\n    if (eols.some((eol) => eol.startsWith(eolBuffer + c))) {\n      eolBuffer += c\n    }\n\n    if (eols.includes(eolBuffer)) {\n      yield lineBuffer\n      lineBuffer = ''\n      eolBuffer = ''\n    }\n  }\n\n  if (lineBuffer !== '') {\n    yield lineBuffer\n  }\n}\n","import typed from '~/lib/typed'\n\nexport default function trimEols(s: string) {\n  return trimTrailingEols(trimLeadingEols(s))\n}\n\nconst eolPattern = /(?:\\r?\\n)/\n\nfunction trimLeadingEols(s: string) {\n  return s.replace(new RegExp(typed<[string]>`^${ eolPattern.source }*`), '')\n}\n\nfunction trimTrailingEols(s: string) {\n  return s.replace(new RegExp(typed<[string]>`${ eolPattern.source }*$`), '')\n}\n","import { Either, isLeft, isRight, left, right } from 'fp-ts/lib/Either'\n\nimport UnreachableError from '~/lib/errors/UnreachableError'\nimport conj from '~/lib/extensions/Array/conj'\nimport equalsJsons from '~/lib/extensions/Eq/equalsJsons'\nimport stripMargin from '~/lib/extensions/String/stripMargin'\nimport trimEols from '~/lib/extensions/String/trimEols'\nimport typed from '~/lib/typed'\nimport ValidationError from './ValidationError'\n\n/**\n * @callback Validator\n * @throws {ValidationError} if the validation fails.\n */\n\n/**\n * @param asT {Validator}\n * @throws {never}\n */\nexport const failSafe = <A extends unknown, T extends A>(asT: (input: A) => T) => (input: A): Either<ValidationError, T> => {\n  try {\n    return right(asT(input))\n  } catch (error) {\n    if (error instanceof ValidationError) {\n      return left(error)\n    }\n\n    throw new UnreachableError\n  }\n}\n\nexport const leftOnly = <A extends unknown, T extends A>(asT: (input: A) => T) => (input: A): ValidationError | undefined => {\n  const t = failSafe(asT)(input)\n\n  if (isLeft(t)) {\n    return t.left\n  } else {\n    return undefined\n  }\n}\n\n// TODO: refactor\nexport const named = <A extends unknown, T extends A>(name: string, asT: (input: A) => T) => (input: A): T => {\n  const t = failSafe(asT)(input)\n\n  if (isLeft(t)) {\n    if (t.left.values === undefined) {\n      throw t.left\n    }\n\n    if (t.left.key === undefined) {\n      throw new UnreachableError\n    }\n\n    throw new ValidationError(t.left.message, t.left.key, { name, ...t.left.values })\n  }\n\n  return t.right // TODO\n}\n\nexport const optional = <A extends unknown, T extends A>(asT: (input: A) => T) => (input: A | undefined): T | undefined => {\n  if (input === undefined) {\n    return\n  }\n\n  return asT(input)\n}\n\nexport const unionOf = <A extends unknown, T extends A, U extends A>(asT: (input: A) => T, asU: (input: A) => U) => (input: A): T | U => {\n  const t = failSafe(asT)(input)\n  const u = failSafe(asU)(input)\n\n  if (isLeft(t) && isLeft(u)) {\n    throw new ValidationError(typed<[string, string]>`${ t.left.message } AND ${ u.left.message }`)\n  }\n\n  if (isRight(t)) {\n    return t.right\n  }\n\n  if (isRight(u)) {\n    return u.right\n  }\n\n  throw new UnreachableError\n}\n\nconst listOf = <A extends unknown, T extends A>(asT: (input: A) => T) => (input: readonly A[]): T[] => { // TODO: input: unknown\n  if (!Array.isArray(input)) {\n    throw new ValidationError(typed<[string]>`${ JSON.stringify(input) } is not an array.`)\n  }\n\n  return input.map(asT)\n}\n\nexport const recordOf = <A extends unknown, T extends A>(asT: (input: A) => T) => asObject<Record<string, T>>('a Record', (input) => Object.entries<string, A>(input).map<[string, T]>(([key, value]) => [key, asT(value)]).reduce<Record<string, T>>((output, [key, value]) => ({ ...output, [key]: value }), {}))\n\nexport function asUnionOf<T extends readonly Json[]>(...options: T): (input: unknown) => T[number]\nexport function asUnionOf<T extends readonly unknown[]>(...options: T): (input: unknown) => T[number]\nexport function asUnionOf<T extends readonly unknown[]>(...options: T) {\n  return (input: unknown): T[number] => {\n    if (!options.includes(input)) {\n      throw new ValidationError(typed<[string, string]>`${ JSON.stringify(input) } is neigher ${ conj(options.map(String), ', ', ' nor ') }`)\n    }\n\n    return input\n  }\n}\n\n/**\n * Ascribe the given JSON object to a specific type.\n *\n * @callback ObjectTyper\n * @throws {Error} if {input} is invalid as {T}.\n */\n\n/**\n * @param className name of {T} with indefinite article\n * @param asT {ObjectTyper}\n */\nexport const asObject = <T>(className: string, asT: (input: any) => T) => (input: unknown): T => { // tslint:disable-line:no-any\n  if (input == null) {\n    throw new ValidationError(typed<[string]>`${ JSON.stringify(input) } is not an object.`)\n  }\n\n  try {\n    return asT(input)\n  } catch (error) {\n    if (error instanceof ValidationError) {\n      throw new ValidationError(trimEols(stripMargin(typed<[string, string, string]>`\n        |${ JSON.stringify(input) } is not ${ className }.\n        |${ error.message }\n        |`)))\n    }\n\n    if (error instanceof Error) {\n      console.error(error) // tslint:disable-line:no-console\n\n      throw new ValidationError(typed<[string, string]>`${ JSON.stringify(input) } is not ${ className }.`)\n    }\n\n    throw new TypeError(typed<[string]>`${ String(error) } is not an error.`)\n  }\n}\n\n// TODO: undefined, symbol, bigint, bigdecimal 等に拡張する\nexport function asConstant<T extends null>(a: T): (input: unknown) => T\nexport function asConstant<T extends boolean>(a: T): (input: unknown) => T\nexport function asConstant<T extends number>(a: T): (input: unknown) => T\nexport function asConstant<T extends string>(a: T): (input: unknown) => T\nexport function asConstant<T extends JsonArray>(a: T): (input: unknown) => T\nexport function asConstant<T extends JsonObject>(a: T): (input: unknown) => T\nexport function asConstant<T extends Json>(a: T): (input: unknown) => T {\n  return (input) => {\n    const inputAsJson = asJson(input)\n\n    if (!equalsJsons(inputAsJson, a)) {\n      throw new ValidationError(typed<[string, string]>`${ JSON.stringify(inputAsJson) } is not ${ JSON.stringify(a) }.`)\n    }\n\n    return inputAsJson as T\n  }\n}\n\nexport function asBoolean(input: unknown): boolean {\n  if (typeof input !== 'boolean') {\n    throw new ValidationError(typed<[string]>`${ JSON.stringify(input) } is not a boolean.`)\n  }\n\n  return input\n}\n\nexport function asNumber(input: unknown): number {\n  if (typeof input !== 'number') {\n    throw new ValidationError(typed<[string]>`${ JSON.stringify(input) } is not a number.`)\n  }\n\n  return input\n}\n\nexport function asString(input: unknown): string {\n  if (typeof input !== 'string') {\n    throw new ValidationError(typed<[string]>`${ JSON.stringify(input) } is not a string.`)\n  }\n\n  return input\n}\n\nexport function asJson(input: unknown): Json {\n  if (input === null || typeof input === 'boolean' || typeof input === 'number' || typeof input === 'string') {\n    return input\n  }\n\n  if (Array.isArray(input)) {\n    return listOf(asJson)(input)\n  }\n\n  try {\n    return recordOf(asJson)(input)\n  } catch (error) {\n    if (error instanceof ValidationError) {\n      throw new ValidationError(trimEols(stripMargin(typed<[string, string]>`\n        |${ JSON.stringify(input) } is not a Json.\n        |${ error.message }\n        |`)))\n    }\n\n    if (error instanceof Error) {\n      console.error(error) // tslint:disable-line:no-console\n\n      throw new ValidationError(typed<[string]>`${ JSON.stringify(input) } is not a Json.`)\n    }\n\n    throw new TypeError(typed<[string]>`${ String(error) } is not an error.`)\n  }\n}\n","export default function equalsChessmen(x: Chess.Chessman, y: Chess.Chessman): boolean {\n  return x.symbol === y.symbol\n}\n","import { PrimitiveType } from 'intl-messageformat'\n\nimport AbstractError from '~/lib/errors/AbstractError'\n\n/**\n * @param key of results of defineMessages from react-intl\n * @param values for react-intl\n */\nexport default class ValidationError extends AbstractError {\n  /**\n   * @param message as an error message\n   */\n  constructor(message?: string)\n  constructor(message: string, key: string, values: Record<string, PrimitiveType>)\n  constructor(message?: string, public key?: string, public values?: Record<string, PrimitiveType>) {\n    super(message)\n  }\n}\n","import Id from '~/domain/vo/Id'\nimport Eq from '~/lib/trait/Eq'\nimport HashableEq from '~/lib/trait/HashableEq'\n\n// TODO: move?\ninterface Identifiable {\n  id: Id\n}\n\nexport default abstract class Entity extends HashableEq implements Identifiable, Eq {\n  constructor(\n    public readonly id: Id\n  ) {\n    super()\n  }\n\n  public isIdenticalTo(that: this): boolean {\n    return this.id.equals(that.id)\n  }\n}\n","import TaskId from '~/domain/vo/TaskId'\nimport yieldThis from '~/lib/extensions/Unknown/yieldThis'\nimport { asBoolean, asObject, asString } from '~/lib/validators/commonValidators'\nimport Entity from './Entity'\n\nconst asIdSerializedTask = asObject('an Id-serialized Task', (input) => ({\n  id: asString(input.id),\n  content: asString(input.content),\n  done: asBoolean(input.done),\n}))\n\nexport interface TaskParams {\n  id: TaskId\n  content: string\n  done: boolean\n}\n\nexport default class Task extends Entity {\n  private _content: string\n  private _done: boolean\n\n  constructor({\n    id,\n    content,\n    done,\n  }: TaskParams) {\n    super(id)\n\n    this._content = content\n    this._done = done\n  }\n\n  public static deserialize(serialized: string): Task {\n    const deserialized = yieldThis(asIdSerializedTask(JSON.parse(serialized)), (({ id, content, done }) => ({\n      id: TaskId.deserialize(id),\n      content,\n      done,\n    })))\n\n    return new Task(deserialized)\n  }\n\n  public serialize(): string {\n    return JSON.stringify({\n      id: this.id.serialize(),\n      content: this.content,\n      done: this.done,\n    })\n  }\n\n  public hashCode() {\n    // tslint:disable-next-line:no-let\n    let result = 17\n\n    result = 31 * result + this.id.hashCode()\n    result = 31 * result + this.content.hashCode()\n    result = 31 * result + this.done.hashCode()\n\n    return result\n  }\n\n  public with({\n    content = this.content,\n    done = this.done,\n  }: Partial<Alt.Omit<TaskParams, 'id'>>): Task {\n    return new Task({ id: this.id, content, done })\n  }\n\n  get content() {\n    return this._content\n  }\n\n  set content(value) {\n    this._content = value // tslint:disable-line:no-object-mutation\n  }\n\n  get done() {\n    return this._done\n  }\n\n  set done(value) {\n    this._done = value // tslint:disable-line:no-object-mutation\n  }\n}\n","export default function yieldThis<T extends unknown, U>(that: T, decorate: (that: T) => U): U {\n  return decorate(that)\n}\n","import JSBI from 'jsbi'\n\nexport default function hashCode(x: number) {\n  const v = doubleToLongBits(x)\n\n  return Number(JSBI.bitwiseAnd(v, JSBI.BigInt(0xFFFFFFFF))) ^ Number(JSBI.signedRightShift(v, JSBI.BigInt(32)))\n}\n\n// TODO: remove\nfunction doubleToLongBits(value: number): JSBI {\n  const buf = Buffer.allocUnsafe(8)\n\n  buf.writeDoubleBE(value, 0)\n\n  return JSBI.add((JSBI.leftShift(JSBI.BigInt(buf.readUInt32BE(0)), JSBI.BigInt(32))), JSBI.BigInt(buf.readUInt32BE(4)))\n}\n","import AbstractError from './AbstractError'\n\nexport default class UnreachableError extends AbstractError {}\n","import React from 'react'\nimport { Route as OriginalRoute, RouteComponentProps, RouteProps } from 'react-router'\n\nimport CircularProgress from '@material-ui/core/CircularProgress'\n\nconst withSuspense: (Component: React.LazyExoticComponent<React.ComponentType<RouteComponentProps>>) => React.ComponentType<RouteComponentProps> = (Component) => (props) => (\n  <React.Suspense fallback={ <CircularProgress /> }>\n    <Component { ...props } />\n  </React.Suspense>\n)\n\ninterface Props extends Alt.Omit<RouteProps, 'render' | 'component' | 'children'> {\n  // TODO: ban mandatory props\n  component?: Required<RouteProps>['component'] | React.LazyExoticComponent<Required<RouteProps>['component']>\n}\n\nconst Route: React.FunctionComponent<Props> = ({ component, ...restProps }) => {\n  if (component === undefined) {\n    return <OriginalRoute { ...restProps } />\n  }\n\n  if ('_result' in component) { // FIXME: if LazyExoticComponent\n    return <OriginalRoute component={ withSuspense(component) } { ...restProps } />\n  } else {\n    return <OriginalRoute component={ component } { ...restProps } />\n  }\n}\n\nexport default Route\n","import React from 'react'\nimport { hot } from 'react-hot-loader/root'\nimport { Redirect, Switch, useLocation } from 'react-router'\n\nimport Route from '~/lib/components/Route'\n\nexport /* for testing */ const HomePage = React.lazy(() => import(/* webpackChunkName: \"home\" */ './HomePage'))\nexport /* for testing */ const ChessPage = React.lazy(() => import(/* webpackChunkName: \"chess\" */ './ChessPage'))\nexport /* for testing */ const CounterPage = React.lazy(() => import(/* webpackChunkName: \"counter\" */ './CounterPage'))\nexport /* for testing */ const InfoPage = React.lazy(() => import(/* webpackChunkName: \"info\" */ './InfoPage'))\nexport /* for testing */ const PaintPage = React.lazy(() => import(/* webpackChunkName: \"paint\" */ './PaintPage'))\nexport /* for testing */ const ReminderPage = React.lazy(() => import(/* webpackChunkName: \"reminder\" */ './ReminderPage'))\nexport /* for testing */ const NoMatch = React.lazy(() => import(/* webpackChunkName: \"noMatch\" */ './NoMatch'))\n\nconst App: React.FunctionComponent = () => {\n  const location = useLocation()\n\n  if (location.pathname === '/' && location.hash !== '') {\n    const pathname = /^#(.*)$/.exec(location.hash)?.[1]\n\n    // TODO: shape check\n\n    return <Redirect to={ { pathname } } />\n  }\n\n  return (\n    <Switch>\n      <Route exact strict sensitive path=\"/\" component={ HomePage } />\n      <Route exact strict sensitive path=\"/chess\" component={ ChessPage } />\n      <Route exact strict sensitive path=\"/counter\" component={ CounterPage } />\n      <Route exact strict sensitive path=\"/info\" component={ InfoPage } />\n      <Route exact strict sensitive path=\"/paint\" component={ PaintPage } />\n      <Route exact strict sensitive path=\"/reminder\" component={ ReminderPage } />\n      <Route path=\"*\" component={ NoMatch } />\n    </Switch>\n  )\n}\n\nexport default hot(App)\n","import React from 'react'\nimport { IntlConfig, IntlProvider as OriginalIntlProvider } from 'react-intl'\n\nimport IntlProviderContext from '~/lib/contexts/IntlProviderContext'\nimport { Tag } from '~/lib/languageNameSolver'\n\ntype DefaultIntlConfig = Pick<IntlConfig, 'formats' | 'messages' | 'timeZone' | 'textComponent' | 'defaultLocale' | 'defaultFormats' | 'onError'>\n\ntype OriginalIntlProviderProps = Alt.Omit<IntlConfig, keyof DefaultIntlConfig> & Partial<DefaultIntlConfig>\n\nexport interface OwnProps extends Alt.Omit<OriginalIntlProviderProps, 'locale' | 'formats' | 'messages'> {\n  availableLocales: Tag[]\n}\n\nexport type StateProps = Pick<OriginalIntlProviderProps, 'locale' | 'formats' | 'messages'>\n\ntype Props =\n  & OwnProps\n  & StateProps\n\n// NOTE: key が無い場合、 FormattedMessage 等は re-render されるが、 useIntl の結果は更新されない。\n// TODO: intl context でない要素を re-render しないようにする。 https://github.com/formatjs/react-intl/issues/234#issuecomment-163366518 によると現時点では難しいらしい。\n// cf. https://github.com/formatjs/react-intl/issues/371#issuecomment-275703796\nconst IntlProvider: React.FunctionComponent<Props> = ({ availableLocales, ...props }) => (\n  <IntlProviderContext.Provider value={ { availableLocales } }>\n    <OriginalIntlProvider key={ props.locale } textComponent={ React.Fragment } { ...props } />\n  </IntlProviderContext.Provider>\n)\n\nexport default IntlProvider\n","import React from 'react'\nimport { connect } from 'react-redux'\n\nimport IntlProvider, { OwnProps, StateProps } from '~/lib/components/IntlProvider'\nimport { State } from '~/redux'\n\nconst mapStateToProps = ({ localeSelector: { locale, formats, messages } }: State, {}: React.PropsWithChildren<OwnProps>): StateProps => ({\n  locale,\n  formats,\n  messages,\n})\n\nexport default connect(mapStateToProps)(IntlProvider)\n","import indigo from '@material-ui/core/colors/indigo'\nimport teal from '@material-ui/core/colors/teal'\nimport createMuiTheme from '@material-ui/core/styles/createMuiTheme'\n\ninterface Props {\n  dark: boolean\n}\n\nconst configureTheme = ({ dark }: Props) => createMuiTheme({\n  typography: {\n    fontFamily: 'sans-serif',\n  },\n  props: {\n    MuiLink: {\n      variant: 'body1',\n    },\n    MuiButton: {\n      variant: 'outlined',\n    },\n    MuiFormControl: {\n      variant: 'outlined',\n    },\n    MuiTextField: {\n      variant: 'outlined',\n    },\n    MuiCheckbox: {\n      color: 'primary',\n    },\n  },\n  palette: {\n    primary: teal,\n    secondary: indigo,\n    type: dark ? 'dark' : 'light',\n  },\n})\n\nexport default configureTheme\n","import React, { useMemo, useState } from 'react'\n\nimport { ThemeProvider as OriginalThemeProvider } from '@material-ui/core/styles'\n\nimport configureTheme from '~/configureTheme'\nimport ThemeProviderContext from '~/contexts/ThemeProviderContext'\n\ninterface ThemeProviderProps {\n  defaultDark: boolean\n}\n\nconst ThemeProvider: React.FunctionComponent<ThemeProviderProps> = ({ children, defaultDark }) => {\n  const [dark, setDark] = useState<boolean | null>(null)\n\n  const theme = useMemo(() => configureTheme({ dark: dark ?? defaultDark }), [dark, defaultDark])\n\n  return (\n    <OriginalThemeProvider theme={ theme }>\n      <ThemeProviderContext.Provider value={ { dark: dark ?? defaultDark, setDark } }>\n        { children }\n      </ThemeProviderContext.Provider>\n    </OriginalThemeProvider>\n  )\n}\n\nexport default ThemeProvider\n","import { Action, Middleware, Reducer } from 'redux'\n\nexport type Invariant<S> = (state: S) => boolean\n\nconst createInvariantMiddleware: <S, A extends Action>(reducer: Reducer<S, A>, invariant: Invariant<S>) => Middleware = (reducer, invariant) => (store) => (next) => (action) => {\n  const oldState = store.getState()\n  const newState = reducer(oldState, action)\n\n  if (!invariant(newState)) {\n    throw new Error('Invariant Violation') // TODO\n  }\n\n  return next(action)\n}\n\nexport default createInvariantMiddleware\n","import { routerMiddleware } from 'connected-react-router'\nimport { History } from 'history'\nimport { Action, Reducer, Store, applyMiddleware, compose, createStore } from 'redux'\nimport { createLogger } from 'redux-logger'\nimport createSagaMiddleware, { SagaMiddleware, SagaMiddlewareOptions } from 'redux-saga'\n\nimport createInvariantMiddleware, { Invariant } from '~/lib/middleware/invariantMiddleware/createInvariantMiddleware'\n\nconst logger = createLogger({\n  diff: true,\n  collapsed: true,\n})\n\nconst composeEnhancers =\n  process.env.NODE_ENV === 'development'\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?? compose // TODO: use globalThis\n    : compose\n\nexport default function configureStore<S, A extends Action>(history: History, reducer: Reducer<S, A>, invariant: Invariant<S>, sagaMiddlewareOptions: SagaMiddlewareOptions): {\n  store: Store<S, A>\n  sagaMiddleware: SagaMiddleware\n} {\n  const sagaMiddleware = createSagaMiddleware(sagaMiddlewareOptions)\n  const invariantMiddleware = createInvariantMiddleware(reducer, invariant)\n\n  const storeEnhancers = [\n    applyMiddleware(sagaMiddleware),\n    applyMiddleware(invariantMiddleware),\n    applyMiddleware(routerMiddleware(history)),\n  ]\n\n  if (process.env.NODE_ENV === 'development') {\n    storeEnhancers.push(applyMiddleware(logger)) // tslint:disable-line:no-array-mutation\n  }\n\n  const store = createStore(\n    reducer,\n    composeEnhancers(...storeEnhancers)\n  )\n\n  return {\n    store,\n    sagaMiddleware, // applied\n  }\n}\n","import { History } from 'history'\nimport React from 'react'\nimport { Provider as OriginalProvider } from 'react-redux'\nimport { Action, Reducer, Store } from 'redux'\nimport { Saga } from 'redux-saga'\n\nimport configureStore from './configureStore'\nimport UnreachableError from './lib/errors/UnreachableError'\nimport { Invariant } from './lib/middleware/invariantMiddleware/createInvariantMiddleware'\n\ntype ErrorCause = 'component' | 'reducer' | 'saga' | 'rootSaga'\n\ninterface Props<S, A extends Action> {\n  /**\n   * @param children that throws {error}\n   * @param store when {error} is thrown\n   */\n  renderError(error: unknown, children: React.ReactNode, store: Store<S, A>, cause: ErrorCause): React.ReactNode\n}\n\ninterface State {\n  hasError: boolean\n  error?: unknown\n  cause?: ErrorCause\n}\n\nconst MAXIMUM_RECURSION_DEPTH = 100\n\nexport default function createProvider<S, A extends Action>(history: History, reducer: Reducer<S, A>, invariant: Invariant<S>, saga: Saga) {\n  let recursionDepth = 0 // tslint:disable-line:no-let\n\n  return class Provider extends React.Component<Props<S, A>, State> {\n    private store: Store<S, A>\n\n    // NOTE: https://github.com/DefinitelyTyped/DefinitelyTyped/blob/826ce0f1ce1d1887d199986283630d6f63075ad5/types/react/index.d.ts#L419 にも関わらず、初期化されていない state は null であるため、初期化を強制するためにプロパティ宣言を行う。\n    public state: Readonly<State> = {\n      hasError: false,\n    }\n\n    constructor(props: Props<S, A>) {\n      super(props)\n\n      const exceptionNeutralReducer: Reducer<S, A> = (state, action) => {\n        try {\n          return reducer(state, action)\n        } catch (error) {\n          this.handleError(error, 'reducer')\n\n          if (state === undefined) {\n            throw new UnreachableError()\n          }\n\n          return state\n        }\n      }\n\n      const { store, sagaMiddleware } = configureStore(history, exceptionNeutralReducer, invariant, {\n        onError: (error) => this.handleError(error, 'saga'),\n      })\n\n      this.store = store\n\n      sagaMiddleware.run(saga).toPromise().catch((error) => this.handleError(error, 'rootSaga'))\n    }\n\n    public static getDerivedStateFromError = (error: unknown) => ({\n      hasError: true,\n      error,\n      cause: 'component',\n    })\n\n    private handleError = (error: unknown, cause: ErrorCause) => {\n      this.setState({\n        hasError: true,\n        error,\n        cause,\n      })\n    }\n\n    public render() {\n      const { renderError, children } = this.props\n      const { hasError, error, cause } = this.state\n\n      if (hasError) {\n        ++recursionDepth\n\n        if (recursionDepth > MAXIMUM_RECURSION_DEPTH) {\n          throw new Error('Maximum recursion depth exceeded')\n        }\n\n        if (cause === undefined) {\n          throw new Error // TODO\n        }\n\n        return renderError(error, children, this.store, cause)\n      }\n\n      return (\n        <OriginalProvider store={ this.store }>\n          { children }\n        </OriginalProvider>\n      )\n    }\n  }\n}\n","import hashCode from './hashCode'\n\nexport {}\n\ndeclare global {\n  interface Boolean {\n    hashCode(): number\n  }\n}\n\nObject.defineProperty(Boolean.prototype, 'hashCode', {\n  value(this: boolean) {\n    return hashCode(this)\n  },\n})\n","export default function hashCode(b: boolean) {\n  return b ? 1231 : 1237\n}\n","import hashCode from './hashCode'\n\nexport {}\n\ndeclare global {\n  interface Number {\n    hashCode(): number\n  }\n}\n\nObject.defineProperty(Number.prototype, 'hashCode', {\n  value(this: number) {\n    return hashCode(this)\n  },\n})\n","import hashCode from './hashCode'\n\nexport {}\n\ndeclare global {\n  interface String {\n    hashCode(): number\n  }\n}\n\nObject.defineProperty(String.prototype, 'hashCode', {\n  value(this: string) {\n    return hashCode(this)\n  },\n})\n","export default function hashCode(s: string) {\n  // tslint:disable-next-line:no-let\n  let result = 0\n\n  // tslint:disable-next-line:no-loop-statement no-let\n  for (let i = 0; i < s.length; ++i) {\n    result = 31 * result + s.charCodeAt(i)\n  }\n\n  return result\n}\n","/* tslint:disable:no-import-side-effect */\n\nimport 'react-app-polyfill/ie11'\nimport 'react-app-polyfill/stable'\n\nimport { ConnectedRouter } from 'connected-react-router'\nimport { History, createBrowserHistory } from 'history'\nimport { List, Map } from 'immutable'\nimport { interfaces } from 'inversify'\nimport { Provider as ServiceProdiver } from 'inversify-react'\nimport { SnackbarProvider } from 'notistack'\nimport React, { useCallback, useMemo } from 'react'\nimport { DndProvider } from 'react-dnd'\nimport HTML5Backend from 'react-dnd-html5-backend'\nimport ReactDOM from 'react-dom'\nimport Helmet from 'react-helmet'\nimport { Saga } from 'redux-saga'\nimport 'reflect-metadata'\n\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\n\nimport App from './components/App'\nimport IntlProvider from './components/IntlProvider'\nimport ThemeProvider from './components/ThemeProvider'\nimport createProvider from './createProvider'\nimport './lib/extensions/Boolean/Boolean.prototype.hashCode'\nimport './lib/extensions/Number/Number.prototype.hashCode'\nimport './lib/extensions/String/String.prototype.hashCode'\nimport typed from './lib/typed'\nimport Service, { State, createReducer, invariant } from './redux'\n\nimport formats from '../public/formats/en.json' // tslint:disable-line:no-relative-imports\nimport messages from '../public/messages/en.json' // tslint:disable-line:no-relative-imports\n\nconst containerImport = process.env.NODE_ENV === 'production' ? import('./container') : import('./container.dev')\n\nconst initialState: Alt.Omit<State, 'router'> = {\n  chess: {\n    board: {\n      chessmen: Map(),\n    },\n  },\n  counter: {\n    count: 0,\n  },\n  io: {\n    now: new Date,\n  },\n  localeSelector: {\n    locale: 'en',\n    formats,\n    messages,\n    errors: List(),\n  },\n  reminder: {\n    tasks: List(),\n    errors: Map(),\n  },\n}\n\ninterface Props {\n  history: History\n  container: interfaces.Container\n}\n\n// NOTE: prefers-color-scheme の変更によって Main が rerender されると、 Provider が変更され、 ThemeProvider の state がリセットされる。\nconst ThemedApp: React.FunctionComponent<{}> = () => {\n  const dark = useMediaQuery('(prefers-color-scheme: dark)')\n\n  return (\n    <ThemeProvider defaultDark={ dark }>\n      <CssBaseline />\n      <SnackbarProvider>\n        <App />\n      </SnackbarProvider>\n    </ThemeProvider>\n  )\n}\n\n/**\n * The entry point component.\n */\nconst Main: React.FunctionComponent<Props> = ({ history, container }) => {\n  const renderError = useCallback((error: unknown) => {\n    if (error instanceof Error) {\n      // NOTE: `rootSaga` とそれに attach された saga から error が投げられた場合、 Maximum recursion depth exceeded が発生する。\n      return (\n        <Provider renderError={ renderError }>\n          <div>\n            { typed<[string]>`${ String(error) }` }\n          </div>\n        </Provider>\n      )\n    }\n\n    throw new TypeError(typed<[string]>`${ String(error) } is not an error.`)\n  }, [])\n\n  const reducer = useMemo(() => createReducer(history, initialState), [history])\n\n  const rootSaga = useCallback<Saga>(() => {\n    const service = container.resolve(Service) // TODO: DI\n\n    return service.rootSaga.call(service)\n  }, [container])\n\n  const Provider = createProvider(history, reducer, invariant, rootSaga)\n\n  return (\n    <>\n      <Helmet\n        titleTemplate=\"%s - react-app-prototype\"\n        defaultTitle=\"react-app-prototype\"\n      />\n      <Provider renderError={ renderError }>\n        <IntlProvider availableLocales={ ['en', 'ja'] }>\n          <DndProvider backend={ HTML5Backend }>\n            <ConnectedRouter history={ history }>\n              <ServiceProdiver container={ container }>\n                <ThemedApp />\n              </ServiceProdiver>\n            </ConnectedRouter>\n          </DndProvider>\n        </IntlProvider>\n      </Provider>\n    </>\n  )\n}\n\ncontainerImport.then(({ default: container }) => {\n  // TODO: DI BASE_NAME\n\n  if (process.env.BASE_NAME === undefined) {\n    throw new Error // TODO\n  }\n\n  const history = createBrowserHistory({\n    basename: process.env.BASE_NAME,\n  })\n\n  ReactDOM.render(<Main history={ history } container={ container } />, document.getElementById('root'))\n})\n"],"sourceRoot":""}