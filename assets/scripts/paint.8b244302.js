(self.webpackChunkreact_app_prototype=self.webpackChunkreact_app_prototype||[]).push([[962],{71289:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ve}});var a=t(67294),r=t(64593),l=t(31753),u=t(72152),c=t(63038),s=t.n(c),o=t(86049),i=t(282),f=t(64436),h=t(30553),v=t(96019),p=t(62822),m=t(50998),d=t(95757),E=t(40074),C=t(67162),b=t(44845),g=t(22318),Z=t(97127),k=t(9192),y=t(88001),x=t(48926),w=t.n(x),A=t(87757),P=t.n(A),S=t(41120),R=t(94184),B=t.n(R),_=t(17109),O=t(66557),M=t(34575),Y=t.n(M),D=t(93913),T=t.n(D),q=t(2205),z=t.n(q),X=t(78585),I=t.n(X),U=t(29754),W=t.n(U);function F(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=W()(e);if(n){var r=W()(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return I()(this,t)}}var N=function(e){z()(t,e);var n=F(t);function t(e){var a,r=e.red,l=e.green,u=e.blue,c=e.alpha;return Y()(this,t),(a=n.call(this)).red=r,a.green=l,a.blue=u,a.alpha=c,a}return T()(t,[{key:"hashCode",value:function(){var e=0;return e=31*(e=31*(e=31*(e=31*e+this.red.hashCode())+this.green.hashCode())+this.blue.hashCode())+this.alpha.hashCode()}}]),t}(t(18982).Z),J=t(33918);function L(e,n){var t=e.x,a=e.y,r=n.getImageData(t,a,1,1),l=s()(r.data,4),u=l[0],c=l[1],o=l[2],i=l[3];return new N({red:u,green:c,blue:o,alpha:i})}function j(e,n,t,a){return G.apply(this,arguments)}function G(){return(G=w()(P().mark((function e(n,t,a,r){var l,u,c,s;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,_.s)(r),l=[],u=L(n,r),l.push(n);case 4:if(0===l.length){e.next=19;break}if(c=l.shift(),(0,_.s)(c),s=L(c,r),u.equals(s)){e.next=10;break}return e.abrupt("continue",4);case 10:return r.fillRect(c.x,c.y,1,1),c.x>0&&l.push({x:c.x-1,y:c.y}),c.y>0&&l.push({x:c.x,y:c.y-1}),c.x<t-1&&l.push({x:c.x+1,y:c.y}),c.y<a-1&&l.push({x:c.x,y:c.y+1}),e.next=17,(0,J.Z)(30);case 17:e.next=4;break;case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H=t(93379),K=t.n(H),Q=t(14830),V={insert:"head",singleton:!1},$=(K()(Q.Z,V),Q.Z.locals||{}),ee=(0,S.Z)({Canvas:function(e){return{width:e.width,height:e.height}}}),ne=(0,a.forwardRef)((function(e,n){var t=e.width,r=e.height,l=e.lineWidth,u=e.context,c=e.tool,o=(0,a.useState)(!1),i=s()(o,2),f=i[0],h=i[1],v=(0,a.useState)(null),p=s()(v,2),m=p[0],d=p[1],E=(0,a.useRef)(null),C=(0,O.Z)(n,E),b=ee({width:t,height:r}),g=(0,a.useMemo)((function(){return B()(b.Canvas,$.Canvas)}),[b.Canvas]),Z=(0,y.Z)().dpr;(0,a.useEffect)((function(){null!=u&&null!==E.current&&null!==Z&&(E.current.width=Z*t,E.current.height=Z*r,u.resetTransform(),u.scale(Z,Z))}),[t,r,u,E,Z]);var k=(0,a.useCallback)((function(e){"pen"===c&&((0,_.N)(m),h(!0),d({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY}))}),[c,m]),x=(0,a.useCallback)((function(e){f&&((0,_.s)(u),(0,_.s)(m),u.lineWidth=l*(0!==e.pressure?e.pressure:1),u.lineJoin="round",u.beginPath(),u.moveTo(m.x,m.y),u.lineTo(e.nativeEvent.offsetX,e.nativeEvent.offsetY),u.stroke(),d({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY}))}),[l,u,f,m]),A=(0,a.useCallback)((function(){h(!1),d(null)}),[]),S=(0,a.useCallback)((function(){h(!1),d(null)}),[]),R=(0,a.useCallback)(function(){var e=w()(P().mark((function e(n){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("bucket"===c){e.next=2;break}return e.abrupt("return");case 2:return(0,_.s)(u),e.next=5,j({x:n.nativeEvent.offsetX,y:n.nativeEvent.offsetY},t,r,u);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[t,r,u,c]);return a.createElement("canvas",{ref:C,className:g,width:t,height:r,onPointerDown:k,onPointerMove:x,onPointerUp:A,onPointerLeave:S,onClick:R})})),te=t(74540),ae=t(20590),re=t(5391),le=t(26663),ue=function(e){var n=e.value,t=e.onChange;return a.createElement(le.Z,{orientation:"vertical",exclusive:!0,value:n,onChange:t},a.createElement(re.Z,{value:"pen"},a.createElement(te.Z,null)),a.createElement(re.Z,{value:"bucket",disabled:!0},a.createElement(ae.Z,null)))},ce=t(85315),se=(0,ce.vU)({clear:{id:"src.components.Paint.clear",defaultMessage:"Clear"},brushSize:{id:"src.components.Paint.brushSize",defaultMessage:"Brush size"}}),oe=(0,k.gB)("butt","round","square"),ie=(0,k.gB)("pen","bucket"),fe=function(){var e=(0,a.useState)(),n=s()(e,2),t=n[0],r=n[1],l=(0,a.useState)("round"),u=s()(l,2),c=u[0],k=u[1],x=(0,a.useState)(10),w=s()(x,2),A=w[0],P=w[1],S=(0,a.useState)("pen"),R=s()(S,2),B=R[0],_=R[1],O=(0,y.Z)().dpr,M=(0,a.useCallback)((function(e){r(null==e?void 0:e.getContext("2d"))}),[]),Y=(0,a.useCallback)((function(){null==t||t.clearRect(0,0,320,320)}),[t]),D=(0,a.useCallback)((function(e,n){ie(n)&&_(n)}),[]),T=(0,a.useCallback)((function(e){oe(e.target.value)&&k(e.target.value)}),[]),q=(0,a.useCallback)((function(e,n){if(Array.isArray(n))throw new Error;P(n)}),[]);return(0,a.useEffect)((function(){null!=t&&(t.lineCap=c)}),[t,c]),a.createElement(a.Fragment,null,a.createElement(ne,{width:320,height:320,lineWidth:A,ref:M,context:t,tool:B}),a.createElement(i.Z,{onClick:Y},a.createElement(Z.Z,se.clear)),a.createElement(ue,{value:B,onChange:D}),a.createElement(f.Z,{disabled:"pen"!==B},a.createElement(v.Z,null,"line cap"),a.createElement(C.Z,{name:"lineCap",value:c,onChange:T},a.createElement(h.Z,{value:"butt",label:"butt",control:a.createElement(E.Z,null)}),a.createElement(h.Z,{value:"round",label:"round",control:a.createElement(E.Z,null)}),a.createElement(h.Z,{value:"square",label:"square",control:a.createElement(E.Z,null)}))),a.createElement(o.Z,{m:1},a.createElement(p.Z,null,a.createElement(m.Z,null,a.createElement(d.Z,null,a.createElement(g.Z,{gutterBottom:!0},a.createElement(Z.Z,se.brushSize)),a.createElement(b.Z,{min:1/(null!=O?O:1),value:A,onChange:q}))))))},he=(0,ce.vU)({paint:{id:"src.components.App.PaintPage.paint",defaultMessage:"Paint"}}),ve=(0,u.D)((function(){var e=(0,l.Z)().formatMessage;return a.createElement(a.Fragment,null,a.createElement(r.Z,{title:e(he.paint)}),a.createElement(fe,null))}))},14830:function(e,n,t){"use strict";var a=t(94015),r=t.n(a),l=t(23645),u=t.n(l)()(r());u.push([e.id,".src-components-Paint-Canvas-classes__Canvas--10YIO {\n  background-color: white; /* TODO */\n}\n","",{version:3,sources:["webpack://./src/components/Paint/Canvas/classes.css"],names:[],mappings:"AAAA;EACE,uBAAuB,EAAE,SAAS;AACpC",sourcesContent:[".Canvas {\n  background-color: white; /* TODO */\n}\n"],sourceRoot:""}]),u.locals={Canvas:"src-components-Paint-Canvas-classes__Canvas--10YIO"},n.Z=u}}]);
//# sourceMappingURL=paint.8b244302.js.map