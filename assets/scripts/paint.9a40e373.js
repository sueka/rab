"use strict";(self.webpackChunkrap=self.webpackChunkrap||[]).push([[6962],{71289:function(e,t,n){n.r(t),n.d(t,{default:function(){return se}});var a=n(67294),l=n(64593),s=n(31753),r=n(13833),u=n(28889),c=n(282),o=n(64436),i=n(30553),h=n(96019),v=n(62822),m=n(50998),d=n(95757),E=n(40074),p=n(67162),f=n(44845),C=n(22318),g=n(97127),b=n(43587),Z=n(16787),k=n(41120),w=n(94184),y=n.n(w),x=n(46121),A=n(17326),P=n(49527),S=n(11634);class M extends S.Z{constructor(e){let{red:t,green:n,blue:a,alpha:l}=e;super(),this.red=t,this.green=n,this.blue=a,this.alpha=l}hashCode(){let e=0;return e=31*e+this.red.hashCode(),e=31*e+this.green.hashCode(),e=31*e+this.blue.hashCode(),e=31*e+this.alpha.hashCode(),e}}function T(e,t){let{x:n,y:a}=e;const{data:[l,s,r,u]}=t.getImageData(n,a,1,1);return(0,x.s)(l),(0,x.s)(s),(0,x.s)(r),(0,x.s)(u),new M({red:l,green:s,blue:r,alpha:u})}var B=n(93379),D=n.n(B),R=n(7795),q=n.n(R),z=n(90569),O=n.n(z),X=n(3565),Y=n.n(X),_=n(19216),L=n.n(_),U=n(44589),W=n.n(U),F=n(14830),I={};I.styleTagTransform=W(),I.setAttributes=Y(),I.insert=O().bind(null,"head"),I.domAPI=q(),I.insertStyleElement=L();D()(F.Z,I);var J=F.Z&&F.Z.locals?F.Z.locals:void 0;const N=(0,k.Z)({Canvas:e=>{let{width:t,height:n}=e;return{width:t,height:n}}});var j=(0,a.forwardRef)(((e,t)=>{let{width:n,height:l,lineWidth:s,context:r,tool:u}=e;const[c,o]=(0,a.useState)(!1),[i,h]=(0,a.useState)(null),v=(0,a.useRef)(null),m=(0,A.Z)(t,v),d=N({width:n,height:l}),E=(0,a.useMemo)((()=>y()(d.Canvas,J.Canvas)),[d.Canvas]),{dpr:p}=(0,Z.Z)();(0,a.useEffect)((()=>{null!=r&&null!==v.current&&null!==p&&(v.current.width=p*n,v.current.height=p*l,r.resetTransform(),r.scale(p,p))}),[n,l,r,v,p]);const f=(0,a.useCallback)((e=>{"pen"===u&&((0,x.M)(i),o(!0),h({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY}))}),[u,i]),C=(0,a.useCallback)((e=>{c&&((0,x.s)(r),(0,x.s)(i),r.lineWidth=s*(0!==e.pressure?e.pressure:1),r.lineJoin="round",r.beginPath(),r.moveTo(i.x,i.y),r.lineTo(e.nativeEvent.offsetX,e.nativeEvent.offsetY),r.stroke(),h({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY}))}),[s,r,c,i]),g=(0,a.useCallback)((()=>{o(!1),h(null)}),[]),b=(0,a.useCallback)((()=>{o(!1),h(null)}),[]),k=(0,a.useCallback)((async e=>{"bucket"===u&&((0,x.s)(r),await async function(e,t,n,a){(0,x.s)(a);const l=[],s=T(e,a);for(l.push(e);0!==l.length;){const e=l.shift();(0,x.s)(e);const r=T(e,a);s.equals(r)&&(a.fillRect(e.x,e.y,1,1),e.x>0&&l.push({x:e.x-1,y:e.y}),e.y>0&&l.push({x:e.x,y:e.y-1}),e.x<t-1&&l.push({x:e.x+1,y:e.y}),e.y<n-1&&l.push({x:e.x,y:e.y+1}),await(0,P.Z)(30))}}({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY},n,l,r))}),[n,l,r,u]);return a.createElement("canvas",{ref:m,className:E,width:n,height:l,onPointerDown:f,onPointerMove:C,onPointerUp:g,onPointerLeave:b,onClick:k})})),G=n(74540),H=n(20590),K=n(5391),Q=n(26663);var V=e=>{let{value:t,onChange:n}=e;return a.createElement(Q.Z,{orientation:"vertical",exclusive:!0,value:t,onChange:n},a.createElement(K.Z,{value:"pen"},a.createElement(G.Z,null)),a.createElement(K.Z,{value:"bucket",disabled:!0},a.createElement(H.Z,null)))},$=n(85315),ee=(0,$.vU)({clear:{id:"src.components.Paint.clear",defaultMessage:"Clear"},brushSize:{id:"src.components.Paint.brushSize",defaultMessage:"Brush size"}});const te=(0,b.gB)("butt","round","square"),ne=(0,b.gB)("pen","bucket");var ae=()=>{const[e,t]=(0,a.useState)(),[n,l]=(0,a.useState)("round"),[s,r]=(0,a.useState)(10),[b,k]=(0,a.useState)("pen"),{dpr:w}=(0,Z.Z)(),y=(0,a.useCallback)((e=>{t(null==e?void 0:e.getContext("2d"))}),[]),x=(0,a.useCallback)((()=>{null==e||e.clearRect(0,0,320,320)}),[e]),A=(0,a.useCallback)(((e,t)=>{ne(t)&&k(t)}),[]),P=(0,a.useCallback)((e=>{te(e.target.value)&&l(e.target.value)}),[]),S=(0,a.useCallback)(((e,t)=>{if(Array.isArray(t))throw new Error;r(t)}),[]);return(0,a.useEffect)((()=>{null!=e&&(e.lineCap=n)}),[e,n]),a.createElement(a.Fragment,null,a.createElement(j,{width:320,height:320,lineWidth:s,ref:y,context:e,tool:b}),a.createElement(c.Z,{onClick:x},a.createElement(g.Z,ee.clear)),a.createElement(V,{value:b,onChange:A}),a.createElement(o.Z,{disabled:"pen"!==b},a.createElement(h.Z,null,"line cap"),a.createElement(p.Z,{name:"lineCap",value:n,onChange:P},a.createElement(i.Z,{value:"butt",label:"butt",control:a.createElement(E.Z,null)}),a.createElement(i.Z,{value:"round",label:"round",control:a.createElement(E.Z,null)}),a.createElement(i.Z,{value:"square",label:"square",control:a.createElement(E.Z,null)}))),a.createElement(u.Z,{m:1},a.createElement(v.Z,null,a.createElement(m.Z,null,a.createElement(d.Z,null,a.createElement(C.Z,{gutterBottom:!0},a.createElement(g.Z,ee.brushSize)),a.createElement(f.Z,{min:1/(null!=w?w:1),value:s,onChange:S}))))))},le=(0,$.vU)({paint:{id:"src.components.App.PaintPage.paint",defaultMessage:"Paint"}});var se=(0,r.D)((()=>{const{formatMessage:e}=(0,s.Z)();return a.createElement(a.Fragment,null,a.createElement(l.Z,{title:e(le.paint)}),a.createElement(ae,null))}))},14830:function(e,t,n){var a=n(87537),l=n.n(a),s=n(23645),r=n.n(s)()(l());r.push([e.id,".src-components-Paint-Canvas-classes__Canvas--aLw0w {\n  background-color: white; /* TODO */\n}\n","",{version:3,sources:["webpack://./src/components/Paint/Canvas/classes.css"],names:[],mappings:"AAAA;EACE,uBAAuB,EAAE,SAAS;AACpC",sourcesContent:[".Canvas {\n  background-color: white; /* TODO */\n}\n"],sourceRoot:""}]),r.locals={Canvas:"src-components-Paint-Canvas-classes__Canvas--aLw0w"},t.Z=r}}]);
//# sourceMappingURL=paint.9a40e373.js.map