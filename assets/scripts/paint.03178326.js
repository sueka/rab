(self.webpackChunkreact_app_prototype=self.webpackChunkreact_app_prototype||[]).push([[962],{22165:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var a=n(67294),l=n(15482),r=n(67100),u=n(63038),c=n.n(u),o=n(86933),i=n(64436),s=n(30553),f=n(96019),h=n(40074),v=n(35166),p=n(67154),d=n.n(p),m=n(70214),E=n(34575),g=n.n(E),C=n(93913),b=n.n(C),x=n(2205),y=n.n(x),k=n(78585),Z=n.n(k),w=n(29754),R=n.n(w);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=R()(e);if(t){var l=R()(this).constructor;n=Reflect.construct(a,arguments,l)}else n=a.apply(this,arguments);return Z()(this,n)}}var P=function(e){y()(n,e);var t=_(n);function n(e){var a,l=e.red,r=e.green,u=e.blue,c=e.alpha;return g()(this,n),(a=t.call(this)).red=l,a.green=r,a.blue=u,a.alpha=c,a}return b()(n,[{key:"hashCode",value:function(){var e=0;return e=31*(e=31*(e=31*(e=31*e+this.red.hashCode())+this.green.hashCode())+this.blue.hashCode())+this.alpha.hashCode()}}]),n}(n(76117).Z);function D(e,t){var n=e.x,a=e.y,l=t.getImageData(n,a,1,1),r=c()(l.data,4),u=r[0],o=r[1],i=r[2],s=r[3];return new P({red:u,green:o,blue:i,alpha:s})}var S=n(58278),M=n.n(S),q=function(e){var t=e.width,n=e.height,l=e.lineWidth,r=e.innerRef,u=e.context,o=e.tool,i=(0,a.useState)(!1),s=c()(i,2),f=s[0],h=s[1],v=(0,a.useState)(null),p=c()(v,2),d=p[0],E=p[1],g=(0,a.useCallback)((function(e){"pen"===o&&((0,m.N)(d),h(!0),E({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY}))}),[o,d]),C=(0,a.useCallback)((function(e){f&&((0,m.s)(u),(0,m.s)(d),u.lineWidth=l*e.pressure,u.lineJoin="round",u.beginPath(),u.moveTo(d.x,d.y),u.lineTo(e.nativeEvent.offsetX,e.nativeEvent.offsetY),u.stroke(),E({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY}))}),[l,u,f,d]),b=(0,a.useCallback)((function(){h(!1),E(null)}),[]),x=(0,a.useCallback)((function(){h(!1),E(null)}),[]),y=(0,a.useCallback)((function(e){"bucket"===o&&((0,m.s)(u),function(e,t,n,a){(0,m.s)(a);var l=[],r=D(e,a);for(l.push(e);0!==l.length;){var u=l.shift();(0,m.s)(u);var c=D(u,a);r.equals(c)&&(a.fillRect(u.x,u.y,1,1),u.x>0&&l.push({x:u.x-1,y:u.y}),u.y>0&&l.push({x:u.x,y:u.y-1}),u.x<t-1&&l.push({x:u.x+1,y:u.y}),u.y<n-1&&l.push({x:u.x,y:u.y+1}))}}({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY},t,n,u))}),[t,n,u,o]);return a.createElement("canvas",{ref:r,className:M().Canvas,width:t,height:n,onPointerDown:g,onPointerMove:C,onPointerUp:b,onPointerLeave:x,onClick:y})},X=(0,a.forwardRef)((function(e,t){return a.createElement(q,d()({innerRef:t},e))})),Y=n(282),I=function(e){var t=e.children,n=e.width,l=e.height,r=e.context,u=(0,a.useCallback)((function(){null==r||r.clearRect(0,0,n,l)}),[r,n,l]);return a.createElement(Y.Z,{onClick:u},t)},N=n(74540),T=n(20590),U=function(e){var t=e.value,n=e.onChange;return a.createElement(i.Z,null,a.createElement(v.Z,{name:"tool",value:t,onChange:n},a.createElement(h.Z,{icon:a.createElement(N.Z,null),checkedIcon:a.createElement(N.Z,null),value:"pen"}),a.createElement(h.Z,{icon:a.createElement(T.Z,null),checkedIcon:a.createElement(T.Z,null),value:"bucket"})))},W=n(30054),B=n(62945),F=(0,B.vU)({clear:{id:"src.components.Paint.clear",defaultMessage:"clear"}}),O=(0,W.gB)("butt","round","square"),A=(0,W.gB)("pen","bucket"),J=function(){var e=(0,a.useState)(),t=c()(e,2),n=t[0],l=t[1],r=(0,a.useState)("round"),u=c()(r,2),p=u[0],d=u[1],m=(0,a.useState)("pen"),E=c()(m,2),g=E[0],C=E[1],b=(0,a.useCallback)((function(e){l(null==e?void 0:e.getContext("2d"))}),[]),x=(0,a.useCallback)((function(e,t){A(t)&&C(t)}),[]),y=(0,a.useCallback)((function(e){O(e.target.value)&&d(e.target.value)}),[]);return(0,a.useEffect)((function(){null!=n&&(n.lineCap=p)}),[n,p]),a.createElement(a.Fragment,null,a.createElement(X,{width:320,height:320,lineWidth:10,ref:b,context:n,tool:g}),a.createElement(I,{width:320,height:320,context:n},a.createElement(o.Z,F.clear)),a.createElement(U,{value:g,onChange:x}),a.createElement(i.Z,{disabled:"pen"!==g},a.createElement(f.Z,null,"line cap"),a.createElement(v.Z,{name:"lineCap",value:p,onChange:y},a.createElement(s.Z,{value:"butt",label:"butt",control:a.createElement(h.Z,null)}),a.createElement(s.Z,{value:"round",label:"round",control:a.createElement(h.Z,null)}),a.createElement(s.Z,{value:"square",label:"square",control:a.createElement(h.Z,null)}))))},L=n(80508),j=(0,B.vU)({paint:{id:"src.components.App.PaintPage.paint",defaultMessage:"paint"}}),z=(0,L.D)((function(){var e=(0,r.Z)().formatMessage;return a.createElement(a.Fragment,null,a.createElement(l.ZP,{title:e(j.paint)}),a.createElement(J,null))}))},70214:function(e,t,n){"use strict";function a(e){if(null==e)throw new Error}function l(e){if(null!=e)throw new Error}n.d(t,{s:function(){return a},N:function(){return l}})},63679:function(e,t,n){(t=n(23645)(!1)).push([e.id,".src-components-Canvas-classes__Canvas--_x96R {\n  background-color: white; /* TODO */\n}\n",""]),t.locals={Canvas:"src-components-Canvas-classes__Canvas--_x96R"},e.exports=t},58278:function(e,t,n){var a=n(93379),l=n(63679);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.id,l,""]]);var r={insert:"head",singleton:!1};a(l,r);e.exports=l.locals||{}}}]);
//# sourceMappingURL=paint.03178326.js.map