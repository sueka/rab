(self.webpackChunkreact_app_prototype=self.webpackChunkreact_app_prototype||[]).push([[962],{71289:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Q}});var a=t(67294),l=t(64593),r=t(31753),u=t(88073),c=t(63038),o=t.n(c),s=t(282),i=t(64436),f=t(30553),v=t(96019),h=t(40074),p=t(67162),m=t(97127),d=t(9192),C=t(67154),E=t.n(C),g=t(17109),b=t(34575),y=t.n(b),k=t(93913),Z=t.n(k),x=t(2205),A=t.n(x),P=t(78585),w=t.n(P),R=t(29754),_=t.n(R);function O(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=_()(e);if(n){var l=_()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return w()(this,t)}}var S=function(e){A()(t,e);var n=O(t);function t(e){var a,l=e.red,r=e.green,u=e.blue,c=e.alpha;return y()(this,t),(a=n.call(this)).red=l,a.green=r,a.blue=u,a.alpha=c,a}return Z()(t,[{key:"hashCode",value:function(){var e=0;return e=31*(e=31*(e=31*(e=31*e+this.red.hashCode())+this.green.hashCode())+this.blue.hashCode())+this.alpha.hashCode()}}]),t}(t(18982).Z);function B(e,n){var t=e.x,a=e.y,l=n.getImageData(t,a,1,1),r=o()(l.data,4),u=r[0],c=r[1],s=r[2],i=r[3];return new S({red:u,green:c,blue:s,alpha:i})}var Y=t(93379),D=t.n(Y),q=t(14830),M={insert:"head",singleton:!1},T=(D()(q.Z,M),q.Z.locals||{}),X=function(e){var n=e.width,t=e.height,l=e.lineWidth,r=e.innerRef,u=e.context,c=e.tool,s=(0,a.useState)(!1),i=o()(s,2),f=i[0],v=i[1],h=(0,a.useState)(null),p=o()(h,2),m=p[0],d=p[1],C=(0,a.useCallback)((function(e){"pen"===c&&((0,g.N)(m),v(!0),d({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY}))}),[c,m]),E=(0,a.useCallback)((function(e){f&&((0,g.s)(u),(0,g.s)(m),u.lineWidth=l*e.pressure,u.lineJoin="round",u.beginPath(),u.moveTo(m.x,m.y),u.lineTo(e.nativeEvent.offsetX,e.nativeEvent.offsetY),u.stroke(),d({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY}))}),[l,u,f,m]),b=(0,a.useCallback)((function(){v(!1),d(null)}),[]),y=(0,a.useCallback)((function(){v(!1),d(null)}),[]),k=(0,a.useCallback)((function(e){"bucket"===c&&((0,g.s)(u),function(e,n,t,a){(0,g.s)(a);var l=[],r=B(e,a);for(l.push(e);0!==l.length;){var u=l.shift();(0,g.s)(u);var c=B(u,a);r.equals(c)&&(a.fillRect(u.x,u.y,1,1),u.x>0&&l.push({x:u.x-1,y:u.y}),u.y>0&&l.push({x:u.x,y:u.y-1}),u.x<n-1&&l.push({x:u.x+1,y:u.y}),u.y<t-1&&l.push({x:u.x,y:u.y+1}))}}({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY},n,t,u))}),[n,t,u,c]);return a.createElement("canvas",{ref:r,className:T.Canvas,width:n,height:t,onPointerDown:C,onPointerMove:E,onPointerUp:b,onPointerLeave:y,onClick:k})},I=(0,a.forwardRef)((function(e,n){return a.createElement(X,E()({innerRef:n},e))})),U=t(74540),W=t(20590),F=t(5391),N=t(26663),J=function(e){var n=e.value,t=e.onChange;return a.createElement(N.Z,{orientation:"vertical",exclusive:!0,value:n,onChange:t},a.createElement(F.Z,{value:"pen"},a.createElement(U.Z,null)),a.createElement(F.Z,{value:"bucket"},a.createElement(W.Z,null)))},L=t(85315),j=(0,L.vU)({clear:{id:"src.components.Paint.clear",defaultMessage:"Clear"}}),z=(0,d.gB)("butt","round","square"),G=(0,d.gB)("pen","bucket"),H=function(){var e=(0,a.useState)(),n=o()(e,2),t=n[0],l=n[1],r=(0,a.useState)("round"),u=o()(r,2),c=u[0],d=u[1],C=(0,a.useState)("pen"),E=o()(C,2),g=E[0],b=E[1],y=(0,a.useCallback)((function(e){l(null==e?void 0:e.getContext("2d"))}),[]),k=(0,a.useCallback)((function(){null==t||t.clearRect(0,0,320,320)}),[t]),Z=(0,a.useCallback)((function(e,n){G(n)&&b(n)}),[]),x=(0,a.useCallback)((function(e){z(e.target.value)&&d(e.target.value)}),[]);return(0,a.useEffect)((function(){null!=t&&(t.lineCap=c)}),[t,c]),a.createElement(a.Fragment,null,a.createElement(I,{width:320,height:320,lineWidth:10,ref:y,context:t,tool:g}),a.createElement(s.Z,{onClick:k},a.createElement(m.Z,j.clear)),a.createElement(J,{value:g,onChange:Z}),a.createElement(i.Z,{disabled:"pen"!==g},a.createElement(v.Z,null,"line cap"),a.createElement(p.Z,{name:"lineCap",value:c,onChange:x},a.createElement(f.Z,{value:"butt",label:"butt",control:a.createElement(h.Z,null)}),a.createElement(f.Z,{value:"round",label:"round",control:a.createElement(h.Z,null)}),a.createElement(f.Z,{value:"square",label:"square",control:a.createElement(h.Z,null)}))))},K=(0,L.vU)({paint:{id:"src.components.App.PaintPage.paint",defaultMessage:"Paint"}}),Q=(0,u.D)((function(){var e=(0,r.Z)().formatMessage;return a.createElement(a.Fragment,null,a.createElement(l.Z,{title:e(K.paint)}),a.createElement(H,null))}))},14830:function(e,n,t){"use strict";var a=t(94015),l=t.n(a),r=t(23645),u=t.n(r)()(l());u.push([e.id,".src-components-Paint-Canvas-classes__Canvas--10YIO {\n  background-color: white; /* TODO */\n}\n","",{version:3,sources:["webpack://./src/components/Paint/Canvas/classes.css"],names:[],mappings:"AAAA;EACE,uBAAuB,EAAE,SAAS;AACpC",sourcesContent:[".Canvas {\n  background-color: white; /* TODO */\n}\n"],sourceRoot:""}]),u.locals={Canvas:"src-components-Paint-Canvas-classes__Canvas--10YIO"},n.Z=u}}]);
//# sourceMappingURL=paint.7c2bffbb.js.map