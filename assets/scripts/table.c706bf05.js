(self.webpackChunkrap=self.webpackChunkrap||[]).push([[4986],{19593:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return L}});var r=t(95477),l=t(67294),a=t(64593),s=t(31753),u=t(35369),i=t(15659),o=t(26353),c=t(79895),E=t(82302),d=t(99613),f=t(17196),m=t(56847),S=t(83750),v=t(57394),y=t(77256);function p(e,n){return e<n?-1:e>n?1:0}var h=({columns:e,rows:n,defaultSortOrder:t="asc"})=>{const[r,a]=(0,l.useState)([]),s=(0,l.useMemo)((()=>r[0]),[r]),i=(0,l.useCallback)((e=>()=>{if(e===(null==s?void 0:s.by))a((([e,...n])=>[{by:e.by,in:"asc"===e.in?"desc":"asc"},...n]));else{const n=r.findIndex((n=>n.by===e));a(-1===n?n=>[{by:e,in:t},...n]:e=>[e[n],...e.slice(0,n),...e.slice(n+1)])}}),[t,r,s]),o=(0,l.useMemo)((()=>r.reduceRight(((e,n)=>e.sortBy((e=>String(e[n.by])),((e,t)=>{switch(n.in){case"asc":return p(e,t);case"desc":return-p(e,t)}}))),(0,u.aV)(n)).toArray()),[r,n]);return l.createElement(m.Z,{component:c.Z},l.createElement(E.Z,null,l.createElement(S.Z,null,l.createElement(v.Z,null,e.map((e=>{var n,a,u;return l.createElement(f.Z,{variant:"head",key:e.field},l.createElement(y.Z,{active:(null==s?void 0:s.by)===e.field,direction:null!==(n=null===(a=r.find((n=>n.by===e.field)))||void 0===a?void 0:a.in)&&void 0!==n?n:t,onClick:i(e.field)},null!==(u=e.label)&&void 0!==u?u:e.field))})))),l.createElement(d.Z,null,o.map(((n,t)=>l.createElement(v.Z,{hover:!0,key:t},(0,u.zN)(Object.entries(n)).sortBy(((n,t)=>e.findIndex((e=>e.field===t))),((e,n)=>e-n)).map(((e,n)=>l.createElement(f.Z,{key:n},e))).valueSeq().toArray()))))))},b=t(38780),_=t(46121),O=t(37868);var g=t(25818),w=t(13665);const Z=w.vl,A=(0,w.P7)(Z),I=(0,w.El)("DIMENSION_UNSPECIFIED","COLUMNS","ROWS"),N=(0,w.jt)((0,w.su)((e=>({range:(0,w.XC)(e.range),majorDimension:I(e.majorDimension),values:A(e.values)}))));function T(e){switch(typeof e){case"string":case"number":return!0;default:return!1}}var k=()=>{const e=(0,i.useInjection)("EnvVarConfig"),n=function(e,n){const[t,r]=(0,l.useState)(null),[a,s]=(0,l.useState)(null),[u,i]=(0,l.useState)(null),[o,c]=(0,l.useState)(null);switch((0,l.useEffect)((()=>{r((0,O.ZP)(e,n)),c("pending")}),[e,n]),o){case"pending":throw(0,_.s)(t),t.then((e=>{s(e),c("fulfilled")})).catch((e=>{if(!(e instanceof Error))throw new TypeError("Non-error reason caught.");i(e),c("rejected")}));case null:case"fulfilled":return a;case"rejected":throw u}}((0,o.Gn)(g.Z`${e.get("SHEETS_API_URL")}/spreadsheets/:spreadsheetId/values/:sheetName\\?key=:apiKey`,{spreadsheetId:e.get("GOOGLE_SHEETS_FOSS_COMPARISON_TABLE_SHEET_ID"),sheetName:e.get("GOOGLE_SHEETS_FOSS_COMPARISON_TABLE_SHEET_SHEET_NAME"),apiKey:e.get("GOOGLE_CLOUD_APIS_GOOGLE_SHEETS_API_KEY")})),[t,r]=(0,l.useState)(null),[a,s]=(0,l.useState)(null);return(0,l.useEffect)((()=>{(async()=>{const e=N(await(null==n?void 0:n.json()));if(void 0===e)return;if("ROWS"!==(null==e?void 0:e.majorDimension))throw new Error("Dimension unsupported.");if(!e.values.every(Array.isArray))throw new Error("Less than 2 dimensions found.");if(!e.values.every((e=>e.every(T))))throw new Error("Neither string nor number value found.");const[t,...l]=e.values,a=t.map(((e,n)=>g.Z`${e}_${n}`));r(Array.from((0,b.Z)(a,t)).map((([e,n])=>({field:e,label:n})))),s(l.map((e=>Object.fromEntries((0,b.Z)(a,e)))))})()}),[n]),null===t||null===a?null:l.createElement(h,{columns:(0,u.aV)(t).sortBy((e=>e.field),((e,n)=>e<n?-1:e>n?1:0)).toArray(),rows:a})},C=t(13833),j=(0,t(85315).vU)({table:{id:"src.components.App.TablePage.table",defaultMessage:"Table"}});var L=(0,C.D)((()=>{const{formatMessage:e}=(0,s.Z)();return l.createElement(l.Fragment,null,l.createElement(a.q,{title:e(j.table)}),l.createElement(l.Suspense,{fallback:l.createElement(r.Z,null)},l.createElement(k,null)))}))}}]);
//# sourceMappingURL=table.c706bf05.js.map