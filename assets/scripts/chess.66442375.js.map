{"version":3,"file":"assets/scripts/chess.66442375.js","mappings":"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","sources":["webpack://rap/./src/contexts/ChessContext.ts","webpack://rap/./src/extensions/Eq/equalsChessCoordinates.ts","webpack://rap/./src/components/Chessboard/Chessman/classes.css?f6d1","webpack://rap/./src/components/Chessboard/Chessman/index.tsx","webpack://rap/./src/components/Chessboard/Square/classes.css?8097","webpack://rap/./src/components/Chessboard/Square/index.tsx","webpack://rap/./src/utils/chess/getColorFromCoordinates.ts","webpack://rap/./src/components/Chessboard/classes.css?b371","webpack://rap/./src/components/Chessboard/index.tsx","webpack://rap/./src/components/App/ChessPage/messages.ts","webpack://rap/./src/components/App/ChessPage/index.tsx","webpack://rap/./src/components/Chessboard/Chessman/classes.css","webpack://rap/./src/components/Chessboard/Square/classes.css","webpack://rap/./src/components/Chessboard/classes.css"],"sourcesContent":["import { createContext } from 'react'\n\ninterface ChessContext {\n  picking: {\n    chessman: Chess.Chessman\n    source: Chess.Coordinates\n  } | undefined | null\n  targets: Chess.Coordinates[] | undefined | null\n  halfMove: ((chessman: Chess.Chessman, source: Chess.Coordinates, target: Chess.Coordinates) => void) | undefined | null\n  pickChessman: ((chessman: Chess.Chessman, source: Chess.Coordinates) => void) | undefined | null\n  releaseChessman: (() => void) | undefined | null\n}\n\nexport default createContext<ChessContext>({\n  picking: null,\n  targets: null,\n  halfMove: null,\n  pickChessman: null,\n  releaseChessman: null,\n})\n","// TODO: remove?\nexport default function equalsChessCoordinates(x: Chess.Coordinates, y: Chess.Coordinates): boolean {\n  return x.file === y.file && x.rank === y.rank\n}\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!../../../../node_modules/postcss-loader/dist/cjs.js!./classes.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!../../../../node_modules/postcss-loader/dist/cjs.js!./classes.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { Theme, makeStyles } from '@material-ui/core/styles'\nimport classnames from 'classnames'\nimport React, { useCallback, useContext, useMemo } from 'react'\nimport { useDrag } from 'react-dnd'\n\nimport ChessContext from '~/contexts/ChessContext'\nimport equalsChessCoordinates from '~/extensions/Eq/equalsChessCoordinates'\nimport equalsChessmen from '~/extensions/Eq/equalsChessmen'\nimport classes from './classes.css'\n\nexport interface Props {\n  chessman: Chess.Chessman\n  coord: Chess.Coordinates\n}\n\ninterface CollectedProps {\n  dragging: boolean\n}\n\ndeclare module '@material-ui/core/styles/createPalette' {\n  interface PaletteColor {\n    A700: string\n  }\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  Chessman: {\n    '&$Picking:not($Dragging)': {\n      color: theme.palette.primary.A700,\n    },\n  },\n  Picking: {},\n  Dragging: {},\n}))\n\nconst Chessman: React.FC<Props> = ({ chessman, coord }) => {\n  const { picking, pickChessman } = useContext(ChessContext)\n  const jssClasses = useStyles()\n\n  const [{ dragging }, drag, preview] = useDrag<{}, unknown, CollectedProps>({\n    type: 'Chessman',\n    collect: (monitor) => ({\n      dragging: monitor.isDragging(),\n    }),\n    item() {\n      pickChessman?.(chessman, coord)\n\n      return {} // NOTE: return 無しだと drag がキャンセルされる。\n    },\n  })\n\n  const chessmanClassName = useMemo(() => classnames(jssClasses.Chessman, classes.Chessman, {\n    [jssClasses.Dragging]: dragging,\n    [jssClasses.Picking]: picking != null && equalsChessCoordinates(coord, picking.source) && equalsChessmen(chessman, picking.chessman), // NOTE: ChessInvariant ensures equalsChessCoordinates(coord, picking.source) → equalsChessmen(chessman, picking.chessman)\n    [classes.Dragging]: dragging,\n  }), [jssClasses.Chessman, jssClasses.Dragging, jssClasses.Picking, dragging, chessman, coord, picking])\n\n  const chessmanPreviewClassName = useMemo(() => classnames(jssClasses.Chessman, classes.Chessman, classes.Preview), [jssClasses.Chessman])\n\n  const handleChessmanClick = useCallback(() => {\n    if (picking == null) { // FIXME\n      pickChessman?.(chessman, coord)\n    }\n  }, [picking, pickChessman, chessman, coord])\n\n  return (\n    <>\n      <span ref={ preview } className={ chessmanPreviewClassName }>\n        { chessman.symbol }\n      </span>\n      <span ref={ drag } className={ chessmanClassName } onClick={ handleChessmanClick }>\n        { chessman.symbol }\n      </span>\n    </>\n  )\n}\n\nexport default Chessman\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!../../../../node_modules/postcss-loader/dist/cjs.js!./classes.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!../../../../node_modules/postcss-loader/dist/cjs.js!./classes.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { Theme, makeStyles } from '@material-ui/core/styles'\nimport classnames from 'classnames'\nimport React, { useCallback, useContext, useMemo } from 'react'\nimport { useDrop } from 'react-dnd'\n\nimport { Props as ChessmanProps } from '~/components/Chessboard/Chessman'\nimport ChessContext from '~/contexts/ChessContext'\nimport equalsChessCoordinates from '~/extensions/Eq/equalsChessCoordinates'\nimport getColorFromCoordinates from '~/utils/chess/getColorFromCoordinates'\nimport classes from './classes.css'\n\ninterface Props extends React.PropsWithChildren<{}> {\n  children?: React.ReactElement<ChessmanProps, React.ComponentType<ChessmanProps>> | null\n  coord: Chess.Coordinates\n}\n\ndeclare module '@material-ui/core/styles/createPalette' {\n  interface PaletteColor {\n    '100': string\n  }\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  Square: {\n    '&$Square$Target': { // NOTE: 詳細度を CSS の .White.Square より大きくするためにセレクターを冗長にしている。\n      backgroundColor: theme.palette.primary['100'],\n    },\n  },\n  Target: {},\n}))\n\nconst Square: React.FC<Props> = ({ children, coord }: Props) => {\n  const { picking, targets, halfMove, releaseChessman } = useContext(ChessContext)\n  const jssClasses = useStyles()\n\n  const attacked = useMemo(() => targets?.some((target) => equalsChessCoordinates(coord, target)) ?? false, [coord, targets])\n\n  const [, drop] = useDrop<{}, unknown, unknown>({\n    accept: 'Chessman',\n    drop() {\n      if (picking != null) {\n        if (attacked) {\n          halfMove?.(picking.chessman, picking.source, coord)\n        } else {\n          releaseChessman?.()\n        }\n      }\n    },\n  })\n\n  const color = useMemo(() => getColorFromCoordinates(coord), [coord])\n\n  const squareClassName = useMemo(() => classnames(jssClasses.Square, classes.Square, {\n    [classes.White]: color === 'white',\n    [classes.Black]: color === 'black',\n    [jssClasses.Target]: attacked,\n  }), [jssClasses.Square, jssClasses.Target, color, attacked])\n\n  const handleSquareClick = useCallback(() => {\n    if (picking != null) {\n      if (attacked) {\n        halfMove?.(picking.chessman, picking.source, coord)\n      } else {\n        releaseChessman?.()\n      }\n    }\n  }, [halfMove, picking, coord, releaseChessman, attacked])\n\n  return (\n    <div ref={ drop } className={ squareClassName } onClick={ handleSquareClick }>\n      { children }\n    </div>\n  )\n}\n\nexport default Square\n","export default function getColorFromCoordinates({ file, rank }: Chess.Coordinates): Chess.Color {\n  return file % 2 === rank % 2 ? 'black' : 'white'\n}\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!../../../node_modules/postcss-loader/dist/cjs.js!./classes.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!../../../node_modules/postcss-loader/dist/cjs.js!./classes.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\n\nimport Coordinates from '~/domain/vo/Coordinates'\nimport { State } from '~/redux'\nimport { resetBoard } from '~/redux/modules/chess'\nimport Chessman from './Chessman'\nimport Square from './Square'\nimport classes from './classes.css'\n\ninterface StateProps {\n  board: Chess.Chessboard\n}\n\ninterface DispatchProps {\n  resetBoard(): void\n}\n\ntype Props =\n  & StateProps\n  & DispatchProps\n\nconst files: Chess.File[] = [1, 2, 3, 4, 5, 6, 7, 8]\nconst ranks: Chess.Rank[] = [8, 7, 6, 5, 4, 3, 2, 1]\n\nconst Chessboard: React.FC<Props> = ({ board, resetBoard }) => {\n  useEffect(() => {\n    resetBoard() // TODO: Skip when LOCATION_CHANGE is dispatched\n  }, [resetBoard])\n\n  return (\n    <table className={ classes.ChessboardTable } dir=\"ltr\">\n      <tbody>\n        { ranks.map((rank) => (\n          <tr key={ rank }>\n            { files.map((file) => {\n              const coord = new Coordinates({ file, rank })\n              const chessman = board.chessmen.get(coord)\n\n              return (\n                <td key={ file } className={ classes.ChessboardTd }>\n                  <Square coord={ coord }>\n                    { chessman !== undefined ? (\n                      <Chessman chessman={ chessman } coord={ coord } />\n                    ) : null }\n                  </Square>\n                </td>\n              )\n            }) }\n          </tr>\n        )) }\n      </tbody>\n    </table>\n  )\n}\n\n// connect\n\nconst mapStateToProps = ({ chess: { board } }: State): StateProps => ({\n  board,\n})\n\nconst mapDispatchToProps: DispatchProps = {\n  resetBoard,\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Chessboard)\n","import { defineMessages } from 'react-intl'\n\nexport default defineMessages({\n  chess: 'Chess',\n})\n","import React from 'react'\nimport Helmet from 'react-helmet'\nimport { useIntl } from 'react-intl'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { compose } from 'redux'\n\nimport Chessboard from '~/components/Chessboard'\nimport { createPage } from '~/components/PageTemplate'\nimport ChessContext from '~/contexts/ChessContext'\nimport { State } from '~/redux'\nimport { halfMove, pickChessman, releaseChessman } from '~/redux/modules/chess'\nimport messages from './messages'\n\nconst ChessPage: React.FC = () => {\n  const { formatMessage } = useIntl()\n\n  const picking = useSelector((state: State) => state.chess.picking)\n  const targets = useSelector((state: State) => state.chess.targets)\n\n  const dispatch = useDispatch()\n\n  return (\n    <>\n      <Helmet title={ formatMessage(messages.chess) } />\n      <ChessContext.Provider\n        value={ {\n          picking,\n          targets,\n          halfMove: compose(dispatch, halfMove),\n          pickChessman: compose(dispatch, pickChessman),\n          releaseChessman: compose(dispatch, releaseChessman),\n        } }\n      >\n        <Chessboard />\n      </ChessContext.Provider>\n    </>\n  )\n}\n\nexport default createPage(ChessPage)\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".src-components-Chessboard-Chessman-classes__Chessman--ymJCi {\\n  font-family: \\\"Apple Symbols\\\", sans-serif;\\n  color: #222;\\n}\\n\\n.src-components-Chessboard-Chessman-classes__Chessman--ymJCi.src-components-Chessboard-Chessman-classes__Dragging--gMG9R {\\n  opacity: 0.5;\\n}\\n\\n/* TODO: in a little more normal way */\\n.src-components-Chessboard-Chessman-classes__Chessman--ymJCi.src-components-Chessboard-Chessman-classes__Preview--Dk6Zm {\\n  position: absolute;\\n  z-index: -1;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Chessboard/Chessman/classes.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,wCAAwC;EACxC,WAAW;AACb;;AAEA;EACE,YAAY;AACd;;AAEA,sCAAsC;AACtC;EACE,kBAAkB;EAClB,WAAW;AACb\",\"sourcesContent\":[\".Chessman {\\n  font-family: \\\"Apple Symbols\\\", sans-serif;\\n  color: #222;\\n}\\n\\n.Chessman.Dragging {\\n  opacity: 0.5;\\n}\\n\\n/* TODO: in a little more normal way */\\n.Chessman.Preview {\\n  position: absolute;\\n  z-index: -1;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Chessman\": \"src-components-Chessboard-Chessman-classes__Chessman--ymJCi\",\n\t\"Dragging\": \"src-components-Chessboard-Chessman-classes__Dragging--gMG9R\",\n\t\"Preview\": \"src-components-Chessboard-Chessman-classes__Preview--Dk6Zm\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".src-components-Chessboard-Square-classes__Square--MHD9B {\\n  height: 32px;\\n  width: 32px;\\n  font-size: 20px; /* of chessman; FIXME */\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n\\n  --white-square-color: white;\\n  --black-square-color: #c0c0c0;\\n}\\n\\n/* NOTE: できれば .Square.White にしたいが、そうすると postcss-css-variables がうまく動作しない。 */\\n.src-components-Chessboard-Square-classes__White--fufbm.src-components-Chessboard-Square-classes__Square--MHD9B {\\n  background-color: white;\\n  background-color: var(--white-square-color);\\n}\\n\\n.src-components-Chessboard-Square-classes__Black--VEuUO.src-components-Chessboard-Square-classes__Square--MHD9B {\\n  background-color: #c0c0c0;\\n  background-color: var(--black-square-color);\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Chessboard/Square/classes.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,YAAY;EACZ,WAAW;EACX,eAAe,EAAE,uBAAuB;EACxC,aAAa;EACb,mBAAmB;EACnB,uBAAuB;;EAEvB,2BAA2B;EAC3B,6BAA6B;AAC/B;;AAEA,0EAA0E;AAC1E;EACE,uBAA2C;EAA3C,2CAA2C;AAC7C;;AAEA;EACE,yBAA2C;EAA3C,2CAA2C;AAC7C\",\"sourcesContent\":[\".Square {\\n  height: 32px;\\n  width: 32px;\\n  font-size: 20px; /* of chessman; FIXME */\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n\\n  --white-square-color: white;\\n  --black-square-color: #c0c0c0;\\n}\\n\\n/* NOTE: できれば .Square.White にしたいが、そうすると postcss-css-variables がうまく動作しない。 */\\n.White.Square {\\n  background-color: var(--white-square-color);\\n}\\n\\n.Black.Square {\\n  background-color: var(--black-square-color);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Square\": \"src-components-Chessboard-Square-classes__Square--MHD9B\",\n\t\"White\": \"src-components-Chessboard-Square-classes__White--fufbm\",\n\t\"Black\": \"src-components-Chessboard-Square-classes__Black--VEuUO\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".src-components-Chessboard-classes__ChessboardTable--s9Dl2 {\\n  border-collapse: collapse;\\n}\\n\\n.src-components-Chessboard-classes__ChessboardTd--hTy9c {\\n  padding: 0;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Chessboard/classes.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,yBAAyB;AAC3B;;AAEA;EACE,UAAU;AACZ\",\"sourcesContent\":[\".ChessboardTable {\\n  border-collapse: collapse;\\n}\\n\\n.ChessboardTd {\\n  padding: 0;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"ChessboardTable\": \"src-components-Chessboard-classes__ChessboardTable--s9Dl2\",\n\t\"ChessboardTd\": \"src-components-Chessboard-classes__ChessboardTd--hTy9c\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["createContext","picking","targets","halfMove","pickChessman","releaseChessman","equalsChessCoordinates","x","y","file","rank","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","useStyles","makeStyles","theme","Chessman","color","palette","primary","A700","Picking","Dragging","chessman","coord","useContext","ChessContext","jssClasses","dragging","drag","preview","useDrag","type","collect","monitor","isDragging","item","chessmanClassName","useMemo","classnames","classes","source","equalsChessmen","chessmanPreviewClassName","handleChessmanClick","useCallback","ref","className","symbol","onClick","Square","backgroundColor","Target","children","attacked","some","target","drop","useDrop","accept","getColorFromCoordinates","squareClassName","handleSquareClick","files","ranks","mapDispatchToProps","resetBoard","connect","chess","board","useEffect","dir","map","key","Coordinates","chessmen","get","defineMessages","createPage","formatMessage","useIntl","useSelector","state","dispatch","useDispatch","Helmet","title","messages","Provider","value","compose","___CSS_LOADER_EXPORT___","push","module","id","locals"],"sourceRoot":""}