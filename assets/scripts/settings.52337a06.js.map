{"version":3,"file":"assets/scripts/settings.52337a06.js","mappings":"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","sources":["webpack://rap/./src/atoms/fullScreenState.ts","webpack://rap/./src/components/App/SettingsPage/classes.css?465d","webpack://rap/./src/components/App/SettingsPage/messages.ts","webpack://rap/./src/components/App/SettingsPage/index.tsx","webpack://rap/./src/components/Banner/index.tsx","webpack://rap/./src/components/ObtainCookieConsentBanner/index.tsx","webpack://rap/./src/components/ObtainCookieConsentBanner/messages.ts","webpack://rap/./src/globalVariables/cookieDialogKey.ts","webpack://rap/./src/globalVariables/reloadNotToAcceptCookiesBannerKey.ts","webpack://rap/./src/hooks/useBanner.ts","webpack://rap/./src/components/App/SettingsPage/classes.css"],"sourcesContent":["import { atom } from 'recoil'\n\nconst fullScreenState = atom({\n  key: 'fullScreenState',\n  // full screen 状態でない場合は null、Fullscreen API をサポートしていない場合は undefined\n  default: document.fullscreenElement != null,\n  effects_UNSTABLE: [\n    ({ onSet }) => {\n      onSet((newFullScreen) => {\n        // TODO: Delete the next line\n        if (typeof newFullScreen !== 'boolean') {\n          throw new Error\n        }\n\n        if (newFullScreen) {\n          document.documentElement.requestFullscreen()\n        } else {\n          document.exitFullscreen()\n        }\n      })\n    },\n  ],\n})\n\nexport default fullScreenState\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!../../../../node_modules/postcss-loader/dist/cjs.js!./classes.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!../../../../node_modules/postcss-loader/dist/cjs.js!./classes.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { defineMessages } from 'react-intl'\n\nexport default defineMessages({\n  settings: 'Settings',\n  general: 'General',\n  language: 'Language',\n  appearance: 'Appearance',\n  theme: 'Theme',\n  useLightTheme: 'Use light theme',\n  useDarkTheme: 'Use dark theme',\n  useDeviceTheme: 'Use device theme',\n  fullScreen: 'Full screen',\n  securityAndPrivacy: 'Security and privacy',\n  acceptCookies: 'Accept cookies',\n  aPageReloadIsRequiredForTheConfigurationChangesToTakeEffect: 'A page reload is required for the configuration changes to take effect.',\n  reload: 'Reload',\n  dontReload: 'Don\\'t reload',\n})\n","import Avatar from '@material-ui/core/Avatar'\nimport Button from '@material-ui/core/Button'\nimport Grid from '@material-ui/core/Grid'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport ListSubheader from '@material-ui/core/ListSubheader'\nimport Radio from '@material-ui/core/Radio'\nimport RadioGroup from '@material-ui/core/RadioGroup'\nimport Switch from '@material-ui/core/Switch'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport Brightness4Icon from '@material-ui/icons/Brightness4'\nimport Brightness7Icon from '@material-ui/icons/Brightness7'\nimport BrightnessAutoIcon from '@material-ui/icons/BrightnessAuto'\nimport SecurityIcon from '@material-ui/icons/Security'\nimport { useInjection } from 'inversify-react'\nimport React, { useCallback, useContext, useEffect, useMemo } from 'react'\nimport Helmet from 'react-helmet'\nimport { FormattedMessage, useIntl } from 'react-intl'\nimport { useRecoilState, useRecoilValue, useSetRecoilState } from 'recoil'\nimport { v4 } from 'uuid'\n\nimport { shouldBePresent } from '~/asserters/commonAsserters'\nimport appearanceThemeState from '~/atoms/appearanceThemeState'\nimport cookieConsentObtainedState from '~/atoms/cookieConsentObtainedState'\nimport fullScreenState from '~/atoms/fullScreenState'\nimport gtmConsentsState from '~/atoms/gtmConsentsState'\nimport Banner from '~/components/Banner'\nimport LocaleSelect from '~/components/LocaleSelect'\nimport ObtainCookieConsentBanner from '~/components/ObtainCookieConsentBanner'\nimport obtainedCookieConsentBannerMessages from '~/components/ObtainCookieConsentBanner/messages' // TODO: Move\nimport { createPage } from '~/components/PageTemplate'\nimport ConfigRegistry from '~/config/ConfigRegistry'\nimport DefaultDarkContext from '~/contexts/DefaultDarkContext'\nimport cookieDialogKey from '~/globalVariables/cookieDialogKey'\nimport reloadNotToAcceptCookiesBannerKey from '~/globalVariables/reloadNotToAcceptCookiesBannerKey'\nimport useBanner from '~/hooks/useBanner'\nimport useGtm from '~/hooks/useGtm'\nimport currentBannerState from '~/selectors/currentBannerState'\nimport classes from './classes.css'\nimport messages from './messages'\n\nconst languageSettingId = v4()\nconst themeSettingId = v4()\nconst fullscreenSettingId = v4()\nconst acceptCookiesSettingId = v4()\n\nconst SettingsPage: React.FC = () => {\n  const { formatMessage } = useIntl()\n  const config = useInjection<ConfigRegistry>('EnvVarConfig')\n  const gtmContainerId = config.get('GTM_CONTAINER_ID')\n  const gtm = useGtm()\n  const banner = useBanner()\n\n  const [appearanceTheme, setAppearanceTheme] = useRecoilState(appearanceThemeState)\n  const [fullScreen, setFullScreen] = useRecoilState(fullScreenState)\n  const currentBanner = useRecoilValue(currentBannerState)\n  const [cookieConsentObtained, setCookieConsentObtained] = useRecoilState(cookieConsentObtainedState)\n  const setGtmConsents = useSetRecoilState(gtmConsentsState)\n  const { defaultDark } = useContext(DefaultDarkContext)\n\n  shouldBePresent(defaultDark)\n\n  const handleFullscreenchange = useCallback(() => {\n    setFullScreen(document.fullscreenElement !== null)\n  }, [setFullScreen])\n\n  useEffect(() => {\n    document.addEventListener('webkitfullscreenchange', handleFullscreenchange)\n    document.addEventListener('fullscreenchange', handleFullscreenchange)\n\n    return () => {\n      document.removeEventListener('webkitfullscreenchange', handleFullscreenchange)\n      document.removeEventListener('fullscreenchange', handleFullscreenchange)\n    }\n  }, [handleFullscreenchange])\n\n  const handleAppearanceThemeChange = useCallback((_event, theme: string) => {\n    if (theme === 'light' || theme === 'dark' || theme === 'device') {\n      setAppearanceTheme(theme)\n    }\n  }, [setAppearanceTheme])\n\n  const handleFullScreenChange = useCallback((_event, checked) => {\n    setFullScreen(checked)\n  }, [setFullScreen])\n\n  const whileConsentObtained = useMemo(() => {\n    return currentBanner?.key === cookieDialogKey\n  }, [currentBanner])\n\n  const handleAgree = useCallback(() => {\n    shouldBePresent(gtmContainerId)\n\n    setGtmConsents({\n      analytics_storage: 'granted',\n    })\n\n    // NOTE: 画面のちらつきを減らすために、裏にある方を先に隠す。\n    banner.hide({\n      key: reloadNotToAcceptCookiesBannerKey,\n      safe: true,\n    })\n\n    banner.hide({ key: cookieDialogKey })\n\n    gtm.install(gtmContainerId)\n  }, [banner, gtm, gtmContainerId, setGtmConsents])\n\n  const handleCancel = useCallback(() => {\n    banner.hide({ key: cookieDialogKey })\n  }, [banner])\n\n  const handleReload = useCallback(() => {\n    location.reload()\n  }, [])\n\n  const handleDontReload = useCallback(() => {\n    banner.hide({ key: reloadNotToAcceptCookiesBannerKey })\n  }, [banner])\n\n  const handleAcceptCookiesChange = useCallback((_event, checked) => {\n    if (checked) {\n      // NOTE: Switch の切り替えはせず（保留し）、<ObtainCookieConsentBanner> の onAgree で切り替える。\n\n      banner.show(<ObtainCookieConsentBanner\n        onAgree={ handleAgree }\n        onCancel={ handleCancel }\n      />, {\n        key: cookieDialogKey,\n        replaceable: true,\n      })\n    } else {\n      setCookieConsentObtained(false)\n\n      banner.show(<Banner\n        leading={ <Avatar>\n          <SecurityIcon />\n        </Avatar> }\n        text={ <FormattedMessage { ...messages.aPageReloadIsRequiredForTheConfigurationChangesToTakeEffect } /> }\n        actions={ <>\n          <Button variant=\"text\" color=\"primary\" onClick={ handleReload }>\n            <FormattedMessage { ...messages.reload } />\n          </Button>\n          <Button variant=\"text\" color=\"primary\" onClick={ handleDontReload }>\n            <FormattedMessage { ...messages.dontReload } />\n          </Button>\n        </> }\n      />, {\n        key: reloadNotToAcceptCookiesBannerKey,\n      })\n    }\n  }, [banner, handleAgree, handleCancel, handleReload, handleDontReload, setCookieConsentObtained])\n\n  return (\n    <>\n      <Helmet title={ formatMessage(messages.settings) } />\n      <Grid container>\n        <Grid item xs={ 12 } sm={ 6 } md={ 4 } lg={ 3 } xl={ 2 }>\n          <List\n            subheader={ <ListSubheader>\n              <FormattedMessage { ...messages.general } />\n            </ListSubheader> }\n          >\n            <ListItem\n              classes={ {\n                secondaryAction: classes.ListItemSecondaryActionIsLocaleSelect,\n              } }\n            >\n              <ListItemText\n                primary={ <FormattedMessage { ...messages.language } /> }\n                id={ languageSettingId }\n              />\n              <ListItemSecondaryAction>\n                <LocaleSelect\n                  hiddenLabel\n                  FormControlProps={ {\n                    variant: 'standard',\n                    color: 'secondary',\n                    'aria-labelledby': languageSettingId,\n                  } }\n                />\n              </ListItemSecondaryAction>\n            </ListItem>\n          </List>\n        </Grid>\n        <Grid item xs={ 12 } sm={ 6 } md={ 4 } lg={ 3 } xl={ 2 }>\n          <List\n            subheader={ <ListSubheader>\n              <FormattedMessage { ...messages.appearance } />\n            </ListSubheader> }\n          >\n            <ListItem\n              classes={ {\n                secondaryAction: classes.ListItemSecondaryActionIsRadioGroup3,\n              } }\n            >\n              <ListItemText\n                primary={ <FormattedMessage { ...messages.theme } /> }\n                id={ themeSettingId }\n              />\n              <ListItemSecondaryAction>\n                <RadioGroup\n                  row\n                  name=\"theme\"\n                  value={ appearanceTheme }\n                  onChange={ handleAppearanceThemeChange }\n                  aria-labelledby={ themeSettingId }\n                >\n                  <Tooltip arrow title={ <FormattedMessage { ...messages.useLightTheme } /> }>\n                    <Radio\n                      icon={ <Brightness7Icon /> }\n                      checkedIcon={ <Brightness7Icon /> }\n                      value=\"light\"\n                    />\n                  </Tooltip>\n                  <Tooltip arrow title={ <FormattedMessage { ...messages.useDarkTheme } /> }>\n                    <Radio\n                      icon={ <Brightness4Icon /> }\n                      checkedIcon={ <Brightness4Icon /> }\n                      value=\"dark\"\n                    />\n                  </Tooltip>\n                  <Tooltip arrow title={ <FormattedMessage { ...messages.useDeviceTheme } /> }>\n                    <Radio\n                      icon={ <BrightnessAutoIcon /> }\n                      checkedIcon={ <BrightnessAutoIcon /> }\n                      value=\"device\"\n                    />\n                  </Tooltip>\n                </RadioGroup>\n              </ListItemSecondaryAction>\n            </ListItem>\n            <ListItem\n              disabled={ !document.fullscreenEnabled }\n              classes={ {\n                secondaryAction: classes.ListItemSecondaryActionIsSwitch,\n              } }\n            >\n              <ListItemText\n                primary={ <FormattedMessage { ...messages.fullScreen } /> }\n                id={ fullscreenSettingId }\n              />\n              <ListItemSecondaryAction>\n                <Switch\n                  checked={ fullScreen }\n                  onChange={ handleFullScreenChange }\n                  disabled={ !document.fullscreenEnabled }\n                  aria-labelledby={ fullscreenSettingId }\n                />\n              </ListItemSecondaryAction>\n            </ListItem>\n          </List>\n        </Grid>\n        <Grid item xs={ 12 } sm={ 6 } md={ 4 } lg={ 3 } xl={ 2 }>\n          <List\n            subheader={ <ListSubheader>\n              <FormattedMessage { ...messages.securityAndPrivacy } />\n            </ListSubheader> }\n          >\n            <ListItem\n              classes={ {\n                secondaryAction: classes.ListItemSecondaryActionIsSwitch,\n              } }\n            >\n              <ListItemText\n                primary={ <FormattedMessage { ...messages.acceptCookies } /> }\n                secondary={ <FormattedMessage { ...obtainedCookieConsentBannerMessages.weUseCookiesToAnalyzeOurTraffic } /> }\n                id={ acceptCookiesSettingId }\n              />\n              <ListItemSecondaryAction>\n                <Switch\n                  checked={ cookieConsentObtained }\n                  onChange={ handleAcceptCookiesChange }\n                  disabled={ gtmContainerId === undefined || whileConsentObtained }\n                  aria-labelledby={ acceptCookiesSettingId }\n                />\n              </ListItemSecondaryAction>\n            </ListItem>\n          </List>\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n\nexport default createPage(SettingsPage)\n","import { AvatarProps } from '@material-ui/core/Avatar'\nimport Box from '@material-ui/core/Box'\nimport Paper from '@material-ui/core/Paper'\nimport Typography from '@material-ui/core/Typography'\nimport Bowser from 'bowser'\nimport React from 'react'\n\nimport Spacer from '~/components/Spacer'\n\nexport interface Props {\n  leading?: React.ReactElement<AvatarProps, React.ComponentType<AvatarProps>>\n  text: React.ReactNode\n  actions: React.ReactNode\n}\n\n// TODO: Remove\n// TODO: Detect UA changes?\nconst browser = Bowser.getParser(navigator.userAgent)\n\nconst isMobile = browser.is('Mobile')\n\n/**\n * An implementation of https://material.io/components/banners.\n *\n * NOTE: Not support the no leading, mobile, one-line version.\n */\nconst Banner: React.FC<Props> = ({ leading, text, actions }) => (\n  <Paper square elevation={ 0 }>\n    <Box\n      display=\"flex\"\n      flexWrap=\"nowrap\"\n      alignItems={ isMobile ? 'flex-start' : 'center' }\n    >\n      { leading !== undefined && (\n        <Box\n          my={ isMobile ? 3 : 2 }\n          ml={ 2 }\n        >\n          { leading }\n        </Box>\n      ) }\n      <Box\n        alignSelf=\"stretch\"\n        display=\"flex\"\n        flexGrow={ 1 }\n        alignItems={ isMobile ? 'flex-start' : 'center' }\n        flexWrap={ isMobile ? 'wrap' : undefined }\n        gridColumnGap={ (isMobile ? 36 : 90) - 16 }\n        gridRowGap={ isMobile ? (leading !== undefined ? 20 : 12) - 10 : undefined }\n      >\n        <Box\n          mt={ isMobile ? 3 : 2 }\n          mb={ isMobile ? undefined : 2 }\n          ml={ isMobile ? 2 : 3 }\n          mr={ 1 }\n        >\n          <Typography variant=\"body2\">{ text }</Typography>{ /* TODO: Align to baseline */ }\n        </Box>\n        <Box\n          alignSelf=\"flex-end\"\n          display=\"flex\"\n          flexGrow={ 1 }\n        >\n          <Spacer />\n          <Box\n            mt={ isMobile ? 1.25 : 1 }\n            mx={ 1 }\n            mb={ 1 }\n            display=\"flex\"\n            gridColumnGap={ 8 }\n          >\n            { actions }\n          </Box>\n        </Box>\n      </Box>\n    </Box>\n  </Paper>\n)\n\nexport default Banner\n","import Avatar from '@material-ui/core/Avatar'\nimport Button from '@material-ui/core/Button'\nimport SecurityIcon from '@material-ui/icons/Security'\nimport React from 'react'\nimport { FormattedMessage } from 'react-intl'\nimport { useRecoilCallback } from 'recoil'\n\nimport cookieConsentObtainedState from '~/atoms/cookieConsentObtainedState'\nimport Banner from '~/components/Banner'\nimport messages from './messages'\n\ninterface Props {\n  onAgree?(): void\n  onCancel?(): void\n}\n\nconst ObtainCookieConsentBanner: React.FC<Props> = ({ onAgree, onCancel }) => {\n  const handleAgree = useRecoilCallback(({ set }) => () => {\n    set(cookieConsentObtainedState, true)\n\n    onAgree?.()\n  }, [onAgree])\n\n  return (\n    <Banner\n      leading={ <Avatar>\n        <SecurityIcon />\n      </Avatar> }\n      text={ <FormattedMessage { ...messages.weUseCookiesToAnalyzeOurTraffic } /> }\n      actions={ <>\n        <Button variant=\"text\" color=\"primary\" onClick={ handleAgree }>\n          <FormattedMessage { ...messages.agree } />\n        </Button>\n        <Button variant=\"text\" color=\"primary\" onClick={ onCancel }>\n          <FormattedMessage { ...messages.cancel } />\n        </Button>\n      </> }\n    />\n  )\n}\n\nexport default ObtainCookieConsentBanner\n","import { defineMessages } from 'react-intl'\n\nexport default defineMessages({\n  weUseCookiesToAnalyzeOurTraffic: 'We use cookies to analyze our traffic.',\n  agree: 'Agree',\n  cancel: 'Cancel',\n})\n","import { v4 } from 'uuid'\n\nconst cookieDialogKey = v4()\n\nexport default cookieDialogKey\n","import { v4 } from 'uuid'\n\nconst reloadNotToAcceptCookiesBannerKey = v4()\n\nexport default reloadNotToAcceptCookiesBannerKey\n","import { useRecoilCallback } from 'recoil'\nimport { v4 } from 'uuid'\n\nimport bannersState from '~/atoms/bannersState'\nimport { Props as BannerProps } from '~/components/Banner'\nimport currentBannerState from '~/selectors/currentBannerState'\n\ntype BannerElement = React.ReactElement<BannerProps, React.ComponentType<BannerProps>>\n\ninterface ShowOptions {\n  key?: string\n  replaceable?: boolean\n}\n\ninterface HideOptions {\n  key?: string\n  safe?: boolean // no failures if true\n}\n\nconst useBanner = () => {\n  const show = useRecoilCallback(({ set }) => (banner: BannerElement, options?: ShowOptions) => {\n    const key = options?.key ?? v4()\n    const replaceable = options?.replaceable ?? false\n\n    set(currentBannerState, {\n      banner,\n      key,\n      replaceable,\n    })\n\n    return key\n  })\n\n  const hide = useRecoilCallback(({ set }) => (options?: HideOptions) => {\n    const key = options?.key\n    const safe = options?.safe ?? false\n\n    if (key === undefined) {\n      set(currentBannerState, (currentBanner) => {\n        if (currentBanner === null && !safe) {\n          throw new Error('No banner found.')\n        }\n\n        return null\n      })\n    } else {\n      set(bannersState, (banners) => {\n        const i = banners.findIndex((banner) => banner.key === key)\n\n        if (i === -1 && !safe) {\n          throw new Error('No banner found.')\n        }\n\n        if (i !== -1) {\n          return [\n            ...banners.slice(0, i),\n            ...banners.slice(i + 1),\n          ]\n        }\n\n        return banners\n      })\n    }\n  })\n\n  return { show, hide }\n}\n\nexport default useBanner\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".src-components-App-SettingsPage-classes__ListItemSecondaryActionIsLocaleSelect--ZS3mx {\\n  padding-inline-end: 104.46666667px; /* 元々の値 (48px) + LocaleSelect の最大幅 (locale: English) (98.46666667px) - Checkbox の幅 (42px) */\\n}\\n\\n.src-components-App-SettingsPage-classes__ListItemSecondaryActionIsRadioGroup3--bASGr {\\n  padding-inline-end: 132px; /* 元々の値 (48px) + RadioGroup>Radio*3 の幅 (126px) - Checkbox の幅 (42px) */\\n}\\n\\n.src-components-App-SettingsPage-classes__ListItemSecondaryActionIsSwitch--QKCGG {\\n  padding-inline-end: 64px; /* 元々の値 (48px) + Switch の幅 (58px) - Checkbox の幅 (42px) */\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/App/SettingsPage/classes.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,kCAAkC,EAAE,2FAA2F;AACjI;;AAEA;EACE,yBAAyB,EAAE,qEAAqE;AAClG;;AAEA;EACE,wBAAwB,EAAE,wDAAwD;AACpF\",\"sourcesContent\":[\".ListItemSecondaryActionIsLocaleSelect {\\n  padding-inline-end: 104.46666667px; /* 元々の値 (48px) + LocaleSelect の最大幅 (locale: English) (98.46666667px) - Checkbox の幅 (42px) */\\n}\\n\\n.ListItemSecondaryActionIsRadioGroup3 {\\n  padding-inline-end: 132px; /* 元々の値 (48px) + RadioGroup>Radio*3 の幅 (126px) - Checkbox の幅 (42px) */\\n}\\n\\n.ListItemSecondaryActionIsSwitch {\\n  padding-inline-end: 64px; /* 元々の値 (48px) + Switch の幅 (58px) - Checkbox の幅 (42px) */\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"ListItemSecondaryActionIsLocaleSelect\": \"src-components-App-SettingsPage-classes__ListItemSecondaryActionIsLocaleSelect--ZS3mx\",\n\t\"ListItemSecondaryActionIsRadioGroup3\": \"src-components-App-SettingsPage-classes__ListItemSecondaryActionIsRadioGroup3--bASGr\",\n\t\"ListItemSecondaryActionIsSwitch\": \"src-components-App-SettingsPage-classes__ListItemSecondaryActionIsSwitch--QKCGG\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["atom","key","default","document","fullscreenElement","effects_UNSTABLE","onSet","newFullScreen","Error","documentElement","requestFullscreen","exitFullscreen","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","defineMessages","settings","general","language","appearance","theme","useLightTheme","useDarkTheme","useDeviceTheme","fullScreen","securityAndPrivacy","acceptCookies","aPageReloadIsRequiredForTheConfigurationChangesToTakeEffect","reload","dontReload","languageSettingId","v4","themeSettingId","fullscreenSettingId","acceptCookiesSettingId","createPage","formatMessage","useIntl","gtmContainerId","useInjection","get","gtm","useGtm","banner","useBanner","appearanceTheme","setAppearanceTheme","useRecoilState","appearanceThemeState","setFullScreen","fullScreenState","currentBanner","useRecoilValue","currentBannerState","cookieConsentObtained","setCookieConsentObtained","cookieConsentObtainedState","setGtmConsents","useSetRecoilState","gtmConsentsState","defaultDark","useContext","DefaultDarkContext","shouldBePresent","handleFullscreenchange","useCallback","useEffect","addEventListener","removeEventListener","handleAppearanceThemeChange","_event","handleFullScreenChange","checked","whileConsentObtained","useMemo","cookieDialogKey","handleAgree","analytics_storage","hide","reloadNotToAcceptCookiesBannerKey","safe","install","handleCancel","handleReload","location","handleDontReload","handleAcceptCookiesChange","show","ObtainCookieConsentBanner","onAgree","onCancel","replaceable","Banner","leading","Avatar","Security","text","messages","actions","Button","variant","color","onClick","Helmet","title","Grid","container","item","xs","sm","md","lg","xl","List","subheader","ListSubheader","ListItem","classes","secondaryAction","ListItemText","primary","id","ListItemSecondaryAction","LocaleSelect","hiddenLabel","FormControlProps","RadioGroup","row","name","value","onChange","Tooltip","arrow","Radio","icon","Brightness7","checkedIcon","Brightness4","BrightnessAuto","disabled","fullscreenEnabled","Switch","secondary","obtainedCookieConsentBannerMessages","isMobile","Bowser","navigator","userAgent","is","square","elevation","display","flexWrap","alignItems","my","ml","alignSelf","flexGrow","gridColumnGap","gridRowGap","mt","mb","mr","mx","useRecoilCallback","set","weUseCookiesToAnalyzeOurTraffic","agree","cancel","bannersState","banners","i","findIndex","slice","___CSS_LOADER_EXPORT___","push","module","locals"],"sourceRoot":""}