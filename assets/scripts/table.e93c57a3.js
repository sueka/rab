(self.webpackChunkrap=self.webpackChunkrap||[]).push([[4986],{91:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return K}});var a=l(95477),n=l(67294),r=l(64593),s=l(31753),i=l(5840),o=l(35369),u=l(15659),c=l(26353),d=l(41120),E=l(8920),m=l(79895),S=l(82302),f=l(99613),v=l(17196),p=l(56847),g=l(83750),_=l(57394),h=l(77256),O=l(51206);function y(e,t){return e<t?-1:e>t?1:0}const b=l.n(O)().getParser(navigator.userAgent).is("Mobile"),w=(0,d.Z)({LocalizedTableCell:{textAlign:({direction:e})=>{if(void 0!==e)switch(e){case"ltr":return"left";case"rtl":return"right"}}}},{flip:!1});var A=({columns:e,rows:t,defaultSortOrder:l="asc",locale:a})=>{const[r,s]=(0,n.useState)([]),i=(0,n.useMemo)((()=>r[0]),[r]),u=(0,n.useCallback)((e=>()=>{if(e===(null==i?void 0:i.by))s((([e,...t])=>[{by:e.by,in:"asc"===e.in?"desc":"asc"},...t]));else{const t=r.findIndex((t=>t.by===e));s(-1===t?t=>[{by:e,in:l},...t]:e=>[e[t],...e.slice(0,t),...e.slice(t+1)])}}),[l,r,i]),c=(0,n.useMemo)((()=>r.reduceRight(((e,t)=>{switch(t.in){case"asc":return e.sortBy((e=>String(e[t.by])),y);case"desc":return e.sortBy((e=>String(e[t.by])),((e,t)=>-y(e,t)))}}),(0,o.aV)(t)).toArray()),[r,t]),d=(0,E.Z)(),O=(0,n.useMemo)((()=>{if(void 0!==a)return/^(?:he|iw)\b/.test(a)?"rtl":"ltr"}),[a]),A=w({direction:O});return n.createElement(p.Z,{component:m.Z},n.createElement(S.Z,{size:b?"small":"medium",lang:a},n.createElement(g.Z,null,n.createElement(_.Z,null,e.map((e=>{var t,a,s;return n.createElement(v.Z,{variant:"head",sortDirection:(null==i?void 0:i.by)===e.field?i.in:void 0,className:A.LocalizedTableCell,style:{minWidth:void 0!==e.width?e.width+2*d.spacing(2):void 0},key:e.field},n.createElement("bdi",null,n.createElement(h.Z,{active:(null==i?void 0:i.by)===e.field,direction:null!==(t=null===(a=r.find((t=>t.by===e.field)))||void 0===a?void 0:a.in)&&void 0!==t?t:l,onClick:u(e.field)},null!==(s=e.label)&&void 0!==s?s:e.field)))})))),n.createElement(f.Z,null,c.map(((t,l)=>n.createElement(_.Z,{hover:!0,key:l},(0,o.zN)(Object.entries(t)).sortBy(((t,l)=>e.findIndex((e=>e.field===l))),((e,t)=>e-t)).map(((e,t)=>n.createElement(v.Z,{className:A.LocalizedTableCell,key:t},n.createElement("bdi",null,e)))).valueSeq().toArray()))))))},T=l(38780),I=l(46121),L=l(37868);function Z(e,t){const[l,a]=(0,n.useState)(null),[r,s]=(0,n.useState)(null),[i,o]=(0,n.useState)(null),[u,c]=(0,n.useState)(null);switch((0,n.useEffect)((()=>{a((0,L.ZP)(e,t)),c("pending")}),[e,t]),u){case"pending":throw(0,I.s)(l),l.then((e=>{s(e),c("fulfilled")})).catch((e=>{if(!(e instanceof Error))throw new TypeError("Non-error reason caught.");o(e),c("rejected")}));case null:case"fulfilled":return r;case"rejected":throw i}}var G=l(25818);var N=l(13665);const j=N.vl,M=(0,N.P7)(j),P=(0,N.El)("DIMENSION_UNSPECIFIED","COLUMNS","ROWS"),C=(0,N.su)((e=>({range:(0,N.jt)(N.XC)(e.range),majorDimension:(0,N.jt)(P)(e.majorDimension),values:(0,N.jt)(M)(e.values)}))),D=(0,N.su)((e=>({properties:(0,N.jt)(H)(e.properties),sheets:(0,N.jt)((0,N.P7)(k))(e.sheets)}))),H=(0,N.su)((e=>({locale:(0,N.jt)(N.XC)(e.locale)}))),k=(0,N.su)((e=>({data:(0,N.jt)((0,N.P7)(x))(e.data)}))),x=(0,N.su)((e=>({columnMetadata:(0,N.jt)((0,N.P7)(z))(e.columnMetadata)}))),z=(0,N.su)((e=>({pixelSize:(0,N.jt)(N.mH)(e.pixelSize)})));function R(e){switch(typeof e){case"string":case"number":return!0;default:return!1}}var B=()=>{const e=(0,u.useInjection)("EnvVarConfig"),t=Z((0,c.Gn)(G.Z`${e.get("SHEETS_API_URL")}/spreadsheets/:spreadsheetId\\?ranges=:sheetName&includeGridData=:includeGridData&fields=:fields&key=:apiKey`,{spreadsheetId:e.get("GOOGLE_SHEETS_FOSS_COMPARISON_TABLE_SHEET_ID"),sheetName:e.get("GOOGLE_SHEETS_FOSS_COMPARISON_TABLE_SHEET_SHEET_NAME"),includeGridData:!0,fields:"properties.locale,sheets.data.columnMetadata",apiKey:e.get("GOOGLE_CLOUD_APIS_GOOGLE_SHEETS_API_KEY")})),l=Z((0,c.Gn)(G.Z`${e.get("SHEETS_API_URL")}/spreadsheets/:spreadsheetId/values/:sheetName\\?key=:apiKey`,{spreadsheetId:e.get("GOOGLE_SHEETS_FOSS_COMPARISON_TABLE_SHEET_ID"),sheetName:e.get("GOOGLE_SHEETS_FOSS_COMPARISON_TABLE_SHEET_SHEET_NAME"),apiKey:e.get("GOOGLE_CLOUD_APIS_GOOGLE_SHEETS_API_KEY")})),[a,r]=(0,n.useState)(null),[s,d]=(0,n.useState)(null),[E,m]=(0,n.useState)(null);return(0,n.useEffect)((()=>{(async()=>{var e,a,n;if(null===t||null===l)return;const s=D(await t.json()),o=null===(e=s.properties)||void 0===e?void 0:e.locale,u=null===(a=s.sheets)||void 0===a||null===(n=a[0].data)||void 0===n?void 0:n[0].columnMetadata,c=C(await l.json());if(void 0===o||void 0===u)throw new Error("No both locale and columnMetadata found.");if("ROWS"!==(null==c?void 0:c.majorDimension))throw new Error("Dimension unsupported.");if(void 0===c.values||!c.values.every(Array.isArray))throw new Error("Less than 2 dimensions found.");if(!c.values.every((e=>e.every(R))))throw new Error("Neither string nor number value found.");m((0,i.P)(function(e){var t;const l=null===(t=/(?<language>[a-z]{2,3})(?:_(?<region>[A-Z]{2}))?/i.exec(e))||void 0===t?void 0:t.groups;(0,I.s)(l);const{language:a,region:n}=l;return{language:a,extendedLanguageSubtags:[],script:null,region:null!=n?n:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}(o)));const[E,...S]=c.values,f=E.map(((e,t)=>G.Z`${e}_${t}`));r(Array.from((0,T.Z)(f,(0,T.Z)(E,u))).map((([e,[t,{pixelSize:l}]])=>({field:e,label:t,width:l})))),d(S.map((e=>Object.fromEntries((0,T.Z)(f,e)))))})()}),[t,l]),null===a||null===s?null:n.createElement(A,{columns:(0,o.aV)(a).sortBy((e=>e.field),((e,t)=>e<t?-1:e>t?1:0)).toArray(),rows:s,locale:null!=E?E:void 0})},U=l(13833),F=(0,l(85315).vU)({table:{id:"src.components.App.TablePage.table",defaultMessage:"Table"}});var K=(0,U.D)((()=>{const{formatMessage:e}=(0,s.Z)();return n.createElement(n.Fragment,null,n.createElement(r.q,{title:e(F.table)}),n.createElement(n.Suspense,{fallback:n.createElement(a.Z,null)},n.createElement(B,null)))}))}}]);
//# sourceMappingURL=table.e93c57a3.js.map