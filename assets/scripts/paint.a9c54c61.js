(self.webpackChunkrap=self.webpackChunkrap||[]).push([[6962],{71289:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return H}});var a=n(67294),l=n(64593),s=n(31753),r=n(13833),u=n(28889),c=n(282),o=n(64436),i=n(30553),h=n(96019),v=n(62822),m=n(50998),d=n(95757),E=n(40074),p=n(67162),C=n(44845),f=n(22318),g=n(97127),b=n(43587),Z=n(16787),k=n(41120),x=n(94184),y=n.n(x),w=n(46121),A=n(17326),P=n(49527),S=n(11634);class M extends S.Z{constructor({red:e,green:t,blue:n,alpha:a}){super(),this.red=e,this.green=t,this.blue=n,this.alpha=a}hashCode(){let e=0;return e=31*e+this.red.hashCode(),e=31*e+this.green.hashCode(),e=31*e+this.blue.hashCode(),e=31*e+this.alpha.hashCode(),e}}function B({x:e,y:t},n){const{data:[a,l,s,r]}=n.getImageData(e,t,1,1);return new M({red:a,green:l,blue:s,alpha:r})}var O=n(93379),Y=n.n(O),D=n(14830),R={insert:"head",singleton:!1},T=(Y()(D.Z,R),D.Z.locals||{});const q=(0,k.Z)({Canvas:({width:e,height:t})=>({width:e,height:t})});var z=(0,a.forwardRef)((({width:e,height:t,lineWidth:n,context:l,tool:s},r)=>{const[u,c]=(0,a.useState)(!1),[o,i]=(0,a.useState)(null),h=(0,a.useRef)(null),v=(0,A.Z)(r,h),m=q({width:e,height:t}),d=(0,a.useMemo)((()=>y()(m.Canvas,T.Canvas)),[m.Canvas]),{dpr:E}=(0,Z.Z)();(0,a.useEffect)((()=>{null!=l&&null!==h.current&&null!==E&&(h.current.width=E*e,h.current.height=E*t,l.resetTransform(),l.scale(E,E))}),[e,t,l,h,E]);const p=(0,a.useCallback)((e=>{"pen"===s&&((0,w.M)(o),c(!0),i({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY}))}),[s,o]),C=(0,a.useCallback)((e=>{u&&((0,w.s)(l),(0,w.s)(o),l.lineWidth=n*(0!==e.pressure?e.pressure:1),l.lineJoin="round",l.beginPath(),l.moveTo(o.x,o.y),l.lineTo(e.nativeEvent.offsetX,e.nativeEvent.offsetY),l.stroke(),i({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY}))}),[n,l,u,o]),f=(0,a.useCallback)((()=>{c(!1),i(null)}),[]),g=(0,a.useCallback)((()=>{c(!1),i(null)}),[]),b=(0,a.useCallback)((async n=>{"bucket"===s&&((0,w.s)(l),await async function(e,t,n,a){(0,w.s)(a);const l=[],s=B(e,a);for(l.push(e);0!==l.length;){const e=l.shift();(0,w.s)(e);const r=B(e,a);s.equals(r)&&(a.fillRect(e.x,e.y,1,1),e.x>0&&l.push({x:e.x-1,y:e.y}),e.y>0&&l.push({x:e.x,y:e.y-1}),e.x<t-1&&l.push({x:e.x+1,y:e.y}),e.y<n-1&&l.push({x:e.x,y:e.y+1}),await(0,P.Z)(30))}}({x:n.nativeEvent.offsetX,y:n.nativeEvent.offsetY},e,t,l))}),[e,t,l,s]);return a.createElement("canvas",{ref:v,className:d,width:e,height:t,onPointerDown:p,onPointerMove:C,onPointerUp:f,onPointerLeave:g,onClick:b})})),X=n(74540),_=n(20590),I=n(5391),U=n(26663);var W=({value:e,onChange:t})=>a.createElement(U.Z,{orientation:"vertical",exclusive:!0,value:e,onChange:t},a.createElement(I.Z,{value:"pen"},a.createElement(X.Z,null)),a.createElement(I.Z,{value:"bucket",disabled:!0},a.createElement(_.Z,null))),F=n(85315),J=(0,F.vU)({clear:{id:"src.components.Paint.clear",defaultMessage:"Clear"},brushSize:{id:"src.components.Paint.brushSize",defaultMessage:"Brush size"}});const L=(0,b.gB)("butt","round","square"),N=(0,b.gB)("pen","bucket");var j=()=>{const[e,t]=(0,a.useState)(),[n,l]=(0,a.useState)("round"),[s,r]=(0,a.useState)(10),[b,k]=(0,a.useState)("pen"),{dpr:x}=(0,Z.Z)(),y=(0,a.useCallback)((e=>{t(null==e?void 0:e.getContext("2d"))}),[]),w=(0,a.useCallback)((()=>{null==e||e.clearRect(0,0,320,320)}),[e]),A=(0,a.useCallback)(((e,t)=>{N(t)&&k(t)}),[]),P=(0,a.useCallback)((e=>{L(e.target.value)&&l(e.target.value)}),[]),S=(0,a.useCallback)(((e,t)=>{if(Array.isArray(t))throw new Error;r(t)}),[]);return(0,a.useEffect)((()=>{null!=e&&(e.lineCap=n)}),[e,n]),a.createElement(a.Fragment,null,a.createElement(z,{width:320,height:320,lineWidth:s,ref:y,context:e,tool:b}),a.createElement(c.Z,{onClick:w},a.createElement(g.Z,J.clear)),a.createElement(W,{value:b,onChange:A}),a.createElement(o.Z,{disabled:"pen"!==b},a.createElement(h.Z,null,"line cap"),a.createElement(p.Z,{name:"lineCap",value:n,onChange:P},a.createElement(i.Z,{value:"butt",label:"butt",control:a.createElement(E.Z,null)}),a.createElement(i.Z,{value:"round",label:"round",control:a.createElement(E.Z,null)}),a.createElement(i.Z,{value:"square",label:"square",control:a.createElement(E.Z,null)}))),a.createElement(u.Z,{m:1},a.createElement(v.Z,null,a.createElement(m.Z,null,a.createElement(d.Z,null,a.createElement(f.Z,{gutterBottom:!0},a.createElement(g.Z,J.brushSize)),a.createElement(C.Z,{min:1/(null!=x?x:1),value:s,onChange:S}))))))},G=(0,F.vU)({paint:{id:"src.components.App.PaintPage.paint",defaultMessage:"Paint"}});var H=(0,r.D)((()=>{const{formatMessage:e}=(0,s.Z)();return a.createElement(a.Fragment,null,a.createElement(l.Z,{title:e(G.paint)}),a.createElement(j,null))}))},14830:function(e,t,n){"use strict";var a=n(94015),l=n.n(a),s=n(23645),r=n.n(s)()(l());r.push([e.id,".src-components-Paint-Canvas-classes__Canvas--10YIO {\n  background-color: white; /* TODO */\n}\n","",{version:3,sources:["webpack://./src/components/Paint/Canvas/classes.css"],names:[],mappings:"AAAA;EACE,uBAAuB,EAAE,SAAS;AACpC",sourcesContent:[".Canvas {\n  background-color: white; /* TODO */\n}\n"],sourceRoot:""}]),r.locals={Canvas:"src-components-Paint-Canvas-classes__Canvas--10YIO"},t.Z=r}}]);
//# sourceMappingURL=paint.a9c54c61.js.map