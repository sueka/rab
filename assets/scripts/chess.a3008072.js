(self.webpackChunkrap=self.webpackChunkrap||[]).push([[5030],{70971:function(s,e,n){"use strict";n.r(e),n.d(e,{default:function(){return O}});var a=n(67294),r=n(64593),o=n(31753),c=n(61867),l=n(40230),t=n(68875),i=n(31941),C=n(41120),u=n(94184),A=n.n(u),m=n(5200),h=(0,a.createContext)({picking:null,targets:null,halfMove:null,pickChessman:null,releaseChessman:null});function d(s,e){return s.file===e.file&&s.rank===e.rank}var p=n(90365),b=n(93379),g=n.n(b),E=n(32425),k={insert:"head",singleton:!1},v=(g()(E.Z,k),E.Z.locals||{});const _=(0,C.Z)((s=>({Chessman:{"&$Picking:not($Dragging)":{color:s.palette.primary.A700}},Picking:{},Dragging:{}})));var f=({chessman:s,coord:e})=>{const{picking:n,pickChessman:r}=(0,a.useContext)(h),o=_(),[{dragging:c},l,t]=(0,m.c)({type:"Chessman",collect:s=>({dragging:s.isDragging()}),item:()=>(null==r||r(s,e),{})}),i=(0,a.useMemo)((()=>A()(o.Chessman,v.Chessman,{[o.Dragging]:c,[o.Picking]:null!=n&&d(e,n.source)&&(0,p.Z)(s,n.chessman),[v.Dragging]:c})),[o.Chessman,o.Dragging,o.Picking,c,s,e,n]),C=(0,a.useMemo)((()=>A()(o.Chessman,v.Chessman,v.Preview)),[o.Chessman]),u=(0,a.useCallback)((()=>{null==n&&(null==r||r(s,e))}),[n,r,s,e]);return a.createElement(a.Fragment,null,a.createElement("span",{ref:t,className:C},s.symbol),a.createElement("span",{ref:l,className:i,onClick:u},s.symbol))},q=n(59240);var B=n(11471),w={insert:"head",singleton:!1},S=(g()(B.Z,w),B.Z.locals||{});const y=(0,C.Z)((s=>({Square:{"&$Square$Target":{backgroundColor:s.palette.primary[100]}},Target:{}})));var T=({children:s,coord:e})=>{const{picking:n,targets:r,halfMove:o,releaseChessman:c}=(0,a.useContext)(h),l=y(),t=(0,a.useMemo)((()=>{var s;return null!==(s=null==r?void 0:r.some((s=>d(e,s))))&&void 0!==s&&s}),[e,r]),[,i]=(0,q.L)({accept:"Chessman",drop(){null!=n&&(t?null==o||o(n.chessman,n.source,e):null==c||c())}}),C=(0,a.useMemo)((()=>function({file:s,rank:e}){return s%2==e%2?"black":"white"}(e)),[e]),u=(0,a.useMemo)((()=>A()(l.Square,S.Square,{[S.White]:"white"===C,[S.Black]:"black"===C,[l.Target]:t})),[l.Square,l.Target,C,t]),m=(0,a.useCallback)((()=>{null!=n&&(t?null==o||o(n.chessman,n.source,e):null==c||c())}),[o,n,e,c,t]);return a.createElement("div",{ref:i,className:u,onClick:m},s)},Z=n(1617),W={insert:"head",singleton:!1},x=(g()(Z.Z,W),Z.Z.locals||{});const D=[1,2,3,4,5,6,7,8],P=[8,7,6,5,4,3,2,1],M={resetBoard:i.iH};var N=(0,c.$j)((({chess:{board:s}})=>({board:s})),M)((({board:s,resetBoard:e})=>((0,a.useEffect)((()=>{e()}),[e]),a.createElement("table",{className:x.ChessboardTable,dir:"ltr"},a.createElement("tbody",null,P.map((e=>a.createElement("tr",{key:e},D.map((n=>{const r=new t.Z({file:n,rank:e}),o=s.chessmen.get(r);return a.createElement("td",{key:n,className:x.ChessboardTd},a.createElement(T,{coord:r},void 0!==o?a.createElement(f,{chessman:o,coord:r}):null))})))))))))),L=n(99673),G=(0,n(85315).vU)({chess:{id:"src.components.App.ChessPage.chess",defaultMessage:"Chess"}});var O=(0,L.D)((()=>{const{formatMessage:s}=(0,o.Z)(),e=(0,c.v9)((s=>s.chess.picking)),n=(0,c.v9)((s=>s.chess.targets)),t=(0,c.I0)();return a.createElement(a.Fragment,null,a.createElement(r.Z,{title:s(G.chess)}),a.createElement(h.Provider,{value:{picking:e,targets:n,halfMove:(0,l.qC)(t,i.p4),pickChessman:(0,l.qC)(t,i.Ns),releaseChessman:(0,l.qC)(t,i.Yu)}},a.createElement(N,null)))}))},32425:function(s,e,n){"use strict";var a=n(94015),r=n.n(a),o=n(23645),c=n.n(o)()(r());c.push([s.id,'.src-components-Chessboard-Chessman-classes__Chessman--1Ls2d {\n  font-family: "Apple Symbols", sans-serif;\n  color: #222;\n}\n\n.src-components-Chessboard-Chessman-classes__Chessman--1Ls2d.src-components-Chessboard-Chessman-classes__Dragging--28aag {\n  opacity: 0.5;\n}\n\n/* TODO: in a little more normal way */\n.src-components-Chessboard-Chessman-classes__Chessman--1Ls2d.src-components-Chessboard-Chessman-classes__Preview--1tGRK {\n  position: absolute;\n  z-index: -1;\n}\n',"",{version:3,sources:["webpack://./src/components/Chessboard/Chessman/classes.css"],names:[],mappings:"AAAA;EACE,wCAAwC;EACxC,WAAW;AACb;;AAEA;EACE,YAAY;AACd;;AAEA,sCAAsC;AACtC;EACE,kBAAkB;EAClB,WAAW;AACb",sourcesContent:['.Chessman {\n  font-family: "Apple Symbols", sans-serif;\n  color: #222;\n}\n\n.Chessman.Dragging {\n  opacity: 0.5;\n}\n\n/* TODO: in a little more normal way */\n.Chessman.Preview {\n  position: absolute;\n  z-index: -1;\n}\n'],sourceRoot:""}]),c.locals={Chessman:"src-components-Chessboard-Chessman-classes__Chessman--1Ls2d",Dragging:"src-components-Chessboard-Chessman-classes__Dragging--28aag",Preview:"src-components-Chessboard-Chessman-classes__Preview--1tGRK"},e.Z=c},11471:function(s,e,n){"use strict";var a=n(94015),r=n.n(a),o=n(23645),c=n.n(o)()(r());c.push([s.id,".src-components-Chessboard-Square-classes__Square--1yCGb {\n  height: 32px;\n  width: 32px;\n  font-size: 20px; /* of chessman; FIXME */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  --white-square-color: white;\n  --black-square-color: #c0c0c0;\n}\n\n/* NOTE: できれば .Square.White にしたいが、そうすると postcss-css-variables がうまく動作しない。 */\n.src-components-Chessboard-Square-classes__White--2-a8H.src-components-Chessboard-Square-classes__Square--1yCGb {\n  background-color: white;\n  background-color: var(--white-square-color);\n}\n\n.src-components-Chessboard-Square-classes__Black--1HW9P.src-components-Chessboard-Square-classes__Square--1yCGb {\n  background-color: #c0c0c0;\n  background-color: var(--black-square-color);\n}\n","",{version:3,sources:["webpack://./src/components/Chessboard/Square/classes.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,WAAW;EACX,eAAe,EAAE,uBAAuB;EACxC,aAAa;EACb,mBAAmB;EACnB,uBAAuB;;EAEvB,2BAA2B;EAC3B,6BAA6B;AAC/B;;AAEA,0EAA0E;AAC1E;EACE,uBAA2C;EAA3C,2CAA2C;AAC7C;;AAEA;EACE,yBAA2C;EAA3C,2CAA2C;AAC7C",sourcesContent:[".Square {\n  height: 32px;\n  width: 32px;\n  font-size: 20px; /* of chessman; FIXME */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  --white-square-color: white;\n  --black-square-color: #c0c0c0;\n}\n\n/* NOTE: できれば .Square.White にしたいが、そうすると postcss-css-variables がうまく動作しない。 */\n.White.Square {\n  background-color: var(--white-square-color);\n}\n\n.Black.Square {\n  background-color: var(--black-square-color);\n}\n"],sourceRoot:""}]),c.locals={Square:"src-components-Chessboard-Square-classes__Square--1yCGb",White:"src-components-Chessboard-Square-classes__White--2-a8H",Black:"src-components-Chessboard-Square-classes__Black--1HW9P"},e.Z=c},1617:function(s,e,n){"use strict";var a=n(94015),r=n.n(a),o=n(23645),c=n.n(o)()(r());c.push([s.id,".src-components-Chessboard-classes__ChessboardTable--3TZoL {\n  border-collapse: collapse;\n}\n\n.src-components-Chessboard-classes__ChessboardTd--WKSwv {\n  padding: 0;\n}\n","",{version:3,sources:["webpack://./src/components/Chessboard/classes.css"],names:[],mappings:"AAAA;EACE,yBAAyB;AAC3B;;AAEA;EACE,UAAU;AACZ",sourcesContent:[".ChessboardTable {\n  border-collapse: collapse;\n}\n\n.ChessboardTd {\n  padding: 0;\n}\n"],sourceRoot:""}]),c.locals={ChessboardTable:"src-components-Chessboard-classes__ChessboardTable--3TZoL",ChessboardTd:"src-components-Chessboard-classes__ChessboardTd--WKSwv"},e.Z=c}}]);
//# sourceMappingURL=chess.a3008072.js.map