(self.webpackChunkreact_app_prototype=self.webpackChunkreact_app_prototype||[]).push([[962],{91091:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return K}});var a=t(67294),r=t(64593),l=t(31753),c=t(63038),u=t.n(c),o=t(64436),s=t(30553),i=t(96019),f=t(40074),h=t(67162),v=t(97127),p=t(67154),d=t.n(p),m=t(17109),E=t(34575),g=t.n(E),C=t(93913),b=t.n(C),k=t(2205),y=t.n(k),Z=t(78585),x=t.n(Z),w=t(29754),A=t.n(w);function R(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=A()(e);if(n){var r=A()(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return x()(this,t)}}var P=function(e){y()(t,e);var n=R(t);function t(e){var a,r=e.red,l=e.green,c=e.blue,u=e.alpha;return g()(this,t),(a=n.call(this)).red=r,a.green=l,a.blue=c,a.alpha=u,a}return b()(t,[{key:"hashCode",value:function(){var e=0;return e=31*(e=31*(e=31*(e=31*e+this.red.hashCode())+this.green.hashCode())+this.blue.hashCode())+this.alpha.hashCode()}}]),t}(t(18982).Z);function S(e,n){var t=e.x,a=e.y,r=n.getImageData(t,a,1,1),l=u()(r.data,4),c=l[0],o=l[1],s=l[2],i=l[3];return new P({red:c,green:o,blue:s,alpha:i})}var _=t(93379),D=t.n(_),q=t(91596),B={insert:"head",singleton:!1},M=(D()(q.Z,B),q.Z.locals||{}),O=function(e){var n=e.width,t=e.height,r=e.lineWidth,l=e.innerRef,c=e.context,o=e.tool,s=(0,a.useState)(!1),i=u()(s,2),f=i[0],h=i[1],v=(0,a.useState)(null),p=u()(v,2),d=p[0],E=p[1],g=(0,a.useCallback)((function(e){"pen"===o&&((0,m.N)(d),h(!0),E({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY}))}),[o,d]),C=(0,a.useCallback)((function(e){f&&((0,m.s)(c),(0,m.s)(d),c.lineWidth=r*e.pressure,c.lineJoin="round",c.beginPath(),c.moveTo(d.x,d.y),c.lineTo(e.nativeEvent.offsetX,e.nativeEvent.offsetY),c.stroke(),E({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY}))}),[r,c,f,d]),b=(0,a.useCallback)((function(){h(!1),E(null)}),[]),k=(0,a.useCallback)((function(){h(!1),E(null)}),[]),y=(0,a.useCallback)((function(e){"bucket"===o&&((0,m.s)(c),function(e,n,t,a){(0,m.s)(a);var r=[],l=S(e,a);for(r.push(e);0!==r.length;){var c=r.shift();(0,m.s)(c);var u=S(c,a);l.equals(u)&&(a.fillRect(c.x,c.y,1,1),c.x>0&&r.push({x:c.x-1,y:c.y}),c.y>0&&r.push({x:c.x,y:c.y-1}),c.x<n-1&&r.push({x:c.x+1,y:c.y}),c.y<t-1&&r.push({x:c.x,y:c.y+1}))}}({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY},n,t,c))}),[n,t,c,o]);return a.createElement("canvas",{ref:l,className:M.Canvas,width:n,height:t,onPointerDown:g,onPointerMove:C,onPointerUp:b,onPointerLeave:k,onClick:y})},T=(0,a.forwardRef)((function(e,n){return a.createElement(O,d()({innerRef:n},e))})),X=t(282),Y=function(e){var n=e.children,t=e.width,r=e.height,l=e.context,c=(0,a.useCallback)((function(){null==l||l.clearRect(0,0,t,r)}),[l,t,r]);return a.createElement(X.Z,{onClick:c},n)},I=t(74540),N=t(20590),U=function(e){var n=e.value,t=e.onChange;return a.createElement(o.Z,null,a.createElement(h.Z,{name:"tool",value:n,onChange:t},a.createElement(f.Z,{icon:a.createElement(I.Z,null),checkedIcon:a.createElement(I.Z,null),value:"pen"}),a.createElement(f.Z,{icon:a.createElement(N.Z,null),checkedIcon:a.createElement(N.Z,null),value:"bucket"})))},W=t(9192),F=t(85315),J=(0,F.vU)({clear:{id:"src.components.Paint.clear",defaultMessage:"clear"}}),L=(0,W.gB)("butt","round","square"),j=(0,W.gB)("pen","bucket"),z=function(){var e=(0,a.useState)(),n=u()(e,2),t=n[0],r=n[1],l=(0,a.useState)("round"),c=u()(l,2),p=c[0],d=c[1],m=(0,a.useState)("pen"),E=u()(m,2),g=E[0],C=E[1],b=(0,a.useCallback)((function(e){r(null==e?void 0:e.getContext("2d"))}),[]),k=(0,a.useCallback)((function(e,n){j(n)&&C(n)}),[]),y=(0,a.useCallback)((function(e){L(e.target.value)&&d(e.target.value)}),[]);return(0,a.useEffect)((function(){null!=t&&(t.lineCap=p)}),[t,p]),a.createElement(a.Fragment,null,a.createElement(T,{width:320,height:320,lineWidth:10,ref:b,context:t,tool:g}),a.createElement(Y,{width:320,height:320,context:t},a.createElement(v.Z,J.clear)),a.createElement(U,{value:g,onChange:k}),a.createElement(o.Z,{disabled:"pen"!==g},a.createElement(i.Z,null,"line cap"),a.createElement(h.Z,{name:"lineCap",value:p,onChange:y},a.createElement(s.Z,{value:"butt",label:"butt",control:a.createElement(f.Z,null)}),a.createElement(s.Z,{value:"round",label:"round",control:a.createElement(f.Z,null)}),a.createElement(s.Z,{value:"square",label:"square",control:a.createElement(f.Z,null)}))))},G=t(40371),H=(0,F.vU)({paint:{id:"src.components.App.PaintPage.paint",defaultMessage:"paint"}}),K=(0,G.D)((function(){var e=(0,l.Z)().formatMessage;return a.createElement(a.Fragment,null,a.createElement(r.Z,{title:e(H.paint)}),a.createElement(z,null))}))},17109:function(e,n,t){"use strict";function a(e){if(null==e)throw new Error}function r(e){if(null!=e)throw new Error}t.d(n,{s:function(){return a},N:function(){return r}})},91596:function(e,n,t){"use strict";var a=t(94015),r=t.n(a),l=t(23645),c=t.n(l)()(r());c.push([e.id,".src-components-Canvas-classes__Canvas--3i4gg {\n  background-color: white; /* TODO */\n}\n","",{version:3,sources:["webpack://./src/components/Canvas/classes.css"],names:[],mappings:"AAAA;EACE,uBAAuB,EAAE,SAAS;AACpC",sourcesContent:[".Canvas {\n  background-color: white; /* TODO */\n}\n"],sourceRoot:""}]),c.locals={Canvas:"src-components-Canvas-classes__Canvas--3i4gg"},n.Z=c}}]);
//# sourceMappingURL=paint.1a6b11b4.js.map